<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æˆ‘æ˜¯é˜¿è¨å•ŠğŸŒŒ</title>
  
  
  <link href="https://blog.kakar.top/atom.xml" rel="self"/>
  
  <link href="https://blog.kakar.top/"/>
  <updated>2023-06-24T17:17:51.000Z</updated>
  <id>https://blog.kakar.top/</id>
  
  <author>
    <name>æˆ‘æ˜¯é˜¿è¨å•ŠğŸŒŒ</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Nginxä¹‹äºŒçº§åŸŸååå‘ä»£ç†</title>
    <link href="https://blog.kakar.top/posts/7030efce.html"/>
    <id>https://blog.kakar.top/posts/7030efce.html</id>
    <published>2023-06-24T17:17:51.000Z</published>
    <updated>2023-06-24T17:17:51.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-æå‡ºéœ€æ±‚"><a class="markdownIt-Anchor" href="#1-æå‡ºéœ€æ±‚"></a> 1ã€æå‡ºéœ€æ±‚</h3><p>åœ¨å®é™…åœºæ™¯ä¸‹ï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯ä¸€ä¸ªæœåŠ¡å™¨è¿è¡Œå¤šä¸ªé¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®çš„ç«¯å£éƒ½ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆç°åœ¨ï¼Œæˆ‘æƒ³é€šè¿‡ä¸åŒçš„åŸŸåè®¿é—®ä¸åŒçš„é¡¹ç›®ï¼Œè¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p><p>**ä¾‹å¦‚ï¼š**ç°åœ¨æœåŠ¡å™¨ä¸­æœ‰ä¸‰ä¸ªç½‘ç«™ï¼Œåˆ†åˆ«æ˜¯åšå®¢ç½‘ç«™ï¼ˆç«¯å£4001ï¼‰ã€å¬æ­Œç½‘ç«™ï¼ˆç«¯å£4002ï¼‰ã€çœ‹ç”µå½±ç½‘ç«™ï¼ˆç«¯å£4003ï¼‰</p><table><thead><tr><th>ç½‘ç«™ç±»åˆ«</th><th>ä½¿ç”¨çš„ç«¯å£</th><th>é¢„æœŸä½¿ç”¨çš„è®¿é—®åŸŸå</th></tr></thead><tbody><tr><td>åšå®¢ç½‘ç«™ï¼š</td><td>4001</td><td><a href="http://test.com">test.com</a></td></tr><tr><td>å¬æ­Œç½‘ç«™ï¼š</td><td>4002</td><td><a href="http://music.test.com">music.test.com</a></td></tr><tr><td>çœ‹ç”µå½±ç½‘ç«™ï¼š</td><td>4003</td><td><a href="http://movie.test.com">movie.test.com</a></td></tr></tbody></table><p>å¦‚æœæƒ³è¾¾åˆ°ä½¿ç”¨æŒ‡å®šåŸŸåä¸å¸¦ç«¯å£å·å°±èƒ½è®¿é—®å¯¹åº”ç½‘ç«™ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä½¿ç”¨Nginxè¿™æ¬¾ç¥å™¨äº†ï¼ŒNginxå¯ä»¥å®ç°åå‘ä»£ç†ï¼Œå°†æ¯ä¸€ä¸ªè®¿é—®è¿™å°æœºå™¨çš„è¯·æ±‚è½¬å‘åˆ°å¯¹åº”çš„æœåŠ¡ä¸­å»ã€‚</p><p><code>æ³¨æ„ï¼š</code>åœ¨è¿™ä¹‹å‰ï¼Œè¿˜éœ€è¦åœ¨åŸŸåçš„æ§åˆ¶å°ä¸­åšäºŒçº§åŸŸåè§£æ</p><p>1ã€åœ¨æ§åˆ¶å°ä¸­æ·»åŠ è®°å½•</p><p>2ã€ä¸»æœºè®°å½•å¡«å†™äºŒçº§åŸŸåä¾‹å¦‚music</p><p>3ã€è®°å½•ç±»å‹é€‰æ‹©Aç±»å‹</p><p>4ã€è®°å½•å€¼å¡«å†™æœåŠ¡å™¨ipå³å¯ã€‚</p><h3 id="2-å®ç°éœ€æ±‚"><a class="markdownIt-Anchor" href="#2-å®ç°éœ€æ±‚"></a> 2ã€å®ç°éœ€æ±‚</h3><p>Nginxé…ç½®æ–‡ä»¶è¦æ€ä¹ˆå†™å‘¢ï¼Ÿ</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">http</span> &#123;    </span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span>  X-Real-IP  <span class="variable">$remote_addr</span>; <span class="comment">#è®°å½•è¿œç¨‹è®¿é—®ipï¼Œæ–¹ä¾¿åº”ç”¨ä¸­è·å– </span></span><br><span class="line">        <span class="attribute">server_name</span>  test.com;<span class="comment"># è®¿é—®çš„åŸŸå</span></span><br><span class="line">        <span class="section">location</span> / &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span>      http://127.0.0.1:4001; <span class="comment">#å°†åŸŸåä¸ºtest.comçš„è¯·æ±‚åˆ†å‘åˆ°æœ¬åœ°4001ç«¯å£çš„æœåŠ¡</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span>  X-Real-IP  <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  music.test.com;  </span><br><span class="line">        <span class="section">location</span> / &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span>      http://127.0.0.1:4002; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span>  X-Real-IP  <span class="variable">$remote_addr</span>; </span><br><span class="line">        <span class="attribute">server_name</span>  movie.test.com;  </span><br><span class="line">        <span class="section">location</span> / &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span>      http://127.0.0.1:4003; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OKï¼So Easy æ–¯å†… ~</p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡ä¸»è¦è®²è¿°Nginxçš„ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œä»¥åŠåœ¨é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®å‚æ•°åˆ—ä¸¾</summary>
    
    
    
    <category term="åå‘ä»£ç†" scheme="https://blog.kakar.top/categories/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/"/>
    
    
    <category term="Nginx" scheme="https://blog.kakar.top/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloudç»„ä»¶å­¦ä¹ ä¹‹Config</title>
    <link href="https://blog.kakar.top/posts/9f3469ff.html"/>
    <id>https://blog.kakar.top/posts/9f3469ff.html</id>
    <published>2023-06-16T13:44:46.000Z</published>
    <updated>2023-06-16T13:44:46.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="5-springcloud-netflix-configçš„ä½¿ç”¨ä»¥åŠè®²è§£"><a class="markdownIt-Anchor" href="#5-springcloud-netflix-configçš„ä½¿ç”¨ä»¥åŠè®²è§£"></a> 5ã€SpringCloud Netflix Configçš„ä½¿ç”¨ä»¥åŠè®²è§£</h1><h2 id="51-ç®€ä»‹"><a class="markdownIt-Anchor" href="#51-ç®€ä»‹"></a> 5.1ã€ç®€ä»‹</h2><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç”±äºæœåŠ¡æ•°é‡éå¸¸å¤šï¼Œé…ç½®æ–‡ä»¶åˆ†æ•£åœ¨ä¸åŒçš„å¾®æœåŠ¡é¡¹ç›®ä¸­ï¼Œ<strong>ç®¡ç†ä¸æ–¹ä¾¿</strong>ã€‚</p><p>Spring Cloud Configç»„ä»¶ä¸»è¦ç”¨äº<strong>é›†ä¸­ç®¡ç†é…ç½®æ–‡ä»¶</strong>ï¼Œå®ƒ<strong>æ”¯æŒé…ç½®æ–‡ä»¶æ”¾åœ¨é…ç½®æœåŠ¡çš„æœ¬åœ°ï¼Œä¹Ÿæ”¯æŒæ”¾åœ¨Gitä»“åº“ï¼ˆGithubã€Giteeï¼‰</strong></p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220122164102473.png" alt="image-20220122164102473" /></p><p><strong>é…ç½®ä¸­å¿ƒæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªå¾®æœåŠ¡ï¼ŒåŒæ ·éœ€è¦æ³¨å†Œåˆ°Eurekaæ³¨å†Œä¸­å¿ƒã€‚</strong></p><h2 id="52-gitå¹³å°çš„é€‰æ‹©"><a class="markdownIt-Anchor" href="#52-gitå¹³å°çš„é€‰æ‹©"></a> 5.2ã€Gitå¹³å°çš„é€‰æ‹©</h2><blockquote><p>githubè®¿é—®å¤ªæ…¢ï¼Œæœ¬æ¬¡å­¦ä¹ ä½¿ç”¨ç äº‘ï¼ˆgiteeï¼‰</p></blockquote><h2 id="53-åˆ›å»ºè¿œç¨‹ä»“åº“"><a class="markdownIt-Anchor" href="#53-åˆ›å»ºè¿œç¨‹ä»“åº“"></a> 5.3ã€åˆ›å»ºè¿œç¨‹ä»“åº“</h2><h4 id="531-æ–°å»ºä»“åº“"><a class="markdownIt-Anchor" href="#531-æ–°å»ºä»“åº“"></a> 5.3.1ã€æ–°å»ºä»“åº“</h4><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220122164913710.png" alt="image-20220122164913710" /></p><h4 id="532-é…ç½®ä»“åº“ä¿¡æ¯"><a class="markdownIt-Anchor" href="#532-é…ç½®ä»“åº“ä¿¡æ¯"></a> 5.3.2ã€é…ç½®ä»“åº“ä¿¡æ¯</h4><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220122165347412.png" alt="image-20220122165347412" /></p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220122165445539.png" alt="image-20220122165445539" /></p><h4 id="533-åˆ›å»ºé…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#533-åˆ›å»ºé…ç½®æ–‡ä»¶"></a> 5.3.3ã€åˆ›å»ºé…ç½®æ–‡ä»¶</h4><p>ç›´æ¥åˆ›å»ºé…ç½®æ–‡ä»¶</p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220122225549917.png" alt="image-20220122225549917" /></p><p><strong>é…ç½®æ–‡ä»¶å‘½åè§„åˆ™ï¼š</strong></p><p>é…ç½®æ–‡ä»¶çš„å‘½åæ–¹å¼ï¼š<code>&#123;application&#125;-&#123;profifile&#125;.yml</code>æˆ– <code>&#123;application&#125;-&#123;profifile&#125;.properties</code></p><p><code>application</code>ä¸ºåº”ç”¨åç§°</p><p><code>profifile</code>ç”¨äºåŒºåˆ†å¼€å‘ç¯å¢ƒï¼ˆdevï¼‰ï¼Œæµ‹è¯•ç¯å¢ƒï¼ˆtestï¼‰ã€ç”Ÿäº§ç¯å¢ƒï¼ˆprodï¼‰ç­‰</p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220122225758960.png" alt="image-20220122225758960" /></p><h2 id="54-åˆ›å»ºconfigæ¨¡å—"><a class="markdownIt-Anchor" href="#54-åˆ›å»ºconfigæ¨¡å—"></a> 5.4ã€åˆ›å»ºConfigæ¨¡å—</h2><h4 id="541-å¼•å…¥ä¾èµ–"><a class="markdownIt-Anchor" href="#541-å¼•å…¥ä¾èµ–"></a> 5.4.1ã€å¼•å…¥ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥Eurekaå®¢æˆ·ç«¯ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥ConfigæœåŠ¡ç±»ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-config-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="542-é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#542-é…ç½®æ–‡ä»¶"></a> 5.4.2ã€é…ç½®æ–‡ä»¶</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">12000</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Config-Server</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">server:</span></span><br><span class="line">        <span class="attr">git:</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">https://gitee.com/superAliang/spring-cloud-config-demo.git</span> <span class="comment"># giteeä¸Šé¡¹ç›®çš„åœ°å€ï¼Œå³è¿œç¨‹åº“åœ°å€ï¼Œå…¬å¼€çš„ä»“åº“ä¸éœ€è¦ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">          <span class="comment"># username: ç”¨æˆ·å</span></span><br><span class="line">          <span class="comment"># password: å¯†ç </span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span> <span class="comment"># æŒ‡å®šEurekaåœ°å€ï¼Œç”¨äºå°†configè¿™ä¸ªæœåŠ¡æ³¨å†Œåˆ°Eureka</span></span><br></pre></td></tr></table></figure><h4 id="542-å¯åŠ¨ç±»"><a class="markdownIt-Anchor" href="#542-å¯åŠ¨ç±»"></a> 5.4.2ã€å¯åŠ¨ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableConfigServer</span> <span class="comment">// å¼€å¯é…ç½®æœåŠ¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringCloud_Config_12000_Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringCloud_Config_12000_Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="55-æµ‹è¯•è®¿é—®è¿œç¨‹é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#55-æµ‹è¯•è®¿é—®è¿œç¨‹é…ç½®æ–‡ä»¶"></a> 5.5ã€æµ‹è¯•è®¿é—®è¿œç¨‹é…ç½®æ–‡ä»¶</h2><p>æµè§ˆå™¨è¾“å…¥<code>http://localhost:12000/user-dev.yml</code>ï¼ŒConfigæœåŠ¡æ¨¡å—å°±ä¼šä»Giteeä¸Šè·å–åˆ°æŒ‡å®šåç§°çš„æ–‡ä»¶ã€‚</p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220122231241633.png" alt="image-20220122231241633" /></p><p><strong>æŸ¥çœ‹Eurekaæ˜¯å¦æ³¨å†ŒæˆåŠŸ</strong></p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220122231612849.png" alt="image-20220122231612849" /></p><h2 id="56-ä½¿ç”¨è¿œç¨‹ä»“åº“çš„é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#56-ä½¿ç”¨è¿œç¨‹ä»“åº“çš„é…ç½®æ–‡ä»¶"></a> 5.6ã€ä½¿ç”¨è¿œç¨‹ä»“åº“çš„é…ç½®æ–‡ä»¶</h2><p>ä½¿ç”¨ä¹‹å‰ï¼Œéœ€è¦æ”¹é€ <code>User-Service</code>æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯<code>SpringCloud-User-8001</code>æ¨¡å—ã€‚</p><h4 id="561-å¼•å…¥ä¾èµ–"><a class="markdownIt-Anchor" href="#561-å¼•å…¥ä¾èµ–"></a> 5.6.1ã€å¼•å…¥ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- configç»„ä»¶ä¾èµ–ï¼Œå®ç°é…ç½®ä¸­å¿ƒè·å–é…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="562-é…ç½®æ–‡ä»¶æ”¹é€ "><a class="markdownIt-Anchor" href="#562-é…ç½®æ–‡ä»¶æ”¹é€ "></a> 5.6.2ã€é…ç½®æ–‡ä»¶æ”¹é€ </h4><p><strong>åˆ é™¤åŸæ¥çš„é…ç½®æ–‡ä»¶</strong></p><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶åä¸º<code>bootstrap.yml</code> çš„é…ç½®æ–‡ä»¶ï¼Œ<code>bootstrap.yml</code>çš„æ–‡ä»¶åçš„ç‰¹æ®Šåœ°æ–¹åœ¨äº</p><blockquote><p><code>bootstrap.yml</code>æ–‡ä»¶ä¹Ÿæ˜¯Spring Bootçš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œè€Œä¸”å…¶åŠ è½½çš„æ—¶é—´ç›¸æ¯”äº<code>application.yml</code>æ›´æ—©ã€‚</p><p><code>application.yml</code>å’Œ<code>bootstrap.yml</code>è™½ç„¶éƒ½æ˜¯Spring Bootçš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯å®šä½å´ä¸ç›¸åŒã€‚</p><ul><li><p><code>bootstrap.yml</code>å¯ä»¥ç†è§£æˆ<strong>ç³»ç»Ÿçº§åˆ«çš„ä¸€äº›å‚æ•°é…ç½®</strong>ï¼Œè¿™äº›<strong>å‚æ•°ä¸€èˆ¬æ˜¯ä¸ä¼šå˜åŠ¨çš„</strong>ã€‚</p></li><li><p><code>application.yml</code> å¯ä»¥ç”¨æ¥<strong>å®šä¹‰åº”ç”¨çº§åˆ«çš„å‚æ•°</strong>ï¼Œå¦‚æœæ­é… spring cloud confifig ä½¿ç”¨ï¼Œ<code>application.yml</code> é‡Œé¢<strong>å®šä¹‰çš„æ–‡ä»¶å¯ä»¥å®ç°åŠ¨æ€æ›¿æ¢</strong>ã€‚</p></li></ul><p>æ€»ç»“å°±æ˜¯ï¼Œ<code>bootstrap.yml</code>æ–‡ä»¶ç›¸å½“äºé¡¹ç›®å¯åŠ¨æ—¶çš„å¼•å¯¼æ–‡ä»¶ï¼Œå†…å®¹ç›¸å¯¹å›ºå®šã€‚<code>application.yml</code>æ–‡ä»¶æ˜¯å¾®æœåŠ¡çš„ä¸€äº›å¸¸è§„é…ç½®å‚æ•°ï¼Œå˜åŒ–æ¯”è¾ƒé¢‘ç¹ã€‚</p></blockquote><p><strong>bootstrap.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">config:</span> <span class="comment"># æ³¨æ„ï¼šä»“åº“ä¸­åˆ›å»ºçš„æ–‡ä»¶æ˜¯ï¼š user-dev.yml ,è¦æ ¹æ®è¿™ä¸ªæ–‡ä»¶åå»é…ç½®ä¸‹é¢çš„å‚æ•°</span></span><br><span class="line">      <span class="comment"># è¦ä¸ä»“åº“ä¸­çš„é…ç½®æ–‡ä»¶çš„applicationä¿æŒä¸€è‡´</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">user</span></span><br><span class="line">      <span class="comment"># è¦ä¸ä»“åº“ä¸­çš„é…ç½®æ–‡ä»¶çš„profileä¿æŒä¸€è‡´</span></span><br><span class="line">      <span class="attr">profile:</span> <span class="string">dev</span></span><br><span class="line">      <span class="comment"># è¦ä¸ä»“åº“ä¸­çš„é…ç½®æ–‡ä»¶æ‰€å±çš„ç‰ˆæœ¬ï¼ˆåˆ†æ”¯ï¼‰ä¸€æ ·</span></span><br><span class="line">      <span class="attr">label:</span> <span class="string">master</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="comment"># ä½¿ç”¨é…ç½®ä¸­å¿ƒ</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="comment"># é…ç½®ä¸­å¿ƒæœåŠ¡å</span></span><br><span class="line">        <span class="attr">service-id:</span> <span class="string">Config-Server</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span></span><br></pre></td></tr></table></figure><h2 id="57-æµ‹è¯•ä½¿ç”¨è¿œç¨‹é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#57-æµ‹è¯•ä½¿ç”¨è¿œç¨‹é…ç½®æ–‡ä»¶"></a> 5.7ã€æµ‹è¯•ä½¿ç”¨è¿œç¨‹é…ç½®æ–‡ä»¶</h2><p>å…³é—­Gatewayçš„è¿‡æ»¤å™¨ï¼Œé‡å¯æœåŠ¡ï¼Œæµ‹è¯•</p><blockquote><p>è¯¥è¯·æ±‚éœ€è¦ç»è¿‡çš„ä¸šåŠ¡é€»è¾‘ï¼š</p><ul><li><p>è¾“å…¥åœ°å€</p></li><li><p>è¯·æ±‚åˆ°è¾¾consumerçš„mapping</p></li><li><p>discoveryClientæ ¹æ®â€œUser-Serviceâ€è·å–çœŸå®çš„è¯·æ±‚ä¸»æœºåœ°å€</p></li><li><p>æ‹¼æ¥User-Serviceçš„è¯·æ±‚è·¯å¾„</p></li><li><p>RestTemplateå‘é€è¯·æ±‚åˆ°è¾¾User-Serviceçš„å¯¹åº”æ¥å£</p></li><li><p>å¯¹åº”æ¥å£å¤„ç†ä¸šåŠ¡å®Œæ¯•ï¼Œå°†ç»“æœå°è£…æˆCommonVoï¼Œå¹¶åºåˆ—åŒ–åè¿”å›åˆ°consumer</p></li><li><p>consumerå°†å“åº”å†…å®¹ååºåˆ—åŒ–ï¼Œå†å°è£…æˆCommonVoè¿”å›åˆ°å‰ç«¯</p></li><li><p>å‰ç«¯é¡µé¢æ˜¾ç¤ºè¯·æ±‚çš„å“åº”å†…å®¹</p></li></ul></blockquote><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220123002600514.png" alt="image-20220123002600514" /></p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡ä¸»è¦è®²è¿°SpringCloudä¸­configç»„ä»¶çš„ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œä»¥åŠåœ¨é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®å‚æ•°åˆ—ä¸¾</summary>
    
    
    
    <category term="åˆ†å¸ƒå¼æ²»ç†" scheme="https://blog.kakar.top/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B2%BB%E7%90%86/"/>
    
    
    <category term="Config" scheme="https://blog.kakar.top/tags/Config/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloudç»„ä»¶å­¦ä¹ ä¹‹Gateway</title>
    <link href="https://blog.kakar.top/posts/6004b1a3.html"/>
    <id>https://blog.kakar.top/posts/6004b1a3.html</id>
    <published>2023-06-16T13:43:53.000Z</published>
    <updated>2023-06-16T13:43:53.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="4-springcloud-netflix-gatewayçš„ä½¿ç”¨ä»¥åŠè®²è§£"><a class="markdownIt-Anchor" href="#4-springcloud-netflix-gatewayçš„ä½¿ç”¨ä»¥åŠè®²è§£"></a> 4ã€SpringCloud Netflix Gatewayçš„ä½¿ç”¨ä»¥åŠè®²è§£</h1><h2 id="41-ç®€ä»‹"><a class="markdownIt-Anchor" href="#41-ç®€ä»‹"></a> 4.1ã€ç®€ä»‹</h2><blockquote><ul><li><p>Spring Cloud Gatewayæ˜¯Springå®˜ç½‘åŸºäº<strong>Spring 5.0ã€ Spring Boot 2.0ã€Project Reactor</strong>ç­‰æŠ€æœ¯å¼€å‘çš„ç½‘å…³ æœåŠ¡ã€‚</p></li><li><p>Spring Cloud GatewayåŸºäºFilteré“¾æä¾›ç½‘å…³åŸºæœ¬åŠŸèƒ½ï¼š<strong>å®‰å…¨ã€ç›‘æ§ï¼åŸ‹ç‚¹ã€é™æµ</strong>ç­‰ã€‚</p></li><li><p>Spring Cloud Gatewayä¸ºå¾®æœåŠ¡æ¶æ„<strong>æä¾›ç®€å•ã€æœ‰æ•ˆä¸”ç»Ÿä¸€çš„APIè·¯ç”±ç®¡ç†æ–¹å¼</strong>ã€‚</p></li><li><p>Spring Cloud Gatewayæ˜¯<strong>æ›¿ä»£Netflflix Zuul</strong>çš„ä¸€å¥—è§£å†³æ–¹æ¡ˆã€‚</p></li><li><p>Spring Cloud Gatewayç»„ä»¶çš„<strong>æ ¸å¿ƒæ˜¯ä¸€ç³»åˆ—çš„è¿‡æ»¤å™¨</strong>ï¼Œé€šè¿‡è¿™äº›è¿‡æ»¤å™¨å¯ä»¥å°†å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚è½¬å‘åˆ°å¯¹åº”çš„å¾®æœåŠ¡ã€‚</p></li><li><p>Spring Cloud Gatewayæ˜¯åŠ è½½æ•´ä¸ªå¾®æœåŠ¡æœ€å‰æ²¿çš„é˜²ç«å¢™å’Œä»£ç†å™¨ï¼Œ<strong>éšè—å¾®æœåŠ¡èŠ‚ç‚¹Ipç«¯å£ä¿¡æ¯</strong>ï¼Œä»è€ŒåŠ å¼ºå®‰å…¨é˜²æŠ¤ã€‚</p></li><li><p>Spring Cloud Gatewayæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¾®æœåŠ¡ï¼Œæ‰€ä»¥éœ€è¦<strong>å°†å…¶ç»„æµ‹åˆ°EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ</strong>å»ã€‚</p></li></ul></blockquote><p>SpringCloud Gatewayçš„<strong>æ ¸å¿ƒåŠŸèƒ½</strong>æ˜¯ï¼š<strong>è¿‡æ»¤å’Œè·¯ç”±(è½¬å‘è¯·æ±‚)</strong></p><p>ä¸ç®¡æ˜¯æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚è¿˜æ˜¯æœåŠ¡å†…éƒ¨è°ƒç”¨ï¼Œä¸€åˆ‡å¯¹æœåŠ¡çš„è¯·æ±‚ï¼Œéƒ½å¯ä»¥ç»è¿‡ç½‘å…³ï¼Œç„¶åç½‘å…³æ¥å®ç°é‰´æƒã€åŠ¨æ€è·¯ç”±ç­‰æ“ä½œã€‚Gatewayæ˜¯æœåŠ¡çš„ç»Ÿä¸€å…¥å£ã€‚</p><h2 id="42-æ ¸å¿ƒæ¦‚å¿µ"><a class="markdownIt-Anchor" href="#42-æ ¸å¿ƒæ¦‚å¿µ"></a> 4.2ã€æ ¸å¿ƒæ¦‚å¿µ</h2><blockquote><ul><li><p>**è·¯ç”±ï¼ˆrouteï¼‰**è·¯ç”±ä¿¡æ¯çš„ç»„æˆï¼šç”±ä¸€ä¸ªIDã€ä¸€ä¸ªç›®çš„URLã€ä¸€ç»„æ–­è¨€å·¥å‚ã€ä¸€ç»„Filterç»„æˆã€‚å¦‚æœè·¯ç”±æ–­è¨€ä¸ºçœŸï¼Œè¯´æ˜è¯·æ±‚URLå’Œé…ç½®è·¯ç”±åŒ¹é…ã€‚</p></li><li><p>**æ–­è¨€ï¼ˆPredicateï¼‰**Spring Cloud Gatewayä¸­çš„æ–­è¨€å‡½æ•°è¾“å…¥ç±»å‹æ˜¯Spring 5.0æ¡†æ¶ä¸­çš„ ServerWebExchangeã€‚Spring Cloud Gatewayçš„æ–­è¨€å‡½æ•°å…è®¸å¼€å‘è€…å»å®šä¹‰åŒ¹é…æ¥è‡ªäºHTTP Requestä¸­çš„ä»»ä½•ä¿¡æ¯æ¯”å¦‚è¯·æ±‚å¤´å’Œå‚æ•°ã€‚ æ¯”å¦‚ï¼šå¿…é¡»æºå¸¦æŸä¸ªå‚æ•°æ‰èƒ½è®¿é—®æœåŠ¡Aã€‚</p></li><li><p>**è¿‡æ»¤å™¨ï¼ˆFilterï¼‰**ä¸€ä¸ªæ ‡å‡†çš„Spring WebFilterã€‚ Spring Cloud Gatewayä¸­çš„Filteråˆ†ä¸ºä¸¤ç§ç±»å‹çš„Filterï¼Œåˆ†åˆ«æ˜¯Gateway Filterï¼ˆå±€éƒ¨ï¼‰å’ŒGlobal Filterï¼ˆå…¨å±€ï¼‰ã€‚è¿‡æ»¤å™¨Filterå°†ä¼šå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œä¿®æ”¹å¤„ç†ã€‚æ¯”å¦‚ï¼šå¯¹æ‰€æœ‰çš„è¯·æ±‚æ·»åŠ è¯·æ±‚å¤´ï¼Œå¯¹æ‰€æœ‰çš„è¯·æ±‚è·¯å¾„åšæˆªå–æ“ä½œã€‚</p></li></ul></blockquote><h2 id="43-gatewayçš„ä½¿ç”¨"><a class="markdownIt-Anchor" href="#43-gatewayçš„ä½¿ç”¨"></a> 4.3ã€Gatewayçš„ä½¿ç”¨</h2><h4 id="431-åˆ›å»ºå·¥ç¨‹æ¨¡å—"><a class="markdownIt-Anchor" href="#431-åˆ›å»ºå·¥ç¨‹æ¨¡å—"></a> 4.3.1ã€åˆ›å»ºå·¥ç¨‹æ¨¡å—</h4><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Gatewayä¾èµ–åŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--Eurekaä¾èµ–åŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="432-ç¼–å†™å¯åŠ¨ç±»"><a class="markdownIt-Anchor" href="#432-ç¼–å†™å¯åŠ¨ç±»"></a> 4.3.2ã€ç¼–å†™å¯åŠ¨ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span> <span class="comment">// å¼€å¯eurekaçš„æœåŠ¡å‘ç°</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringCloud_Gateway_10010_Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringCloud_Gateway_10010_Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="433-ç¼–å†™é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#433-ç¼–å†™é…ç½®æ–‡ä»¶"></a> 4.3.3ã€ç¼–å†™é…ç½®æ–‡ä»¶</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10010</span> <span class="comment"># è®¾ç½®ç«¯å£</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">api-gateway</span> <span class="comment"># è®¾ç½®æœåŠ¡åç§°</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service-gateway</span>  <span class="comment"># è·¯ç”±æœåŠ¡çš„idï¼Œéšä¾¿èµ·</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">http://127.0.0.1:8001</span> <span class="comment"># å°†ç¬¦åˆæ–­è¨€çš„è¯·æ±‚ï¼Œè½¬å‘åˆ°è¿™ä¸ªåœ°å€</span></span><br><span class="line">          <span class="attr">predicates:</span> <span class="comment"># æŒ‡å®šæ–­è¨€çš„è§„åˆ™ï¼Œå³é…ç½®æ˜ å°„è·¯å¾„</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/user/**</span>  <span class="comment"># æ–­è¨€çš„è§„åˆ™ï¼Œ</span></span><br><span class="line">            <span class="comment"># å¦‚æœè¯·æ±‚åœ°å€ä¸º http://127.0.0.1:10010/user/queryById/1 ï¼Œåˆ™ç¬¦åˆæ–­è¨€è§„åˆ™ï¼Œè¿™ä¸ªè¯·æ±‚å°±ä¼šè¢«è½¬å‘åˆ°uriæŒ‡å®šçš„æœåŠ¡åœ°å€ http://127.0.0.1:8001/user/queryById/1</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span> <span class="comment">#æŒ‡å®šeurekaåœ°å€</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span>  <span class="comment"># ä¼˜å…ˆä½¿ç”¨ipåœ°å€</span></span><br></pre></td></tr></table></figure><h4 id="434-å¯åŠ¨æœåŠ¡"><a class="markdownIt-Anchor" href="#434-å¯åŠ¨æœåŠ¡"></a> 4.3.4ã€å¯åŠ¨æœåŠ¡</h4><h4 id="435-æµ‹è¯•"><a class="markdownIt-Anchor" href="#435-æµ‹è¯•"></a> 4.3.5ã€æµ‹è¯•</h4><p>è¾“å…¥http://127.0.0.1:10010/user/queryById/1ï¼Œ<strong>è¾“å‡ºç»“æœ</strong></p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220121174413779.png" alt="image-20220121174413779" /></p><p>æŸ¥çœ‹æ§åˆ¶å°æ‰“å°æƒ…å†µï¼Œ<strong>çœ‹Gatewayç»„ä»¶æ˜¯å¦å°†è¯·æ±‚è½¬å‘åˆ°äº†8001æœåŠ¡</strong></p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220121174546836.png" alt="image-20220121174546836" /></p><p><strong>8001æ§åˆ¶å°æ˜¾ç¤ºï¼Œæ–¹æ³•è¢«æ‰§è¡Œäº†</strong></p><h4 id="436-é¢å‘æœåŠ¡çš„è·¯ç”±"><a class="markdownIt-Anchor" href="#436-é¢å‘æœåŠ¡çš„è·¯ç”±"></a> 4.3.6ã€é¢å‘æœåŠ¡çš„è·¯ç”±</h4><p>åœ¨ä¸Šé¢çš„æ¡ˆä¾‹ä¸­ï¼Œè·¯ç”±è§„åˆ™å¯¹åº”çš„<strong>æœåŠ¡åœ°å€æ˜¯å†™æ­»çš„</strong>ï¼Œå³URIçš„å€¼ï¼Œå¦‚æœåœ¨é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œè¿™æ ·çš„åšæ³•æ˜¾ç„¶æ˜¯<strong>ä¸åˆç†çš„</strong>ã€‚</p><p>åº”è¯¥æ˜¯<strong>æ ¹æ®æœåŠ¡åç§°</strong>ï¼Œå»Eurekaæ³¨å†Œä¸­å¿ƒæŸ¥æ‰¾è¯¥åç§°<strong>å¯¹åº”çš„æ‰€æœ‰å®ä¾‹åˆ—è¡¨</strong>ï¼Œç„¶åè¿›è¡Œ<strong>åŠ¨æ€è·¯ç”±</strong>ã€‚</p><p>æ‰€ä»¥Gatewayçš„å¤„ç†æ˜¯ï¼Œå°†URIçš„å€¼ï¼ŒæŒ‡å®šä¸ºæœåŠ¡åç§°ï¼Œå¹¶åœ¨æœåŠ¡åç§°å‰ç”¨lbä»£æ›¿http</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">api-gateway</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service-gateway</span></span><br><span class="line">          <span class="comment"># uri: http://127.0.0.1:8001 # å°†ç¬¦åˆæ–­è¨€çš„è¯·æ±‚ï¼Œè½¬å‘åˆ°è¿™ä¸ªåœ°å€</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://User-Service</span> <span class="comment"># å°†ä¸Šé¢çš„åœ°å€ï¼Œæ›´æ¢æˆæœåŠ¡åç§°</span></span><br><span class="line">          <span class="attr">predicates:</span> </span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/user/**</span></span><br></pre></td></tr></table></figure><blockquote><p>æ›¿ä»£<code>http</code>çš„<code>lb</code>è¡¨ç¤º<code>LoadBalancerClient</code>çš„æ„æ€ï¼Œgatewayä¼šå°†åé¢çš„<code>User-Service</code>é€šè¿‡Eurekaè§£æä¸ºå®é™…çš„ä¸»æœºå’Œç«¯å£ï¼Œå¹¶è¿›è¡ŒRibbonè´Ÿè½½å‡è¡¡å¤„ç†ã€‚</p></blockquote><p>é…ç½®å¥½ä¹‹åï¼Œé‡å¯æœåŠ¡ï¼Œå†æ¬¡æµ‹è¯•åˆšæ‰çš„è¯·æ±‚åœ°å€ï¼Œ<a href="http://127.0.0.1:10010/user/queryById/1%EF%BC%8C%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%87%BA%E4%BF%A1%E6%81%AF">http://127.0.0.1:10010/user/queryById/1ï¼Œæ§åˆ¶å°è¾“å‡ºä¿¡æ¯</a></p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220121181925761.png" alt="image-20220121181925761" /></p><p>GatewayæœåŠ¡çš„æ‰“å°ä¿¡æ¯ä¸­æ˜¾ç¤ºé‡‡å–äº†Ribbonï¼Œè¡¨ç¤ºé…ç½®æˆåŠŸäº†ã€‚</p><h2 id="44-è·¯ç”±å‰ç¼€"><a class="markdownIt-Anchor" href="#44-è·¯ç”±å‰ç¼€"></a> 4.4ã€è·¯ç”±å‰ç¼€</h2><blockquote><p>å®¢æˆ·ç«¯çš„è¯·æ±‚åœ°å€ä¸å¾®æœåŠ¡çš„æœåŠ¡åœ°å€å¦‚æœä¸ä¸€è‡´çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡é…ç½®è·¯å¾„è¿‡æ»¤å™¨å®ç°è·¯å¾„å‰ç¼€çš„æ·»åŠ å’Œå»é™¤ã€‚</p></blockquote><p><strong>æ·»åŠ å‰ç¼€ä¸¾ä¾‹ï¼š</strong></p><p><a href="http://127.0.0.1:10010/8">http://127.0.0.1:10010/8</a>  - &gt; <a href="http://127.0.0.1:8001/user/queryById/8">http://127.0.0.1:8001/user/queryById/8</a>   æ·»åŠ è·¯å¾„å‰ç¼€ä¸º/user/queryById</p><p><strong>å»é™¤å‰ç¼€ä¸¾ä¾‹ï¼š</strong></p><p><a href="http://127.0.0.1:10010/api/user/queryById/8">http://127.0.0.1:10010/api/user/queryById/8</a>  - &gt; <a href="http://127.0.0.1:8001/user/queryById/8">http://127.0.0.1:8001/user/queryById/8</a>   å»é™¤çš„è·¯å¾„å‰ç¼€ä¸º/api</p><p><strong>è¿™æ ·çš„å¤„ç†ï¼Œä¹Ÿå¯ä»¥æœ‰æ•ˆæå‡è¯·æ±‚çš„å®‰å…¨æ€§ã€‚</strong></p><h4 id="441-æ·»åŠ å‰ç¼€çš„é…ç½®"><a class="markdownIt-Anchor" href="#441-æ·»åŠ å‰ç¼€çš„é…ç½®"></a> 4.4.1ã€æ·»åŠ å‰ç¼€çš„é…ç½®</h4><p><strong>æ”¹é€ åŸæ¥çš„é…ç½®</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">api-Gateway</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service-gateway</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://User-Service</span></span><br><span class="line">          <span class="attr">predicates:</span> </span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/**</span>  <span class="comment"># å°†è¿™é‡Œçš„userå»æ‰ï¼Œæ–¹ä¾¿æµ‹è¯•</span></span><br><span class="line">          <span class="attr">filters:</span> </span><br><span class="line">            <span class="bullet">-</span> <span class="string">PrefixPath=/user</span> <span class="comment"># æ·»åŠ è¯·æ±‚è·¯å¾„çš„å‰ç¼€</span></span><br></pre></td></tr></table></figure><h4 id="442-æµ‹è¯•æ·»åŠ å‰ç¼€çš„æ•ˆæœ"><a class="markdownIt-Anchor" href="#442-æµ‹è¯•æ·»åŠ å‰ç¼€çš„æ•ˆæœ"></a> 4.4.2ã€æµ‹è¯•æ·»åŠ å‰ç¼€çš„æ•ˆæœ</h4><p>è¯·æ±‚ä¸­å¹¶æ²¡æœ‰åŠ userè¿™ä¸ªè·¯å¾„ï¼Œä»ç„¶å¯ä»¥æ­£å¸¸è®¿é—®ã€‚å› ä¸ºGatewayåœ¨åå°æŒ‰ç…§é…ç½®çš„å‰ç¼€è‡ªåŠ¨æ‹¼æ¥äº†ä¸Šå»ï¼Œå¹¶è°ƒç”¨çœŸå®çš„è¯·æ±‚åœ°å€è·å–ç»“æœã€‚</p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220121183606436.png" alt="image-20220121183606436" /></p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220121183734211.png" alt="image-20220121183734211" /></p><h4 id="443-å®ç°å»é™¤å‰ç¼€çš„é…ç½®"><a class="markdownIt-Anchor" href="#443-å®ç°å»é™¤å‰ç¼€çš„é…ç½®"></a> 4.4.3ã€å®ç°å»é™¤å‰ç¼€çš„é…ç½®</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">api-gateway</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service-gateway</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://User-Service</span></span><br><span class="line">          <span class="attr">predicates:</span> </span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/**</span> <span class="comment"># æ­¤å¤„æŒ‡å®šæ‹¦æˆªè·¯å¾„</span></span><br><span class="line">          <span class="attr">filters:</span> </span><br><span class="line">            <span class="bullet">-</span> <span class="string">StripPrefix=1</span> <span class="comment"># æ­¤å¤„æŒ‡å®šå»é™¤å‰ç¼€çš„æ®µæ•°</span></span><br></pre></td></tr></table></figure><blockquote><p><code>StripPrefix</code>è¿™ä¸ªå–å€¼ä¸º1 è¡¨ç¤ºè¯·æ±‚åœ°å€ä¸º<code>http://127.0.0.1:10010/user/queryById/1</code>æ—¶ï¼Œè¯¥è¯·æ±‚è·¯å¾„å»æ‰<code>/user</code>è¿™ä¸€æ®µï¼Œå¦‚æœä¸º2ï¼Œåˆ™å»æ‰<code>/user/queryById</code>è¿™ä¸¤æ®µï¼Œä»¥æ­¤ç±»æ¨</p></blockquote><h4 id="444-æµ‹è¯•å»é™¤å‰ç¼€çš„æ•ˆæœ"><a class="markdownIt-Anchor" href="#444-æµ‹è¯•å»é™¤å‰ç¼€çš„æ•ˆæœ"></a> 4.4.4ã€æµ‹è¯•å»é™¤å‰ç¼€çš„æ•ˆæœ</h4><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220121203145540.png" alt="image-20220121203145540" /></p><blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œè¯·æ±‚çš„çœŸå®åœ°å€åº”è¯¥æ˜¯ï¼š<code>http://127.0.0.1:10010/user/queryById/1</code>,ä½†è¾“å…¥çš„æ˜¯<code>http://127.0.0.1:10010/test/user/queryById/1</code>ä¾ç„¶å¯ä»¥æ­£ç¡®è®¿é—®åˆ°ï¼Œå°±æ˜¯å› ä¸ºå»é™¤å‰ç¼€ç”Ÿæ•ˆçš„ç¼˜æ•…ã€‚</p></blockquote><h2 id="45-è¿‡æ»¤å™¨"><a class="markdownIt-Anchor" href="#45-è¿‡æ»¤å™¨"></a> 4.5ã€è¿‡æ»¤å™¨</h2><h4 id="451-è¿‡æ»¤å™¨çš„ä»‹ç»"><a class="markdownIt-Anchor" href="#451-è¿‡æ»¤å™¨çš„ä»‹ç»"></a> 4.5.1ã€è¿‡æ»¤å™¨çš„ä»‹ç»</h4><blockquote><p>Gatewayä½œä¸ºç½‘å…³ç»„ä»¶å…¶ä¸­ä¸€ä¸ªé‡è¦åŠŸèƒ½å°±æ˜¯å®ç°è¯·æ±‚çš„é‰´æƒï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯éœ€è¦é€šè¿‡Gatewayçš„è¿‡æ»¤å™¨æ¥å®ç°ï¼Œè¿‡æ»¤å™¨ä¹Ÿå¯ä»¥å®ç°è·¯ç”±å‰ç¼€ï¼Œæ˜¯Gatewayçš„æ ¸å¿ƒåŠŸèƒ½ã€‚</p></blockquote><p>Gateway<strong>è‡ªå¸¦å‡ åç§è¿‡æ»¤å™¨</strong>ï¼Œå¸¸è§çš„æœ‰ï¼š</p><ul><li><code>AddRequestHeader</code> : å¯¹åŒ¹é…ä¸Šçš„è¯·æ±‚åŠ ä¸ŠHeader</li><li><code>AddRequestParameters</code> :å¯¹åŒ¹é…ä¸Šçš„è¯·æ±‚è·¯ç”±æ·»åŠ å‚æ•°</li><li><code>AddResponseHeader</code> :å¯¹ä»ç½‘å…³è¿”å›çš„å“åº”æ·»åŠ Header</li><li><code>StripPrefifix</code>:å¯¹åŒ¹é…ä¸Šçš„è¯·æ±‚è·¯å¾„å»é™¤å‰ç¼€</li></ul><p>è¿›å…¥GatewayFilterFactoryæ¥å£ï¼Œå¯ä»¥çœ‹åˆ°å…¶å®ƒæš‚æœªä»‹ç»çš„è¿‡æ»¤å™¨</p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220121205212019.png" alt="image-20220121205212019" /></p><p>è¿™äº›è¿‡æ»¤å™¨åœ¨é…ç½®æ–‡ä»¶ä¸­çš„ä½¿ç”¨æ˜¯ï¼Œå°†å»æ‰åé¢çš„GatewayFilterFactoryä¹‹åçš„ç±»åç§°ä½œä¸ºå‚æ•°åç§°ã€‚</p><p><strong>å…·ä½“å¯ä»¥å‚è€ƒPrefixPathä»¥åŠStripPrefixè¿™ä¸¤ä¸ªå‚æ•°åœ¨é…ç½®æ–‡ä»¶ä»¥åŠå…¨ç±»åä¸Šçš„åŒºåˆ«ã€‚</strong></p><h4 id="452-è¿‡æ»¤å™¨ç±»å‹"><a class="markdownIt-Anchor" href="#452-è¿‡æ»¤å™¨ç±»å‹"></a> 4.5.2ã€è¿‡æ»¤å™¨ç±»å‹</h4><p>è¿‡æ»¤å™¨åˆ†ä¸ºå±€éƒ¨è¿‡æ»¤å™¨ä»¥åŠå…¨å±€è¿‡æ»¤å™¨</p><p><strong>å±€éƒ¨è¿‡æ»¤å™¨ï¼š</strong></p><blockquote><p>é€šè¿‡spring.cloud.gateway.routes.filtersé…ç½®åœ¨å…·ä½“è·¯ç”±ä¸‹ï¼Œåªä½œç”¨åœ¨å½“å‰è·¯ç”±ä¸Š</p><p>é€šè¿‡spring.cloud.gateway.default-filtersé…ç½®ï¼Œä¼šå¯¹æ‰€æœ‰è·¯ç”±ç”Ÿæ•ˆï¼Œæ—¢æ˜¯å±€éƒ¨è¿‡æ»¤å™¨ï¼Œä¹Ÿæ˜¯å…¨å±€è¿‡æ»¤å™¨ã€‚ä½†è¿™äº›è¿‡æ»¤å™¨çš„å®ç°éƒ½æ˜¯è¦å®ç°GatewayFilterFactoryæ¥å£ã€‚</p></blockquote><p><strong>å…¨å±€è¿‡æ»¤å™¨ï¼š</strong></p><blockquote><p>ä¸éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œä½œç”¨åœ¨æ‰€æœ‰çš„è·¯ç”±ä¸Šï¼Œå®ç°GlobalFilteræ¥å£å³å¯ã€‚åé¢ä¼šè¯¦ç»†è®²è§£å®ç°æ–¹å¼ã€‚</p></blockquote><h4 id="453-è¿‡æ»¤å™¨çš„ç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#453-è¿‡æ»¤å™¨çš„ç”Ÿå‘½å‘¨æœŸ"></a> 4.5.3ã€è¿‡æ»¤å™¨çš„ç”Ÿå‘½å‘¨æœŸ</h4><blockquote><p>Spring Cloud Gateway çš„ Filter çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿç±»ä¼¼Spring MVCçš„æ‹¦æˆªå™¨æœ‰ä¸¤ä¸ªï¼šâ€œpreâ€ å’Œ â€œpostâ€ã€‚â€œpreâ€å’Œ â€œpostâ€ åˆ†åˆ«ä¼šåœ¨è¯·æ±‚è¢«æ‰§è¡Œå‰è°ƒç”¨å’Œè¢«æ‰§è¡Œåè°ƒç”¨</p></blockquote><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220121212900233.png" alt="image-20220121212900233" /></p><p>è¿™é‡Œçš„ pre å’Œ post å¯ä»¥é€šè¿‡è¿‡æ»¤å™¨çš„ GatewayFilterChain æ‰§è¡Œfifilteræ–¹æ³•å‰åæ¥å®ç°</p><p><strong>å¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼š</strong></p><blockquote><p>è¯·æ±‚é‰´æƒï¼šä¸€èˆ¬ <code>GatewayFilterChain</code> æ‰§è¡Œ<code>fifilter</code>æ–¹æ³•å‰ï¼Œå¦‚æœå‘ç°æ²¡æœ‰è®¿é—®æƒé™ï¼Œç›´æ¥å°±è¿”å›ç©ºã€‚</p><p>å¼‚å¸¸å¤„ç†ï¼šä¸€èˆ¬ <code>GatewayFilterChain</code>æ‰§è¡Œ<code>fifilter</code>æ–¹æ³•åï¼Œè®°å½•å¼‚å¸¸å¹¶è¿”å›ã€‚</p><p>æœåŠ¡è°ƒç”¨æ—¶é•¿ç»Ÿè®¡ï¼š <code>GatewayFilterChain</code> æ‰§è¡Œ<code>fifilter</code>æ–¹æ³•å‰åæ ¹æ®æ—¶é—´ç»Ÿè®¡ã€‚</p></blockquote><h4 id="454-é»˜è®¤è¿‡æ»¤å™¨"><a class="markdownIt-Anchor" href="#454-é»˜è®¤è¿‡æ»¤å™¨"></a> 4.5.4ã€é»˜è®¤è¿‡æ»¤å™¨</h4><p>é»˜è®¤è¿‡æ»¤å™¨ä¹Ÿæ˜¯ä¸€ç§å±€éƒ¨è¿‡æ»¤å™¨ï¼Œåªä¸è¿‡æ‰€æœ‰è·¯ç”±éƒ½ä¼šèµ·ä½œç”¨ã€‚</p><p><strong>é…ç½®é»˜è®¤è¿‡æ»¤å™¨</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">api-gateway</span> <span class="comment"># è®¾ç½®æœåŠ¡åç§°</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service-gateway</span>  <span class="comment"># è·¯ç”±æœåŠ¡çš„idï¼Œéšä¾¿èµ·</span></span><br><span class="line">          <span class="comment"># uri: http://127.0.0.1:8001 # å°†ç¬¦åˆæ–­è¨€çš„è¯·æ±‚ï¼Œè½¬å‘åˆ°è¿™ä¸ªåœ°å€</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://User-Service</span> <span class="comment"># å°†ç¬¦åˆæ–­è¨€çš„è¯·æ±‚ï¼Œè½¬å‘åˆ°è¿™ä¸ªåœ°å€</span></span><br><span class="line">          <span class="attr">predicates:</span> <span class="comment"># æŒ‡å®šæ–­è¨€çš„è§„åˆ™ï¼Œå³é…ç½®æ˜ å°„è·¯å¾„</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/**</span>  <span class="comment"># æ–­è¨€çš„è§„åˆ™ï¼Œ</span></span><br><span class="line">            <span class="comment"># å¦‚æœè¯·æ±‚åœ°å€ä¸º http://127.0.0.1:10010/user/queryById/1 ï¼Œåˆ™ç¬¦åˆæ–­è¨€è§„åˆ™ï¼Œè¿™ä¸ªè¯·æ±‚å°±ä¼šè¢«è½¬å‘åˆ°uriæŒ‡å®šçš„æœåŠ¡åœ°å€ http://127.0.0.1:8001/user/queryById/1</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">StripPrefix=1</span> <span class="comment"># è¿™ä¸ªå–å€¼ä¸º1 è¡¨ç¤ºè¯·æ±‚åœ°å€ä¸ºhttp://127.0.0.1:10010/user/queryById/1æ˜¯ï¼Œå»æ‰/userè¿™ä¸€æ®µï¼Œå¦‚æœä¸º2ï¼Œåˆ™å»æ‰/user/queryByIdè¿™ä¸¤æ®µï¼Œä»¥æ­¤ç±»æ¨</span></span><br><span class="line">      <span class="attr">default-filters:</span>  <span class="comment"># é»˜è®¤è¿‡æ»¤å™¨ï¼Œå¯¹æ‰€æœ‰è·¯ç”±éƒ½æœ‰æ•ˆ</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">AddResponseHeader=zidingyijian,zidingyizhi</span> <span class="comment"># é…ç½®æ·»åŠ å“åº”å¤´å†…å®¹ï¼Œé€—å·å‰æ˜¯é”®ï¼Œé€—å·åæ˜¯å€¼</span></span><br></pre></td></tr></table></figure><blockquote><p><code>default-filters</code> ç”¨äºæŒ‡å®šè¿‡æ»¤å™¨ï¼Œ<code>AddResponseHeader</code>æ˜¯æ·»åŠ å“åº”å¤´ä¿¡æ¯ã€‚</p></blockquote><p><strong>æµ‹è¯•æ•ˆæœ</strong></p><p>å»é™¤äº†å‰ç¼€ï¼Œæ·»åŠ äº†å“åº”å¤´ã€‚</p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220121211948756.png" alt="image-20220121211948756" /></p><h4 id="455-è‡ªå®šä¹‰å±€éƒ¨è¿‡æ»¤å™¨"><a class="markdownIt-Anchor" href="#455-è‡ªå®šä¹‰å±€éƒ¨è¿‡æ»¤å™¨"></a> 4.5.5ã€è‡ªå®šä¹‰å±€éƒ¨è¿‡æ»¤å™¨</h4><p>å®ç°ä¸€ä¸ªè‡ªå®šä¹‰å±€éƒ¨è¿‡æ»¤å™¨ï¼Œæ ¹æ®æ¡ˆä¾‹å­¦ä¹ </p><p><strong>éœ€æ±‚ï¼š</strong></p><blockquote><p>åœ¨è¿‡æ»¤å™¨ï¼ˆ<strong>MyParamGatewayFilterFactory</strong>ï¼‰ ä¸­å°† <code>http://127.0.0.1:10010/api/user/queryById/1?name=zhangsan&amp;name=lisi</code>ä¸­çš„å‚æ•°nameçš„å€¼ï¼Œè·å–åˆ°å¹¶è¾“å‡ºåˆ°æ§åˆ¶å°ï¼›</p><p>**æ³¨æ„ï¼š**å‚æ•°åæ˜¯å¯å˜çš„ï¼Œä¹Ÿå°±æ˜¯ä¸ä¸€å®šæ¯æ¬¡éƒ½æ˜¯nameï¼Œè¿™éœ€è¦é€šè¿‡é…ç½®è¿‡æ»¤å™¨çš„æ—¶å€™é…ç½®å‚æ•°åã€‚</p><p>åœ¨application.ymlä¸­å¯¹æŸä¸ªè·¯ç”±é…ç½®è¿‡æ»¤å™¨ï¼Œè¯¥è¿‡æ»¤å™¨å¯ä»¥åœ¨æ§åˆ¶å°è¾“å‡ºé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šåç§°çš„è¯·æ±‚å‚æ•°çš„å€¼ã€‚</p></blockquote><h5 id="4551-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#4551-ä¿®æ”¹é…ç½®æ–‡ä»¶"></a> 4.5.5.1ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">api-gateway</span> <span class="comment"># è®¾ç½®æœåŠ¡åç§°</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service-gateway</span>  <span class="comment"># è·¯ç”±æœåŠ¡çš„idï¼Œéšä¾¿èµ·</span></span><br><span class="line">          <span class="comment"># uri: http://127.0.0.1:8001 # å°†ç¬¦åˆæ–­è¨€çš„è¯·æ±‚ï¼Œè½¬å‘åˆ°è¿™ä¸ªåœ°å€</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://User-Service</span> <span class="comment"># å°†ç¬¦åˆæ–­è¨€çš„è¯·æ±‚ï¼Œè½¬å‘åˆ°è¿™ä¸ªåœ°å€</span></span><br><span class="line">          <span class="attr">predicates:</span> <span class="comment"># æŒ‡å®šæ–­è¨€çš„è§„åˆ™ï¼Œå³é…ç½®æ˜ å°„è·¯å¾„</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/**</span>  <span class="comment"># æ–­è¨€çš„è§„åˆ™ï¼Œ</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">MyParam=name</span>  <span class="comment"># MyParamæ˜¯è‡ªå®šä¹‰çš„å±€éƒ¨è¿‡æ»¤å™¨ï¼Œå…¨ç§°æ˜¯MyParamGatewayFilterFactoryï¼Œå®ƒçš„ä½œç”¨æ˜¯è·å–è¯·æ±‚ä¸­æŒ‡å®šå‚æ•°åçš„å€¼ï¼Œå¹¶è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œè¿™ä¸ªæŒ‡å®šå‚æ•°åå°±æ˜¯åé¢çš„name</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">StripPrefix=1</span> <span class="comment"># è¿™ä¸ªå–å€¼ä¸º1 è¡¨ç¤ºè¯·æ±‚åœ°å€ä¸ºhttp://127.0.0.1:10010/user/queryById/1æ˜¯ï¼Œå»æ‰/userè¿™ä¸€æ®µï¼Œå¦‚æœä¸º2ï¼Œåˆ™å»æ‰/user/queryByIdè¿™ä¸¤æ®µï¼Œä»¥æ­¤ç±»æ¨</span></span><br></pre></td></tr></table></figure><p><code>filters</code>ä¸‹æ·»åŠ äº†<code>MyParam=name</code>, <code>MyParam</code>æ˜¯<code>MyParamGatewayFilterFactory</code>ç±»çš„åå­—ã€‚</p><h5 id="4552-ç¼–å†™è‡ªå®šä¹‰è¿‡æ»¤å™¨ç±»"><a class="markdownIt-Anchor" href="#4552-ç¼–å†™è‡ªå®šä¹‰è¿‡æ»¤å™¨ç±»"></a> 4.5.5.2ã€ç¼–å†™è‡ªå®šä¹‰è¿‡æ»¤å™¨ç±»</h5><p>è¿™éƒ¨åˆ†å†…å®¹å¤šï¼Œå¯ä»¥ç€é‡çœ‹æ³¨é‡Šã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1ã€è‡ªå®šä¹‰å±€éƒ¨è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment"> *      æ³¨æ„ï¼šè¿™é‡ŒæŒ‰ç…§éœ€æ±‚æ¥çœ‹ï¼Œé…ç½®æ–‡ä»¶ä¸­åªæŒ‡å®šäº†å•ä¸ªå€¼nameï¼Œæ‰€ä»¥è‡ªå®šä¹‰çš„è¿‡æ»¤å™¨ç»§æ‰¿AbstractGatewayFilterFactoryå°±å¯ä»¥äº†</span></span><br><span class="line"><span class="comment"> *                å¦‚æœåˆ¶å®šäº†é”®å€¼å¯¹ï¼Œé‚£ä¹ˆéœ€è¦ç»§æ‰¿AbstractNameValueGatewayFilterFactoryï¼Œé”®å€¼å¯¹å¹¶ä¸é€‚ç”¨å½“å‰çš„éœ€æ±‚ï¼Œæ‰€ä»¥ä¸é‡‡ç”¨</span></span><br><span class="line"><span class="comment"> *      AbstractGatewayFilterFactoryçš„æ³›å‹éœ€è¦æŒ‡å®šä¸ºè¿‡æ»¤å™¨å†…çš„Configç±»ï¼Œå¯ä»¥å‚è€ƒå…¶å®ƒè¿‡æ»¤å™¨çš„å®ç°æ–¹å¼ï¼Œæ¨¡ä»¿ç€ç¼–ç </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyParamGatewayFilterFactory</span> <span class="keyword">extends</span> <span class="title class_">AbstractGatewayFilterFactory</span>&lt;MyParamGatewayFilterFactory.Config&gt; &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PARAM_NAME</span> <span class="operator">=</span> <span class="string">&quot;name&quot;</span>;  <span class="comment">//2ã€æå–å­—ç¬¦ä¸²ï¼Œæ–¹ä¾¿é˜…è¯»ç®¡ç†</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyParamGatewayFilterFactory</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="built_in">super</span>(Config.class); <span class="comment">// 3ã€è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•ï¼Œå°†å†…éƒ¨ç±»ä½œä¸ºå€¼ä¼ é€’ï¼Œç”¨äºå°è£…æ ¹æ®é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„å‚æ•°åè·å–åˆ°çš„å‚æ•°å€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// 4ã€å¯¹è¯·æ±‚ä¸­è·å–çš„å€¼çš„å¤„ç†ï¼Œå¤šä¸ªå€¼çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">shortcutFieldOrder</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Arrays.asList(PARAM_NAME); <span class="comment">// 4.1ã€å¯¹åº”Configç±»ä¸­å˜é‡åï¼Œç”¨äºå°è£…å‚æ•°å€¼ï¼Œå› ä¸ºéœ€æ±‚æ˜¯å•ä¸ªå€¼ï¼Œå°±ä½¿ç”¨å•ä¸ªå­—ç¬¦ä¸²å°±è¡Œï¼Œå¦‚æœæ˜¯é”®å€¼å¯¹ï¼Œ</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 5ã€å®ç°AbstractGatewayFilterFactoryçš„æŠ½è±¡æ–¹æ³•ï¼Œç¼–å†™è·å–åˆ°å‚æ•°å€¼ä¹‹åçš„ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line"><span class="comment">     * è¿”å›å€¼ç±»å‹GatewayFilteræ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œå®ƒæ‰€æ¥å—çš„å‚æ•°æ˜¯ServerWebExchangeå’ŒGatewayFilterChainï¼Œæ‰€ä»¥å¯¹äºå‡½æ•°å¼æ¥å£è¿™ç§è¿”å›å€¼ï¼Œéœ€è¦å°†å®ƒå®ä¾‹åŒ–å‡ºæ¥ï¼Œè¿™é‡Œé‡‡ç”¨lambdaçš„æ–¹å¼å¤„ç†</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> config</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> GatewayFilter <span class="title function_">apply</span><span class="params">(MyParamGatewayFilterFactory.Config config)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ((exchange, chain) -&gt; &#123;</span><br><span class="line">            <span class="comment">// 6ã€æ­¤å¤„å¯ä»¥ç¼–å†™å‰ç½®è¿‡æ»¤å™¨é€»è¾‘ï¼Œæ­¤å¤„å¯ä»¥å»è·å–è¯·æ±‚ä¸­nameçš„å€¼</span></span><br><span class="line">            <span class="comment">//6.1ã€è·å–è¯·æ±‚å¯¹è±¡</span></span><br><span class="line">            <span class="type">ServerHttpRequest</span> <span class="variable">request</span> <span class="operator">=</span> exchange.getRequest();</span><br><span class="line">            <span class="comment">//6.2ã€åˆ¤æ–­è¯·æ±‚å¯¹è±¡çš„å‚æ•°keyä¸­ï¼Œæ˜¯å¦åŒ…å«name</span></span><br><span class="line">            <span class="keyword">if</span>(request.getQueryParams().containsKey(config.name))&#123;</span><br><span class="line">                <span class="comment">//6.3ã€å¦‚æœåŒ…å«,å°±è·å–è¿™ä¸ªå‚æ•°åå¯¹åº”çš„å€¼çš„é›†åˆï¼Œæ³¨æ„ï¼šè¿™é‡Œç±»å‹ä¸ºé›†åˆä¸»è¦æ˜¯å› ä¸ºå¯èƒ½æœ‰å¤šä¸ªå‚æ•°ååŒå</span></span><br><span class="line">                List&lt;String&gt; names = request.getQueryParams().get(config.name);</span><br><span class="line">                <span class="comment">//6.4ã€éå†è¿™ä¸ªå€¼çš„é›†åˆ</span></span><br><span class="line">                <span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;å±€éƒ¨è¿‡æ»¤å™¨è·å¾—å‚æ•°ï¼š&quot;</span>+config.name+<span class="string">&quot;=&quot;</span>+name); <span class="comment">//6.5ã€æ‰“å°å‡ºé”®å€¼å¯¹ï¼Œé”®ä¸ºå­—ç¬¦ä¸²name,å€¼ä¸ºè¯·æ±‚ä¸­æºå¸¦çš„</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> chain.filter(exchange); <span class="comment">//6.6ã€æ‰§è¡Œè¯·æ±‚ï¼Œå°†è¯·æ±‚æ”¾è¡Œ</span></span><br><span class="line">            <span class="comment">//6.7ã€æ­¤å¤„å¯ä»¥ç¼–å†™åç½®è¿‡æ»¤å™¨é€»è¾‘ï¼Œå½“å‰demoæœªåšå…¶å®ƒå¤„ç†</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="comment">// 7ã€éœ€è¦å®šä¹‰configç±»ï¼Œç”¨æ¥ä¸ºè¿‡æ»¤å™¨è·å–åˆ°è¯·æ±‚ä¸­çš„å‚æ•°æ—¶åšè¿›ä¸€æ­¥å°è£…</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Config</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String name; <span class="comment">// 7.1ã€ç”¨æ¥å¯¹åº”é…ç½®æ–‡ä»¶ä¸­MyParamè¿‡æ»¤å™¨æŒ‡å®šçš„å‚æ•°å</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> name;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4553-é‡å¯æœåŠ¡æµ‹è¯•"><a class="markdownIt-Anchor" href="#4553-é‡å¯æœåŠ¡æµ‹è¯•"></a> 4.5.5.3ã€é‡å¯æœåŠ¡æµ‹è¯•</h5><p><strong>å‰ç«¯è¾“å…¥åœ°å€ï¼š</strong></p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220122012117727.png" alt="image-20220122012117727" /></p><p><strong>åç«¯æ‰“å°ç»“æœï¼š</strong></p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220122012138466.png" alt="image-20220122012138466" /></p><h4 id="456-è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨"><a class="markdownIt-Anchor" href="#456-è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨"></a> 4.5.6ã€è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨</h4><p>å®ç°ä¸€ä¸ªè‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨ï¼Œæ ¹æ®æ¡ˆä¾‹å­¦ä¹ </p><p><strong>éœ€æ±‚ï¼š</strong></p><blockquote><p>ç¼–å†™å…¨å±€è¿‡æ»¤å™¨ï¼Œåœ¨è¿‡æ»¤å™¨ä¸­æ£€æŸ¥è¯·æ±‚ä¸­æ˜¯å¦æºå¸¦<strong>Token</strong>è¯·æ±‚å¤´ï¼Œå¦‚æœTokenè¯·æ±‚å¤´<strong>å­˜åœ¨åˆ™æ”¾è¡Œ</strong>ï¼Œå¦‚æœä¸å­˜åœ¨æˆ–ä¸ºç©ºåˆ™è®¾ç½®<strong>è¿”å›çŠ¶æ€ç </strong>ï¼šæœªæˆæƒï¼Œä¸å†æ‰§è¡Œä¸‹å»</p></blockquote><p>å…¨å±€è¿‡æ»¤å™¨éœ€è¦å®ç°<code>GlobalFilter</code></p><p><code>Ordered</code>æ¥å£æŒ‡æ˜äº†è¿‡æ»¤å™¨çš„æ‰§è¡Œé¡ºåºï¼ˆä¼˜å…ˆçº§ï¼‰ï¼Œè¿”å›çš„å€¼è¶Šå°è¶Šä¼˜å…ˆæ‰§è¡Œã€‚</p><h5 id="4561-ç¼–å†™è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨"><a class="markdownIt-Anchor" href="#4561-ç¼–å†™è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨"></a> 4.5.6.1ã€ç¼–å†™è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨</h5><p>å…¨å±€è¿‡æ»¤å™¨æ˜¯ä¸éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„ï¼Œåªè¦äº¤ç»™springç®¡ç†å³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyGlobalFilter</span> <span class="keyword">implements</span> <span class="title class_">GlobalFilter</span>, Ordered &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * GlobalFilter çš„å®ç°æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class="line">        <span class="comment">// è·å–ç¬¬ä¸€ä¸ªåä¸ºtokençš„è¯·æ±‚å¤´çš„å€¼</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> exchange.getRequest().getHeaders().getFirst(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="comment">// ä½¿ç”¨å·¥å…·ç±»åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è¯¥æ–¹æ³•æ–¹æ³•è¯´æ˜:</span></span><br><span class="line"><span class="comment">         * StringUtils.isBlank(null)      = true</span></span><br><span class="line"><span class="comment">         *        StringUtils.isBlank(&quot;&quot;)        = true</span></span><br><span class="line"><span class="comment">         *        StringUtils.isBlank(&quot; &quot;)       = true</span></span><br><span class="line"><span class="comment">         *        StringUtils.isBlank(&quot;bob&quot;)     = false</span></span><br><span class="line"><span class="comment">         *        StringUtils.isBlank(&quot;  bob  &quot;) = false</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span>(StringUtils.isBlank(token))&#123;</span><br><span class="line">            <span class="comment">// ä¸ºç©ºï¼Œè®¾ç½®å“åº”ç ä¸ºUNAUTHORIZED,è¿™æ˜¯ä¸ªæšä¸¾ç±»ï¼Œå®šä¹‰äº†httpçš„å„ç§å“åº”ç ä¾›ä½¿ç”¨ï¼Œæ­¤å¤„çš„UNAUTHORIZEDçš„å€¼æ˜¯401</span></span><br><span class="line">            exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);</span><br><span class="line">            <span class="keyword">return</span> exchange.getResponse().setComplete(); <span class="comment">//ä¸ºç©ºï¼Œä¹Ÿå°±æ˜¯è¯·æ±‚å¤´æ²¡æœ‰token,å°±ç»“æŸå¹¶è¿”å›å“åº”ç </span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¸ä¸ºç©ºï¼Œå°±ç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">        <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¥å£Orderedçš„å®ç°æ–¹æ³•ï¼Œè¿”å›çš„å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getOrder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4562-ä½¿ç”¨æµè§ˆå™¨æµ‹è¯•"><a class="markdownIt-Anchor" href="#4562-ä½¿ç”¨æµè§ˆå™¨æµ‹è¯•"></a> 4.5.6.2ã€ä½¿ç”¨æµè§ˆå™¨æµ‹è¯•</h5><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220122155401260.png" alt="image-20220122155401260" /></p><p>å› ä¸ºéœ€æ±‚ä¸­è¦åˆ¤æ–­çš„æ˜¯è¯·æ±‚å¤´çš„å†…å®¹ï¼Œæ™®é€šçš„æµè§ˆå™¨æ— æ³•è‡ªè¡Œæ·»åŠ è¯·æ±‚å¤´ï¼Œæ‰€ä»¥éœ€è¦å€ŸåŠ©å·¥å…·ApiPostæˆ–PostManå»æµ‹è¯•ã€‚</p><h5 id="4563-ä½¿ç”¨apipostå·¥å…·æµ‹è¯•"><a class="markdownIt-Anchor" href="#4563-ä½¿ç”¨apipostå·¥å…·æµ‹è¯•"></a> 4.5.6.3ã€ä½¿ç”¨ApiPostå·¥å…·æµ‹è¯•ï¼š</h5><blockquote><p><strong>æ— tokençš„æƒ…å†µæµ‹è¯•ï¼š</strong></p></blockquote><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220122155927636.png" alt="image-20220122155927636" /></p><blockquote><p><strong>æœ‰tokençš„æƒ…å†µæµ‹è¯•ï¼š</strong></p></blockquote><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220122160448300.png" alt="image-20220122160448300" /></p><h2 id="46-è´Ÿè½½å‡è¡¡å’Œç†”æ–­"><a class="markdownIt-Anchor" href="#46-è´Ÿè½½å‡è¡¡å’Œç†”æ–­"></a> 4.6ã€è´Ÿè½½å‡è¡¡å’Œç†”æ–­</h2><blockquote><p>Gatwayé»˜è®¤æ•´åˆäº†Hystrixä»¥åŠRibbonï¼Œä½†æ˜¯æ‰€æœ‰çš„è¶…æ—¶ç­–ç•¥éƒ½æ˜¯ç”¨çš„é»˜è®¤å€¼ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨Gatewayçš„è´Ÿè½½å‡è¡¡ä»¥åŠç†”æ–­æœºåˆ¶æ—¶ï¼Œæœ‰éœ€è¦çš„åœ°æ–¹è¦è‡ªè¡Œé…ç½®ã€‚</p><p>ä¸è¿‡ä¸€èˆ¬ä¹Ÿä¸ä½¿ç”¨gatewayåšè´Ÿè½½å‡è¡¡ä»¥åŠç†”æ–­ï¼Œäº†è§£å³å¯ã€‚</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hystrix:</span></span><br><span class="line">  <span class="attr">command:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">      <span class="attr">execution:</span></span><br><span class="line">        <span class="attr">isolation:</span></span><br><span class="line">            <span class="attr">timeoutInMilliseconds:</span> <span class="number">6000</span> <span class="comment">#æœåŠ¡é™çº§è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤1S</span></span><br><span class="line"><span class="attr">ribbon:</span></span><br><span class="line">  <span class="attr">ConnectTimeout:</span> <span class="number">1000</span> <span class="comment"># è¿æ¥è¶…æ—¶æ—¶é•¿</span></span><br><span class="line">  <span class="attr">ReadTimeout:</span> <span class="number">2000</span> <span class="comment"># æ•°æ®é€šä¿¡è¶…æ—¶æ—¶é•¿</span></span><br><span class="line">  <span class="attr">MaxAutoRetries:</span> <span class="number">0</span> <span class="comment"># å½“å‰æœåŠ¡å™¨çš„é‡è¯•æ¬¡æ•°</span></span><br><span class="line">  <span class="attr">MaxAutoRetriesNextServer:</span> <span class="number">0</span> <span class="comment"># é‡è¯•å¤šå°‘æ¬¡æœåŠ¡</span></span><br></pre></td></tr></table></figure><h2 id="47-è·¨åŸŸé…ç½®"><a class="markdownIt-Anchor" href="#47-è·¨åŸŸé…ç½®"></a> 4.7ã€è·¨åŸŸé…ç½®</h2><p>ä¸€èˆ¬ç½‘å…³éƒ½æ˜¯æ‰€æœ‰å¾®æœåŠ¡çš„ç»Ÿä¸€å…¥å£ï¼Œå¿…ç„¶åœ¨è¢«è°ƒç”¨çš„æ—¶å€™ä¼šå‡ºç°è·¨åŸŸé—®é¢˜ã€‚</p><blockquote><p>è·¨åŸŸï¼šåœ¨jsè¯·æ±‚è®¿é—®ä¸­ï¼Œå¦‚æœè®¿é—®çš„åœ°å€ä¸å½“å‰æœåŠ¡å™¨çš„åŸŸåã€ipæˆ–è€…ç«¯å£å·ä¸ä¸€è‡´åˆ™ç§°ä¸ºè·¨åŸŸè¯·æ±‚ã€‚è‹¥ä¸è§£å†³åˆ™ä¸èƒ½è·å–åˆ°å¯¹åº”åœ°å€çš„è¿”å›ç»“æœã€‚</p><p>å¦‚ï¼šä»åœ¨http://localhost:9090ä¸­çš„jsè®¿é—® http://localhost:9000çš„æ•°æ®ï¼Œå› ä¸ºç«¯å£ä¸åŒï¼Œæ‰€ä»¥ä¹Ÿæ˜¯è·¨åŸŸè¯·æ±‚ã€‚</p></blockquote><p>åœ¨è®¿é—®Spring Cloud Gatewayç½‘å…³æœåŠ¡å™¨çš„æ—¶å€™ï¼Œ<strong>å‡ºç°è·¨åŸŸé—®é¢˜çš„è¯ï¼›å¯ä»¥åœ¨ç½‘å…³æœåŠ¡å™¨ä¸­é€šè¿‡é…ç½®è§£å†³</strong>ï¼Œå…è®¸å“ª äº›æœåŠ¡æ˜¯å¯ä»¥è·¨åŸŸè¯·æ±‚çš„ï¼›å…·ä½“é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span> </span><br><span class="line"><span class="attr">port:</span> <span class="number">10010</span> </span><br><span class="line"><span class="attr">spring:</span> </span><br><span class="line"><span class="attr">application:</span> </span><br><span class="line"><span class="attr">name:</span> <span class="string">api-gateway</span> </span><br><span class="line"><span class="attr">cloud:</span> </span><br><span class="line"><span class="attr">gateway:</span> </span><br><span class="line"><span class="attr">routes:</span> <span class="comment"># è·¯ç”±idï¼Œå¯ä»¥éšæ„å†™ </span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service-route</span> </span><br><span class="line"><span class="comment"># ä»£ç†çš„æœåŠ¡åœ°å€ </span></span><br><span class="line"><span class="attr">uri:</span> <span class="string">lb://user-service</span> </span><br><span class="line"><span class="comment"># è·¯ç”±æ–­è¨€ï¼Œå¯ä»¥é…ç½®æ˜ å°„è·¯å¾„ </span></span><br><span class="line"><span class="attr">predicates:</span> </span><br><span class="line"><span class="bullet">-</span> <span class="string">Path=/api/user/**</span> </span><br><span class="line"><span class="attr">filters:</span> </span><br><span class="line"><span class="comment"># è¡¨ç¤ºè¿‡æ»¤1ä¸ªè·¯å¾„ï¼Œ2è¡¨ç¤ºä¸¤ä¸ªè·¯å¾„ï¼Œä»¥æ­¤ç±»æ¨ </span></span><br><span class="line"><span class="bullet">-</span> <span class="string">StripPrefix=1</span> <span class="comment"># è‡ªå®šä¹‰è¿‡æ»¤å™¨ </span></span><br><span class="line"><span class="bullet">-</span> <span class="string">MyParam=name</span> <span class="comment"># é»˜è®¤è¿‡æ»¤å™¨ï¼Œå¯¹æ‰€æœ‰è·¯ç”±éƒ½ç”Ÿæ•ˆ </span></span><br><span class="line"><span class="attr">default-filters:</span> </span><br><span class="line"><span class="bullet">-</span> <span class="string">AddResponseHeader=X-Response-Foo,</span> <span class="string">Bar</span> </span><br><span class="line"><span class="bullet">-</span> <span class="string">AddResponseHeader=abc-myname,lxs</span> </span><br><span class="line"><span class="attr">globalcors:</span> </span><br><span class="line"><span class="attr">corsConfigurations:</span> </span><br><span class="line"><span class="string">&#x27;[/**]&#x27;</span><span class="string">:</span> </span><br><span class="line"><span class="attr">allowedOrigins:</span>  <span class="comment"># æŒ‡å®šå…è®¸è·¨åŸŸè¯·æ±‚çš„è¯·æ±‚åœ°å€ï¼Œå¯ä»¥å•ä¸ªå¯ä»¥å¤šä¸ªï¼Œ*è¡¨ç¤ºå…¨éƒ¨ </span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&quot;http://docs.spring.io&quot;</span> </span><br><span class="line"><span class="attr">allowedMethods:</span> <span class="comment"># å…è®¸è·¨åŸŸè¯·æ±‚çš„è¯·æ±‚ç±»å‹</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">GET</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°é…ç½®è¡¨ç¤ºï¼šå¯ä»¥å…è®¸æ¥è‡ª <a href="http://docs.spring.io">http://docs.spring.io</a> çš„getè¯·æ±‚æ–¹å¼è·å–æœåŠ¡æ•°æ®ã€‚</p><p>allowedOrigins æŒ‡å®šå…è®¸è®¿é—®çš„æœåŠ¡å™¨åœ°å€ï¼Œå¦‚ï¼š<a href="http://localhost:10000">http://localhost:10000</a> ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ <strong>â€˜[/**]â€™ è¡¨ç¤ºå¯¹æ‰€æœ‰è®¿é—®åˆ°ç½‘å…³æœåŠ¡å™¨çš„è¯·æ±‚åœ°å€ã€‚</strong></p><p>**å®˜ç½‘å…·ä½“è¯´æ˜ï¼š**<a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.1.1.RELEASE/multi/multi__cors_confifiguration.html">https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.1.1.RELEASE/multi/multi__cors_confifiguration.html</a></p><h2 id="48-gatewayçš„é«˜å¯ç”¨"><a class="markdownIt-Anchor" href="#48-gatewayçš„é«˜å¯ç”¨"></a> 4.8ã€Gatewayçš„é«˜å¯ç”¨</h2><blockquote><p>å¯åŠ¨å¤šä¸ªGatewayæœåŠ¡ï¼Œè‡ªåŠ¨æ³¨å†Œåˆ°Eurekaï¼Œå½¢æˆé›†ç¾¤ã€‚å¦‚æœæ˜¯æœåŠ¡å†…éƒ¨è®¿é—®ï¼Œè®¿é—®Gatewayï¼Œè‡ªåŠ¨è´Ÿè½½å‡è¡¡ï¼Œæ²¡é—®é¢˜ã€‚</p><p>ä½†æ˜¯ï¼ŒGatewayæ›´å¤šæ˜¯<strong>å¤–éƒ¨è®¿é—®</strong>ï¼ŒPCç«¯ã€ç§»åŠ¨ç«¯ç­‰ã€‚å®ƒä»¬<strong>æ— æ³•é€šè¿‡Eurekaè¿›è¡Œè´Ÿè½½å‡è¡¡</strong>ï¼Œé‚£ä¹ˆè¯¥æ€ä¹ˆåŠï¼Ÿ</p><p>æ­¤æ—¶ï¼Œå¯ä»¥<strong>ä½¿ç”¨å…¶å®ƒçš„æœåŠ¡ç½‘å…³</strong>ï¼Œæ¥å¯¹Gatewayè¿›è¡Œä»£ç†ã€‚æ¯”å¦‚ï¼š<strong>Nginx</strong></p></blockquote><h2 id="49-gatewayä¸feignçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#49-gatewayä¸feignçš„åŒºåˆ«"></a> 4.9ã€Gatewayä¸feignçš„åŒºåˆ«</h2><blockquote><p><code>Gateway</code> ä½œä¸ºæ•´ä¸ªåº”ç”¨çš„æµé‡å…¥å£ï¼Œæ¥æ”¶æ‰€æœ‰çš„è¯·æ±‚ï¼Œå¦‚PCã€ç§»åŠ¨ç«¯ç­‰ï¼Œå¹¶ä¸”å°†ä¸åŒçš„è¯·æ±‚è½¬- å‘è‡³ä¸åŒçš„å¤„ç†å¾®æœåŠ¡æ¨¡å—ï¼Œå…¶ä½œç”¨<strong>å¯è§†ä¸ºnginx</strong>ï¼›</p><p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ç”¨ä½œ<strong>æƒé™é‰´å®šã€æœåŠ¡ç«¯æµé‡æ§åˆ¶</strong></p><p><code>Feign</code> åˆ™æ˜¯å°†å½“å‰å¾®æœåŠ¡çš„<strong>éƒ¨åˆ†æœåŠ¡æ¥å£æš´éœ²</strong>å‡ºæ¥ï¼Œå¹¶ä¸”ä¸»è¦ç”¨äº<strong>å„ä¸ªå¾®æœåŠ¡ä¹‹é—´çš„æœåŠ¡è°ƒç”¨</strong></p><p>ä¾‹å¦‚ï¼šè®¢å•æœåŠ¡è®¿é—®ç”¨æˆ·æœåŠ¡ï¼Œè¿™ç§å†…éƒ¨è®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨feignå°†ç”¨æˆ·æœåŠ¡æ¥å£æš´éœ²å‡ºæ¥ï¼Œç»™è®¢å•æœåŠ¡ä½¿ç”¨ã€‚</p></blockquote>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡ä¸»è¦è®²è¿°SpringCloudä¸­gatewayç»„ä»¶çš„ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œä»¥åŠåœ¨é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®å‚æ•°åˆ—ä¸¾</summary>
    
    
    
    <category term="åˆ†å¸ƒå¼æ²»ç†" scheme="https://blog.kakar.top/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B2%BB%E7%90%86/"/>
    
    
    <category term="Gateway" scheme="https://blog.kakar.top/tags/Gateway/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloudç»„ä»¶å­¦ä¹ ä¹‹openfeign</title>
    <link href="https://blog.kakar.top/posts/9640d1f5.html"/>
    <id>https://blog.kakar.top/posts/9640d1f5.html</id>
    <published>2023-06-16T13:42:47.000Z</published>
    <updated>2023-06-16T13:42:47.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="3-springcloud-netflix-feignçš„ä½¿ç”¨ä»¥åŠè®²è§£"><a class="markdownIt-Anchor" href="#3-springcloud-netflix-feignçš„ä½¿ç”¨ä»¥åŠè®²è§£"></a> 3ã€SpringCloud Netflix Feignçš„ä½¿ç”¨ä»¥åŠè®²è§£</h1><p>Feignå¯ä»¥æŠŠRestè¯·æ±‚è¿›è¡Œéšè—ï¼Œä¼ªè£…æˆç±»ä¼¼SpringMVCçš„Controllerä¸€æ ·ï¼Œä¸ç”¨å†è‡ªå·±æ‹¼æ¥URLï¼Œæ‹¼æ¥å‚æ•°ç­‰ç­‰æ“ä½œï¼ŒFeignå¯ä»¥æ¥ç®¡è¿™äº›å¹¶è‡ªåŠ¨å®Œæˆã€‚</p><h2 id="31-feignçš„ä½¿ç”¨"><a class="markdownIt-Anchor" href="#31-feignçš„ä½¿ç”¨"></a> 3.1ã€Feignçš„ä½¿ç”¨</h2><h5 id="311-ä¾èµ–å¼•å…¥"><a class="markdownIt-Anchor" href="#311-ä¾èµ–å¼•å…¥"></a> 3.1.1ã€ä¾èµ–å¼•å…¥</h5><p>åœ¨consumerçš„pomæ–‡ä»¶ä¸­å¼•å…¥ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="312-å®¢æˆ·ç«¯é…ç½®"><a class="markdownIt-Anchor" href="#312-å®¢æˆ·ç«¯é…ç½®"></a> 3.1.2ã€å®¢æˆ·ç«¯é…ç½®</h5><p>åˆ›å»ºå®¢æˆ·ç«¯æ¥å£ç±»ï¼Œæ·»åŠ æ·»åŠ <code>@FeignClient</code>æ³¨è§£ï¼ŒæŒ‡å®šéœ€è¦è®¿é—®çš„æœåŠ¡å</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Feignå®¢æˆ·ç«¯é…ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FeignClient(&quot;User-Service&quot;)</span> <span class="comment">// user-serviceä¸ºæœåŠ¡æä¾›è€…çš„å¾®æœåŠ¡åç§°</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserFeignClient</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Feignä¼šé€šè¿‡åŠ¨æ€ä»£ç†ï¼Œç”Ÿæˆå®ç°ç±»</span></span><br><span class="line"><span class="comment">     * æ·»åŠ äº†<span class="doctag">@FeignClient</span>æ³¨è§£çš„æ¥å£ï¼Œå®ƒçš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œå®Œå…¨é‡‡ç”¨SpringMVCçš„æ³¨è§£ï¼ŒFeignä¼šæ ¹æ®æ³¨è§£ï¼Œè‡ªåŠ¨ç”ŸæˆURLï¼Œå¹¶è®¿é—®è·å–ç»“æœ</span></span><br><span class="line"><span class="comment">     * getmappingä¸­ç»™çš„åœ°å€ï¼Œå‰é¢å¿…é¡»è¦æ–œæ ï¼Œå› ä¸ºéœ€è¦æ‹¼æ¥ï¼Œå°‘äº†æ–œæ ï¼Œæ‹¼æ¥å‡ºæ¥çš„åœ°å€ä¼šæ— æ³•è®¿é—®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/queryById/&#123;id&#125;&quot;)</span> <span class="comment">// feignå¯¹è¯¥è¯·æ±‚åœ°å€åšå¤„ç†æˆhttp://user-service/user/queryById/idï¼Œååˆ†ä¼˜é›…</span></span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="313-ç¼–å†™æ–°çš„controller"><a class="markdownIt-Anchor" href="#313-ç¼–å†™æ–°çš„controller"></a> 3.1.3ã€ç¼–å†™æ–°çš„Controller</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/UserFeign&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserByFeignController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserFeignClient client; <span class="comment">// æ³¨å…¥Feignçš„å®¢æˆ·ç«¯ï¼Œä»¥ä¾›ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/queryById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line">        CommonVo&lt;User&gt; userCommonVo = client.queryById(id);</span><br><span class="line">        <span class="keyword">return</span> userCommonVo;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="314-å¯åŠ¨ç±»"><a class="markdownIt-Anchor" href="#314-å¯åŠ¨ç±»"></a> 3.1.4ã€å¯åŠ¨ç±»</h5><p>æ·»åŠ å¼€å¯FeignåŠŸèƒ½çš„æ³¨è§£**@EnabledFeignClients**</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span><span class="comment">//(exclude= &#123;DataSourceAutoConfiguration.class&#125;) //exclude é¿å…å› å¯¼å…¥çš„å…¶å®ƒæ¨¡å—ä¸­æœ‰ç±»éœ€è¦é“¾æ¥æ•°æ®åº“è€ŒæŠ¥é”™</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span> <span class="comment">//å¼€å¯Eurekaå®¢æˆ·ç«¯å‘ç°</span></span><br><span class="line"><span class="meta">@EnableCircuitBreaker</span> <span class="comment">// å¼€å¯ç†”æ–­</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span> <span class="comment">//å¼€å¯FeignåŠŸèƒ½</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringCloud_Consumer_80_Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringCloud_Consumer_80_Application.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="315-å¯åŠ¨æœåŠ¡å¹¶æµ‹è¯•"><a class="markdownIt-Anchor" href="#315-å¯åŠ¨æœåŠ¡å¹¶æµ‹è¯•"></a> 3.1.5ã€å¯åŠ¨æœåŠ¡å¹¶æµ‹è¯•</h5><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220119225324328.png" alt="image-20220119225324328" /></p><h2 id="32-è´Ÿè½½å‡è¡¡"><a class="markdownIt-Anchor" href="#32-è´Ÿè½½å‡è¡¡"></a> 3.2ã€è´Ÿè½½å‡è¡¡</h2><p>Feignè‡ªèº«æ•´åˆäº†Ribbonçš„ä¾èµ–å’Œè‡ªåŠ¨é…ç½®ï¼Œå› æ­¤å¯ä»¥ç›´æ¥æ”¯æŒè´Ÿè½½å‡è¡¡</p><p>Feignå†…ç½®çš„Ribboné»˜è®¤è®¾ç½®äº†è¯·æ±‚è¶…æ—¶æ—¶é•¿ï¼Œé»˜è®¤å€¼ä¸º<strong>1000ms</strong>ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å‚æ•°å€¼æ¥ä¿®æ”¹è¿™ä¸ªæ•°å€¼ã€‚</p><h5 id="321-é…ç½®å…¨å±€"><a class="markdownIt-Anchor" href="#321-é…ç½®å…¨å±€"></a> 3.2.1ã€é…ç½®å…¨å±€</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ribbon:</span> </span><br><span class="line"><span class="attr">ReadTimeout:</span> <span class="number">2000</span> <span class="comment"># è¯»å–è¶…æ—¶æ—¶é•¿</span></span><br><span class="line"><span class="attr">ConnectTimeout:</span> <span class="number">1000</span> <span class="comment"># å»ºç«‹é“¾æ¥çš„è¶…æ—¶æ—¶é•¿</span></span><br></pre></td></tr></table></figure><h5 id="322-é…ç½®å•ä¸ªæœåŠ¡åç§°"><a class="markdownIt-Anchor" href="#322-é…ç½®å•ä¸ªæœåŠ¡åç§°"></a> 3.2.2ã€é…ç½®å•ä¸ªæœåŠ¡åç§°</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">User-Service:</span> </span><br><span class="line">  <span class="attr">ribbon:</span> </span><br><span class="line">    <span class="attr">ReadTimeout:</span> <span class="number">2000</span> <span class="comment"># è¯»å–è¶…æ—¶æ—¶é•¿</span></span><br><span class="line">    <span class="attr">ConnectTimeout:</span> <span class="number">1000</span> <span class="comment"># å»ºç«‹é“¾æ¥çš„è¶…æ—¶æ—¶é•¿</span></span><br></pre></td></tr></table></figure><p><strong>User-Serviceä¸ºæœåŠ¡æä¾›è€…çš„æœåŠ¡åç§°ã€‚</strong></p><blockquote><p>Ribbonå†…éƒ¨æœ‰é‡è¯•æœºåˆ¶ï¼Œä¸€æ—¦è¶…æ—¶ï¼Œä¼šè‡ªåŠ¨é‡æ–°å‘èµ·ä¸€æ¬¡è¯·æ±‚ã€‚</p></blockquote><p>è¿™äº›ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶é…ç½®æŒ‡å®šå€¼ã€‚</p><h5 id="323-å…¶å®ƒå¸¸ç”¨é…ç½®é¡¹"><a class="markdownIt-Anchor" href="#323-å…¶å®ƒå¸¸ç”¨é…ç½®é¡¹"></a> 3.2.3ã€å…¶å®ƒå¸¸ç”¨é…ç½®é¡¹</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ribbon:</span> </span><br><span class="line"><span class="attr">ConnectTimeout:</span> <span class="number">1000</span> <span class="comment"># è¿æ¥è¶…æ—¶æ—¶é•¿ </span></span><br><span class="line"><span class="attr">ReadTimeout:</span> <span class="number">2000</span> <span class="comment"># æ•°æ®é€šä¿¡è¶…æ—¶æ—¶é•¿ </span></span><br><span class="line"><span class="attr">MaxAutoRetries:</span> <span class="number">0</span> <span class="comment"># å½“å‰æœåŠ¡å™¨çš„é‡è¯•æ¬¡æ•° </span></span><br><span class="line"><span class="attr">MaxAutoRetriesNextServer:</span> <span class="number">0</span> <span class="comment"># é‡è¯•å¤šå°‘æ¬¡æœåŠ¡ </span></span><br><span class="line"><span class="attr">OkToRetryOnAllOperations:</span> <span class="literal">false</span> <span class="comment"># æ˜¯å¦å¯¹æ‰€æœ‰çš„è¯·æ±‚æ–¹å¼éƒ½é‡è¯•</span></span><br></pre></td></tr></table></figure><h2 id="33-hystrixæ”¯æŒ"><a class="markdownIt-Anchor" href="#33-hystrixæ”¯æŒ"></a> 3.3ã€Hystrixæ”¯æŒ</h2><h5 id="331-å¼€å¯hystrix"><a class="markdownIt-Anchor" href="#331-å¼€å¯hystrix"></a> 3.3.1ã€å¼€å¯Hystrix</h5><p>Feigné›†æˆäº†Hystrixï¼Œä¸è¿‡é»˜è®¤æ˜¯å…³é—­çš„ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span> </span><br><span class="line"><span class="attr">hystrix:</span> </span><br><span class="line"><span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯Feignçš„ç†”æ–­åŠŸèƒ½</span></span><br></pre></td></tr></table></figure><h5 id="332-ä½¿ç”¨hystrix"><a class="markdownIt-Anchor" href="#332-ä½¿ç”¨hystrix"></a> 3.3.2ã€ä½¿ç”¨Hystrix</h5><p>ç¼–å†™Feignå®¢æˆ·ç«¯çš„å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¼–å†™ Feignå®¢æˆ·ç«¯çš„å®ç°ç±»ï¼Œç”¨äºå¯¹å‘ç”Ÿç†”æ–­çš„è¯·æ±‚åšç›¸åº”çš„å¤„ç†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserFallBack</span> <span class="keyword">implements</span> <span class="title class_">UserFeignClient</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯¹ queryByIdè¿™ä¸ªè¯·æ±‚åœ°å€åšç†”æ–­å¤„ç†ï¼Œè¯·æ±‚è¶…æ—¶æ—¶ï¼Œè°ƒç”¨ä»¥ä¸‹çš„æ–¹æ³•ï¼Œå“åº”å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">queryById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonVo</span>&lt;&gt;(<span class="number">400</span>,<span class="string">&quot;æŠ±æ­‰ï¼Œè”é€šç½‘ç»œæé†’æ‚¨ï¼Œæ‚¨è¯·æ±‚çš„æœåŠ¡æš‚æ—¶è”ä¸é€šï¼Œè¯·ç¨åå†è¯•ï¼ï¼ï¼&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å®¢æˆ·ç«¯ä¸­ï¼Œ<strong>@FeignClient</strong>æ³¨è§£çš„<strong>fallback</strong>å±æ€§çš„å€¼ä¸ºè¯¥æ¥å£çš„<strong>è‡ªå®šä¹‰å®ç°ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Feignå®¢æˆ·ç«¯é…ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FeignClient(value = &quot;User-Service&quot;,fallback = UserFallBack.class)</span> <span class="comment">// user-serviceä¸ºæœåŠ¡æä¾›è€…çš„å¾®æœåŠ¡åç§°</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserFeignClient</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Feignä¼šé€šè¿‡åŠ¨æ€ä»£ç†ï¼Œç”Ÿæˆå®ç°ç±»</span></span><br><span class="line"><span class="comment">     * æ·»åŠ äº†<span class="doctag">@FeignClient</span>æ³¨è§£çš„æ¥å£ï¼Œå®ƒçš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œå®Œå…¨é‡‡ç”¨SpringMVCçš„æ³¨è§£ï¼ŒFeignä¼šæ ¹æ®æ³¨è§£ï¼Œè‡ªåŠ¨ç”ŸæˆURLï¼Œå¹¶è®¿é—®è·å–ç»“æœ</span></span><br><span class="line"><span class="comment">     * getmappingä¸­ç»™çš„åœ°å€ï¼Œå‰é¢å¿…é¡»è¦æ–œæ ï¼Œå› ä¸ºéœ€è¦æ‹¼æ¥ï¼Œå°‘äº†æ–œæ ï¼Œæ‹¼æ¥å‡ºæ¥çš„åœ°å€ä¼šæ— æ³•è®¿é—®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/queryById/&#123;id&#125;&quot;)</span> <span class="comment">// feignå¯¹è¯¥è¯·æ±‚åœ°å€åšå¤„ç†æˆhttp://user-service/user/queryById/idï¼Œååˆ†ä¼˜é›…</span></span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="333-æµ‹è¯•å‰ååŒºåˆ«"><a class="markdownIt-Anchor" href="#333-æµ‹è¯•å‰ååŒºåˆ«"></a> 3.3.3ã€æµ‹è¯•å‰ååŒºåˆ«</h5><p>å¼€å¯æ¶ˆè´¹è€…ã€æä¾›è€…ä»¥åŠEurekaæœåŠ¡</p><p><strong>æ­£å¸¸è®¿é—®ï¼š</strong></p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220119234255254.png" alt="image-20220119234255254" /></p><p><strong>åœæ­¢æœåŠ¡æä¾›è€…ä¹‹åï¼Œè®¿é—®ï¼š</strong></p><p>æ­¤æ—¶è§¦å‘äº†æœåŠ¡é™çº§ï¼Œè°ƒç”¨äº†fallbackæŒ‡å®šçš„ï¼ŒFeignå®¢æˆ·ç«¯é…ç½®ç±»çš„å­ç±»æ–¹æ³•ã€‚</p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220119234315204.png" alt="image-20220119234315204" /></p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220119234341956.png" alt="image-20220119234341956" /></p><h2 id="34-è¯·æ±‚å‹ç¼©äº†è§£"><a class="markdownIt-Anchor" href="#34-è¯·æ±‚å‹ç¼©äº†è§£"></a> 3.4ã€è¯·æ±‚å‹ç¼©ï¼ˆäº†è§£ï¼‰</h2><p>Spring Cloud Feign æ”¯æŒå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡ŒGZIPå‹ç¼©ï¼Œä»¥å‡å°‘é€šä¿¡è¿‡ç¨‹ä¸­çš„æ€§èƒ½æŸè€—ã€‚é€šè¿‡ä¸‹é¢çš„å‚æ•°å³å¯å¼€å¯è¯·æ±‚ä¸å“åº”çš„å‹ç¼©åŠŸèƒ½ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span> </span><br><span class="line"><span class="attr">compression:</span> </span><br><span class="line"><span class="attr">request:</span> </span><br><span class="line"><span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯è¯·æ±‚å‹ç¼© </span></span><br><span class="line"><span class="attr">response:</span> </span><br><span class="line"><span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯å“åº”å‹ç¼©</span></span><br></pre></td></tr></table></figure><p>åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹è¯·æ±‚çš„æ•°æ®ç±»å‹ï¼Œä»¥åŠè§¦å‘å‹ç¼©çš„å¤§å°ä¸‹é™è¿›è¡Œè®¾ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span> </span><br><span class="line"><span class="attr">compression:</span> </span><br><span class="line"><span class="attr">request:</span> </span><br><span class="line"><span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯è¯·æ±‚å‹ç¼© </span></span><br><span class="line"><span class="attr">mime-types:</span> <span class="string">text/html,application/xml,application/json</span> <span class="comment"># è®¾ç½®å‹ç¼©çš„æ•°æ®ç±»å‹ </span></span><br><span class="line"><span class="attr">min-request-size:</span> <span class="number">2048</span> <span class="comment"># è®¾ç½®è§¦å‘å‹ç¼©çš„å¤§å°ä¸‹é™</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šä»¥ä¸Šçš†ä¸ºé»˜è®¤å€¼ã€‚</strong></p><h2 id="35-æ—¥å¿—çº§åˆ«äº†è§£"><a class="markdownIt-Anchor" href="#35-æ—¥å¿—çº§åˆ«äº†è§£"></a> 3.5ã€æ—¥å¿—çº§åˆ«ï¼ˆäº†è§£ï¼‰</h2><p>è®¾ç½®äº†æ—¥å¿—çº§åˆ«ï¼Œå°±å¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°å‹ç¼©çš„å…·ä½“ä¿¡æ¯ã€‚</p><p><strong>@FeignClient</strong>æ³¨è§£ä¿®æ”¹çš„å®¢æˆ·ç«¯åœ¨è¢«ä»£ç†æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„<strong>Feign.Logger</strong>ç¤ºä¾‹ã€‚éœ€è¦æŒ‡å®šè¿™ä¸ªå®ä¾‹çš„æ—¥å¿—çº§åˆ«ã€‚å®Œæˆæ—¥å¿—æ‰“å°ã€‚</p><h5 id="351-è®¾ç½®æ—¥å¿—çº§åˆ«"><a class="markdownIt-Anchor" href="#351-è®¾ç½®æ—¥å¿—çº§åˆ«"></a> 3.5.1ã€è®¾ç½®æ—¥å¿—çº§åˆ«</h5><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span> </span><br><span class="line"><span class="attr">level:</span> </span><br><span class="line"><span class="attr">com.aliang:</span> <span class="string">debug</span> <span class="comment"># com.aliangä¸ºåŒ…å</span></span><br></pre></td></tr></table></figure><h5 id="352-ç¼–å†™feigné…ç½®ç±»"><a class="markdownIt-Anchor" href="#352-ç¼–å†™feigné…ç½®ç±»"></a> 3.5.2ã€ç¼–å†™Feigné…ç½®ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Feignçš„æ—¥å¿—é…ç½®ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FeignConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    Logger.Level <span class="title function_">feignLoggerLevel</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Logger.Level.FULL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡ŒæŒ‡å®šçš„Levelçº§åˆ«æ˜¯FULLï¼ŒFeignæ”¯æŒ4ç§çº§åˆ«ï¼š</p><ul><li>NONEï¼šä¸è®°å½•ä»»ä½•æ—¥å¿—ä¿¡æ¯ï¼Œè¿™æ˜¯é»˜è®¤å€¼ã€‚</li><li>BASICï¼šä»…è®°å½•è¯·æ±‚çš„æ–¹æ³•ï¼ŒURLä»¥åŠå“åº”çŠ¶æ€ç å’Œæ‰§è¡Œæ—¶é—´</li><li>HEADERSï¼šåœ¨BASICçš„åŸºç¡€ä¸Šï¼Œé¢å¤–è®°å½•äº†è¯·æ±‚å’Œå“åº”çš„å¤´ä¿¡æ¯</li><li>FULLï¼šè®°å½•æ‰€æœ‰è¯·æ±‚å’Œå“åº”çš„æ˜ç»†ï¼ŒåŒ…æ‹¬å¤´ä¿¡æ¯ã€è¯·æ±‚ä½“ã€å…ƒæ•°æ®ã€‚</li></ul></blockquote><h5 id="353-æŒ‡å®šé…ç½®ç±»"><a class="markdownIt-Anchor" href="#353-æŒ‡å®šé…ç½®ç±»"></a> 3.5.3ã€æŒ‡å®šé…ç½®ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Feignå®¢æˆ·ç«¯é…ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// user-serviceä¸ºæœåŠ¡æä¾›è€…çš„å¾®æœåŠ¡åç§°</span></span><br><span class="line"><span class="meta">@FeignClient(value = &quot;User-Service&quot;,fallback = UserFallBack.class,configuration = FeignConfiguration.class)</span>  <span class="comment">//configurationæŒ‡å®šé…ç½®ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserFeignClient</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/queryById/&#123;id&#125;&quot;)</span> </span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="354-æµ‹è¯•"><a class="markdownIt-Anchor" href="#354-æµ‹è¯•"></a> 3.5.4ã€æµ‹è¯•</h5><p>æµè§ˆå™¨è¾“å…¥åœ°å€ï¼Œæ§åˆ¶å°è¾“å‡ºçš„ä¿¡æ¯å¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220119235728264.png" alt="image-20220119235728264" /></p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡ä¸»è¦è®²è¿°SpringCloudä¸­openfeignç»„ä»¶çš„ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œä»¥åŠåœ¨é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®å‚æ•°åˆ—ä¸¾</summary>
    
    
    
    <category term="åˆ†å¸ƒå¼æ²»ç†" scheme="https://blog.kakar.top/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B2%BB%E7%90%86/"/>
    
    
    <category term="Openfeign" scheme="https://blog.kakar.top/tags/Openfeign/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloudç»„ä»¶å­¦ä¹ ä¹‹hystrix</title>
    <link href="https://blog.kakar.top/posts/9a59d523.html"/>
    <id>https://blog.kakar.top/posts/9a59d523.html</id>
    <published>2023-06-16T13:38:46.000Z</published>
    <updated>2023-06-16T13:38:46.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="21-hystrixçš„ä½¿ç”¨"><a class="markdownIt-Anchor" href="#21-hystrixçš„ä½¿ç”¨"></a> 2.1ã€Hystrixçš„ä½¿ç”¨</h2><h5 id="211-å¯¼å…¥ä¾èµ–"><a class="markdownIt-Anchor" href="#211-å¯¼å…¥ä¾èµ–"></a> 2.1.1ã€å¯¼å…¥ä¾èµ–</h5><p>åœ¨éœ€è¦è¿œç¨‹è°ƒç”¨çš„æœåŠ¡æ¨¡å—ä¸­å¯¼å…¥Hystrixä¾èµ–ï¼Œå³æ¶ˆè´¹è€…å¾®æœåŠ¡ä¸­ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="212-æ·»åŠ æ³¨è§£"><a class="markdownIt-Anchor" href="#212-æ·»åŠ æ³¨è§£"></a> 2.1.2ã€æ·»åŠ æ³¨è§£</h5><p>åœ¨å¯åŠ¨ç±»ä¸Šï¼Œæ·»åŠ @EnableCircuitBreaker æ³¨è§£ï¼Œå¼€å¯ç†”æ–­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span> <span class="comment">//å¼€å¯Eurekaå®¢æˆ·ç«¯å‘ç°</span></span><br><span class="line"><span class="meta">@EnableCircuitBreaker</span> <span class="comment">// å¼€å¯ç†”æ–­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringCloud_Consumer_80_Application</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringCloud_Consumer_80_Application.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºè¿œç¨‹è°ƒç”¨æ¨¡æ¿å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">getRestTemplate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="213-springcloudapplicationæ³¨è§£"><a class="markdownIt-Anchor" href="#213-springcloudapplicationæ³¨è§£"></a> 2.1.3ã€@SpringCloudApplicationæ³¨è§£</h5><p>ä¸€èˆ¬çš„ï¼Œå¯ä»¥ä½¿ç”¨**@SpringCloudApplication**æ³¨è§£æ›¿ä»£ä»¥ä¸Šçš„ä¸‰ä¸ªæ³¨è§£ï¼Œå³å¦‚ä¸‹æ–¹å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringCloudApplication</span> <span class="comment">// è¯¥æ³¨è§£ä¸ºç»„åˆæ³¨è§£ï¼ŒåŒ…å«@SpringBootApplicationã€@EnableDiscoveryClientä»¥åŠ@EnableCircuitBreakerä¸‰ä¸ªæ³¨è§£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringCloud_Consumer_80_Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringCloud_Consumer_80_Application.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºè¿œç¨‹è°ƒç”¨æ¨¡æ¿å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">getRestTemplate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="22-ç¼–å†™æœåŠ¡é™çº§"><a class="markdownIt-Anchor" href="#22-ç¼–å†™æœåŠ¡é™çº§"></a> 2.2ã€ç¼–å†™æœåŠ¡é™çº§</h2><p>å½“ç›®æ ‡æœåŠ¡çš„è°ƒç”¨å‡ºç°æ•…éšœï¼Œæˆ‘ä»¬å¸Œæœ›å¿«é€Ÿå¤±è´¥ï¼Œç»™ç”¨æˆ·ä¸€ä¸ªå‹å¥½çš„æç¤ºï¼Œå› æ­¤éœ€è¦æå‰ç¼–å†™å¥½å¤±è´¥æ—¶çš„é™çº§å¤„ç†é€»è¾‘ï¼Œéœ€è¦ç”¨åˆ°**@HystrixCommand**æ¥å®Œæˆã€‚</p><p>å®ç°ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;consumer&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DiscoveryClient discoveryClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;queryById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@HystrixCommand(fallbackMethod = &quot;queryByIdFallback&quot;)</span> <span class="comment">// å£°æ˜æœåŠ¡é™çº§çš„å¤„ç†æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line">        <span class="type">ServiceInstance</span> <span class="variable">serviceInstance</span> <span class="operator">=</span> discoveryClient.getInstances(<span class="string">&quot;user-service&quot;</span>).get(<span class="number">0</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">hostName</span> <span class="operator">=</span> serviceInstance.getHost(); </span><br><span class="line">        <span class="type">int</span> <span class="variable">hostPort</span> <span class="operator">=</span> serviceInstance.getPort(); </span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://&quot;</span>+hostName+<span class="string">&quot;:&quot;</span>+hostPort; </span><br><span class="line">        CommonVo&lt;User&gt; resp = restTemplate.getForObject(url + <span class="string">&quot;/user/queryById/&quot;</span> + id, CommonVo.class);</span><br><span class="line">        <span class="keyword">return</span> resp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æœåŠ¡é™çº§çš„æ–¹æ³•ï¼Œè¿”å›æç¤ºä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">queryByIdFallback</span><span class="params">(Long id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonVo</span>&lt;&gt;(<span class="number">400</span>,<span class="string">&quot;æŠ±æ­‰ï¼Œç½‘ç»œæ‹¥å µï¼Œè¯·ç¨åå†è¯•ï¼ï¼ï¼&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç•™æ„å¸¦æœ‰æ³¨é‡Šçš„åœ°æ–¹ã€‚</p><p><strong>@HystrixCommand(fallbackMethod = â€œqueryByIdFallbackâ€) // å£°æ˜æœåŠ¡é™çº§çš„å¤„ç†æ–¹æ³•</strong></p><p><strong>æ³¨æ„ï¼š</strong></p><blockquote><p>ç†”æ–­çš„é™çº§é€»è¾‘æ–¹æ³• å¿…é¡»å’Œæ­£å¸¸é€»è¾‘æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ä¸€è‡´ã€‚</p></blockquote><h2 id="23-æµ‹è¯•æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#23-æµ‹è¯•æ¡ˆä¾‹"></a> 2.3ã€æµ‹è¯•æ¡ˆä¾‹</h2><h5 id="231-å¯åŠ¨å¾®æœåŠ¡"><a class="markdownIt-Anchor" href="#231-å¯åŠ¨å¾®æœåŠ¡"></a> 2.3.1ã€å¯åŠ¨å¾®æœåŠ¡</h5><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220119145735760.png" alt="image-20220119145735760" /></p><h5 id="232-è®¿é—®controller"><a class="markdownIt-Anchor" href="#232-è®¿é—®controller"></a> 2.3.2ã€è®¿é—®controller</h5><p>æ­£å¸¸æ˜¾ç¤ºæŸ¥è¯¢æ•°æ®</p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220119145808363.png" alt="image-20220119145808363" /></p><h5 id="233-åœæ­¢8001"><a class="markdownIt-Anchor" href="#233-åœæ­¢8001"></a> 2.3.3ã€åœæ­¢8001</h5><p>æ¨¡æ‹Ÿè¯·æ±‚å¤±è´¥çš„åœºæ™¯</p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220119145903361.png" alt="image-20220119145903361" /></p><h5 id="234-å†æ¬¡è®¿é—®"><a class="markdownIt-Anchor" href="#234-å†æ¬¡è®¿é—®"></a> 2.3.4ã€å†æ¬¡è®¿é—®</h5><p>æœåŠ¡å‘ç”Ÿé™çº§ï¼Œè°ƒç”¨äº†é™çº§å¤„ç†æ–¹æ³•å“åº”è¯·æ±‚</p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220119145924661.png" alt="image-20220119145924661" /></p><h2 id="24-é»˜è®¤çš„fallbackæ–¹æ³•"><a class="markdownIt-Anchor" href="#24-é»˜è®¤çš„fallbackæ–¹æ³•"></a> 2.4ã€é»˜è®¤çš„Fallbackæ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;consumer&quot;)</span></span><br><span class="line"><span class="meta">@DefaultProperties(defaultFallback = &quot;defaultFallback&quot;)</span> <span class="comment">//æŒ‡å®šé»˜è®¤æœåŠ¡é™çº§æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DiscoveryClient discoveryClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;queryById/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="comment">//@HystrixCommand(fallbackMethod = &quot;queryByIdFallback&quot;) // å£°æ˜æœåŠ¡é™çº§çš„å¤„ç†æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@HystrixCommand</span> <span class="comment">// æŒ‡å®šäº†é»˜è®¤çš„æœåŠ¡é™çº§æ–¹æ³•ï¼Œè¿™é‡Œå°±ä¸éœ€è¦å†æŒ‡å®šäº†</span></span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line">        <span class="type">ServiceInstance</span> <span class="variable">serviceInstance</span> <span class="operator">=</span> discoveryClient.getInstances(<span class="string">&quot;User-Service&quot;</span>).get(<span class="number">0</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">hostName</span> <span class="operator">=</span> serviceInstance.getHost(); </span><br><span class="line">        <span class="type">int</span> <span class="variable">hostPort</span> <span class="operator">=</span> serviceInstance.getPort();</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://&quot;</span>+hostName+<span class="string">&quot;:&quot;</span>+hostPort;</span><br><span class="line">        CommonVo&lt;User&gt; resp = restTemplate.getForObject(url + <span class="string">&quot;/user/queryById/&quot;</span> + id, CommonVo.class);</span><br><span class="line">        <span class="keyword">return</span> resp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æœåŠ¡é™çº§çš„æ–¹æ³•ï¼Œè¿”å›æç¤ºä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">queryByIdFallback</span><span class="params">(Long id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonVo</span>&lt;&gt;(<span class="number">400</span>,<span class="string">&quot;æŠ±æ­‰ï¼Œç½‘ç»œæ‹¥å µï¼Œè¯·ç¨åå†è¯•ï¼ï¼ï¼&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é»˜è®¤æœåŠ¡é™çº§æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">defaultFallback</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonVo</span>&lt;&gt;(<span class="number">400</span>,<span class="string">&quot;ä¸­å›½ç§»åŠ¨æé†’æ‚¨ï¼Œä½ è¯·æ±‚çš„æœåŠ¡å¤ªæ‹¥å µï¼Œè¯·ç¨åå†è¯•&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><blockquote><ul><li>åœ¨controllerä¸Šæ·»åŠ @DefaultPropertiesï¼Œå¹¶æŒ‡å®šè¯¥æ³¨è§£çš„å±æ€§defaultFallbackçš„å€¼ä¸ºé»˜è®¤æœåŠ¡é™çº§æ–¹æ³•å</li><li>æ³¨é‡Šæ‰åŸæ¥çš„//@HystrixCommand(fallbackMethod = â€œqueryByIdFallbackâ€) // å£°æ˜æœåŠ¡é™çº§çš„å¤„ç†æ–¹æ³•</li><li>ä½†ä¾ç„¶éœ€è¦æ·»åŠ  @HystrixCommandï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•éœ€è¦Hystrixæä¾›æœåŠ¡é™çº§åŠŸèƒ½</li><li>ç¼–å†™é»˜è®¤æœåŠ¡é™çº§æ–¹æ³•</li><li>è¢«@DefaultPropertiesä¿®é¥°çš„Controllerçš„æ‰€æœ‰æ–¹æ³•çš„è¿”å›å€¼ç±»å‹å¿…é¡»è¦ä¸defaultFallbackçš„è¿”å›å€¼ç±»å‹ä¸€è‡´ã€‚å‚æ•°å¯ä»¥ä¸ä¸€è‡´ã€‚</li></ul></blockquote><h2 id="25-è¶…æ—¶è®¾ç½®"><a class="markdownIt-Anchor" href="#25-è¶…æ—¶è®¾ç½®"></a> 2.5ã€è¶…æ—¶è®¾ç½®</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯·æ±‚è¶…æ—¶1ç§’åï¼Œä¼šè§¦å‘æœåŠ¡é™çº§ï¼Œè¿™ä¸ªæ—¶é—´å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ã€‚</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hystrix:</span> </span><br><span class="line"><span class="attr">command:</span> </span><br><span class="line"><span class="attr">default:</span> </span><br><span class="line"><span class="attr">execution:</span> </span><br><span class="line"><span class="attr">isolation:</span> </span><br><span class="line"><span class="attr">thread:</span> </span><br><span class="line"><span class="attr">timeoutInMilliseconds:</span> <span class="number">2000</span> <span class="comment"># å•ä½æ˜¯ms é»˜è®¤è¯·æ±‚è¶…æ—¶æ—¶é—´æ˜¯1000ms</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå€¼ä¼šä½œç”¨äºå…¨å±€æ‰€æœ‰æ–¹æ³•ã€‚</p><h2 id="26-æµ‹è¯•è¶…æ—¶è®¾ç½®"><a class="markdownIt-Anchor" href="#26-æµ‹è¯•è¶…æ—¶è®¾ç½®"></a> 2.6ã€æµ‹è¯•è¶…æ—¶è®¾ç½®</h2><h5 id="261-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#261-ä¿®æ”¹é…ç½®æ–‡ä»¶"></a> 2.6.1ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</h5><p>å°†ä¸Šé¢çš„è¶…æ—¶è®¾ç½®åŠ å…¥åˆ°consumerçš„é…ç½®æ–‡ä»¶ä¸­</p><h5 id="262-ä¿®æ”¹controller"><a class="markdownIt-Anchor" href="#262-ä¿®æ”¹controller"></a> 2.6.2ã€ä¿®æ”¹Controller</h5><p>ä¿®æ”¹consumerè°ƒç”¨çš„æœåŠ¡å‹å¾®æœåŠ¡çš„controllerï¼Œæ¨¡æ‹Ÿè¶…æ—¶2ç§’çš„åœºæ™¯ï¼Œè®©å®ƒç¡ä¸¤ç§’å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;queryById/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      Thread.sleep(<span class="number">2000</span>); <span class="comment">//ç¡çœ 2ç§’</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.queryById(id);</span><br><span class="line">    <span class="keyword">if</span> (user==<span class="literal">null</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonVo</span>&lt;&gt;(<span class="number">400</span>,<span class="string">&quot;æ•°æ®åº“ä¸­æš‚æ— æ­¤æ•°æ®&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonVo</span>&lt;User&gt;(<span class="number">200</span>,<span class="string">&quot;OK&quot;</span>,user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="263-å¯åŠ¨æœåŠ¡"><a class="markdownIt-Anchor" href="#263-å¯åŠ¨æœåŠ¡"></a> 2.6.3ã€å¯åŠ¨æœåŠ¡</h5><h5 id="264-è®¿é—®"><a class="markdownIt-Anchor" href="#264-è®¿é—®"></a> 2.6.4ã€è®¿é—®</h5><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220119154332800.png" alt="image-20220119154332800" /></p><h2 id="27-æœåŠ¡ç†”æ–­"><a class="markdownIt-Anchor" href="#27-æœåŠ¡ç†”æ–­"></a> 2.7ã€æœåŠ¡ç†”æ–­</h2><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­åº”ç”¨æœåŠ¡ç†”æ–­ï¼ŒæœåŠ¡è°ƒç”¨æ–¹å¯ä»¥è‡ªå·±è¿›è¡Œåˆ¤æ–­å“ªäº›æœåŠ¡ååº”æ…¢æˆ–å­˜åœ¨å¤§é‡è¶…æ—¶ï¼Œå¯ä»¥é’ˆå¯¹è¿™äº›æœåŠ¡è¿›è¡Œä¸»åŠ¨ç†”æ–­ï¼Œé˜²æ­¢æ•´ä¸ªç³»ç»Ÿè¢«æ‹–å®ã€‚</p><p>Hystrixçš„ç†”æ–­æœºåˆ¶ï¼Œå¯ä»¥å®ç°å¼¹æ€§å®¹é”™ï¼›å½“æœåŠ¡è¯·æ±‚æƒ…å†µå¥½è½¬ä¹‹åï¼Œè‡ªåŠ¨é‡è¿ã€‚æœåŠ¡æ— æ³•å“åº”æ—¶ï¼Œé€šè¿‡æ–­è·¯çš„æ–¹å¼ï¼Œå°†åç»­è¯·æ±‚ç›´æ¥æ‹’ç»ï¼Œä¸€æ®µæ—¶é—´ï¼ˆé»˜è®¤5ç§’ï¼‰åï¼Œå…è®¸éƒ¨åˆ†è¯·æ±‚é€šè¿‡ï¼Œå¦‚æœè¿™éƒ¨åˆ†è¯·æ±‚èƒ½è°ƒç”¨æˆåŠŸï¼Œåˆ™å›åˆ°æ–­è·¯å™¨å…³é—­çŠ¶æ€æ­£å¸¸æ¥æ”¶æ‰€æœ‰æœåŠ¡è¯·æ±‚ï¼Œå¦åˆ™ç»§ç»­æ‰“å¼€ï¼Œæ‹’ç»æ‰€æœ‰æœåŠ¡è¯·æ±‚ã€‚</p><p><strong>ç†”æ–­å™¨çš„ä¸‰ä¸ªçŠ¶æ€ï¼šå…³é—­ï¼ˆé»˜è®¤ï¼‰ã€å¼€å¯ã€åŠå¼€</strong></p><h5 id="271-æœåŠ¡ç†”æ–­å™¨çš„æ‰§è¡Œè¿‡ç¨‹"><a class="markdownIt-Anchor" href="#271-æœåŠ¡ç†”æ–­å™¨çš„æ‰§è¡Œè¿‡ç¨‹"></a> 2.7.1ã€æœåŠ¡ç†”æ–­å™¨çš„æ‰§è¡Œè¿‡ç¨‹</h5><p><strong>ç†”æ–­å™¨çš„æ‰§è¡Œè¿‡ç¨‹ï¼š</strong></p><blockquote><p>1ã€é»˜è®¤æ˜¯å…³é—­çš„çŠ¶æ€</p><p>2ã€å½“å¤±è´¥çš„è¯·æ±‚æ•°é‡è¾¾åˆ°äº†é˜ˆå€¼**ï¼ˆè¯·æ±‚æ¬¡æ•°20æ¬¡ä»¥ä¸Šï¼Œå…¶ä¸­å¤±è´¥çš„è¯·æ±‚è¾¾åˆ°50%ä»¥ä¸Šï¼‰**ï¼Œç†”æ–­å™¨ä¼šæ‰“å¼€ï¼Œå°†æœåŠ¡é™çº§ï¼Œå½“å‰æœåŠ¡æ‹’ç»æ‰€æœ‰è¯·æ±‚</p><p>3ã€ç†”æ–­å™¨å¼€å¯5ç§’ä¹‹åï¼Œç†”æ–­å™¨è‡ªåŠ¨å˜æˆåŠå¼€çŠ¶æ€ï¼ŒåŠå¼€çŠ¶æ€ä¸‹ï¼Œå…è®¸éƒ¨åˆ†è¯·æ±‚è®¿é—®ï¼Œå¦‚æœèƒ½å¤Ÿæ­£å¸¸è®¿é—®ï¼Œå°±è¿›å…¥å…³é—­çŠ¶æ€ï¼Œå¦‚æœä¸èƒ½ï¼Œå°±åˆè¿›å…¥å¼€å¯çŠ¶æ€ï¼Œç­‰å†è¿‡5ç§’ï¼Œåˆå˜æˆåŠå¼€çŠ¶æ€ï¼Œä¸€æ¬¡åˆä¸€æ¬¡çš„å°è¯•ã€‚</p><p>4ã€è‡ªåŠ¨æ‰“å¼€ã€è‡ªåŠ¨é‡è¿ã€è‡ªåŠ¨å…³é—­</p></blockquote><h5 id="272-æµ‹è¯•ç†”æ–­å™¨çš„ç°è±¡"><a class="markdownIt-Anchor" href="#272-æµ‹è¯•ç†”æ–­å™¨çš„ç°è±¡"></a> 2.7.2ã€æµ‹è¯•ç†”æ–­å™¨çš„ç°è±¡</h5><h6 id="2721-ä¿®æ”¹consumerçš„controller"><a class="markdownIt-Anchor" href="#2721-ä¿®æ”¹consumerçš„controller"></a> 2.7.2.1ã€ä¿®æ”¹consumerçš„controller</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;consumer&quot;)</span></span><br><span class="line"><span class="meta">@DefaultProperties(defaultFallback = &quot;defaultFallback&quot;)</span> <span class="comment">//æŒ‡å®šé»˜è®¤æœåŠ¡é™çº§æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DiscoveryClient discoveryClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;queryById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@HystrixCommand</span></span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line"> <span class="comment">// æ·»åŠ åˆ¤æ–­ï¼Œæ¯æ¬¡è¯·æ±‚å‚æ•°ä¸º1 ï¼Œéƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œè¡¨ç¤ºè¯·æ±‚å¤±è´¥</span></span><br><span class="line">        <span class="keyword">if</span> (id == <span class="number">1L</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;å¤ªå¿™äº†&quot;</span>); <span class="comment">//æ³¨æ„è¿™éƒ¨åˆ†</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ServiceInstance</span> <span class="variable">serviceInstance</span> <span class="operator">=</span> discoveryClient.getInstances(<span class="string">&quot;User-Service&quot;</span>).get(<span class="number">0</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">hostName</span> <span class="operator">=</span> serviceInstance.getHost(); <span class="comment">// è·å–ä¸»æœºåç§°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">hostPort</span> <span class="operator">=</span> serviceInstance.getPort(); <span class="comment">//è·å–ç«¯å£</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://&quot;</span>+hostName+<span class="string">&quot;:&quot;</span>+hostPort; <span class="comment">//æ‹¼æ¥è¿œç¨‹è°ƒç”¨åœ°å€</span></span><br><span class="line">        CommonVo&lt;User&gt; resp = restTemplate.getForObject(url + <span class="string">&quot;/user/queryById/&quot;</span> + id, CommonVo.class);</span><br><span class="line">        <span class="keyword">return</span> resp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é»˜è®¤æœåŠ¡é™çº§æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">defaultFallback</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonVo</span>&lt;&gt;(<span class="number">400</span>,<span class="string">&quot;ä¸­å›½ç§»åŠ¨æé†’æ‚¨ï¼Œä½ è¯·æ±‚çš„æœåŠ¡å¤ªæ‹¥å µï¼Œè¯·ç¨åå†è¯•&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="2722-é‡å¯å¾®æœåŠ¡"><a class="markdownIt-Anchor" href="#2722-é‡å¯å¾®æœåŠ¡"></a> 2.7.2.2ã€é‡å¯å¾®æœåŠ¡</h6><h6 id="2723-æµ‹è¯•è¯·æ±‚"><a class="markdownIt-Anchor" href="#2723-æµ‹è¯•è¯·æ±‚"></a> 2.7.2.3ã€æµ‹è¯•è¯·æ±‚</h6><p>å…ˆå°†å‚æ•°ä¸º1çš„è¯·æ±‚ï¼Œ<strong>è¯·æ±‚20æ¬¡ï¼Œç”±äºæµ‹è¯•ä»£ç ä¸­çš„ifï¼Œä¼šå¯¼è‡´æœåŠ¡é™çº§ï¼Œå¤±è´¥20æ¬¡ï¼Œæ­¤æ—¶Hystrixä¾¿ä¼šå¼€å¯ç†”æ–­å™¨</strong></p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220119193222073.png" alt="image-20220119193222073" /></p><p>ç†”æ–­å™¨å¼€å¯çš„<strong>5så†…</strong>æ¥ç€å†è¯·æ±‚ç›¸åŒåœ°å€ï¼Œæºå¸¦å‚æ•°ä¸º2çš„è¯·æ±‚ï¼Œä¼šå‘ç°ï¼Œæ— æ³•è®¿é—®ï¼Œä¹Ÿå‡ºç°äº†æœåŠ¡é™çº§</p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220119193157467.png" alt="image-20220119193157467" /></p><p>è€Œ<strong>5så</strong>å†è®¿é—®ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®ï¼Œå› ä¸ºæ­¤æ—¶ç†”æ–­å™¨å·²ç»è¿›å…¥äº†åŠå¼€çŠ¶æ€ï¼Œå…è®¸éƒ¨åˆ†è®¿é—®ã€‚</p><p><strong>æ³¨æ„ï¼š</strong></p><blockquote><p>ç†”æ–­å™¨ä»å¼€å¯çŠ¶æ€åˆ°åŠå¼€çŠ¶æ€è¿™æ®µæ—¶é—´é»˜è®¤5sã€‚å³5såä¼šé‡æ–°è¿æ¥ï¼Œå¹¶ç­‰å¾…ä¸‹ä¸€æ¬¡è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚èƒ½é€šè¿‡ï¼Œåˆ™ä»åŠå¼€çŠ¶æ€å˜ä¸ºå…³é—­çŠ¶æ€ã€‚å¦åˆ™åˆè¿›å…¥å¼€å¯ä¸åŠå¼€çš„å¾ªç¯ã€‚</p></blockquote><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220119192103189.png" alt="image-20220119192103189" /></p><p>å½“å‚æ•°ä¸º2çš„è¯·æ±‚è®¿é—®æˆåŠŸåï¼Œç†”æ–­å™¨ä¼šè¿›å…¥å…³é—­çŠ¶æ€ï¼Œæ­¤æ—¶æ‰€æœ‰è¯·æ±‚éƒ½å¯ä»¥è®¿é—®ã€‚</p><p>**æ³¨æ„ï¼š**ä»¥ä¸Šæµ‹è¯•ä¸ºäº†æ¨¡æ‹Ÿç†”æ–­å™¨å¼€å¯çš„åœºæ™¯ï¼Œä»£ç ä¸­å†™æ­»äº†é”™è¯¯ï¼Œæ‰€ä»¥å†æ¬¡è®¿é—®å‚æ•°1ï¼Œä¾æ—§æ˜¯æ— æ³•è®¿é—®çš„ï¼Œå§‹ç»ˆæŠ›å‡ºå¼‚å¸¸è¿›å…¥é»˜è®¤çš„æœåŠ¡é™çº§å¤„ç†ã€‚</p><h5 id="273-æœåŠ¡ç†”æ–­çš„å‚æ•°"><a class="markdownIt-Anchor" href="#273-æœåŠ¡ç†”æ–­çš„å‚æ•°"></a> 2.7.3ã€æœåŠ¡ç†”æ–­çš„å‚æ•°</h5><p>å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hystrix:</span> </span><br><span class="line"><span class="attr">command:</span> </span><br><span class="line"><span class="attr">default:</span> </span><br><span class="line"><span class="attr">execution:</span> </span><br><span class="line"><span class="attr">isolation:</span> </span><br><span class="line"><span class="attr">thread:</span> </span><br><span class="line"><span class="attr">timeoutInMilliseconds:</span> <span class="number">2000</span> <span class="comment">#æœåŠ¡é™çº§è¶…æ—¶æ—¶é—´ </span></span><br><span class="line">       <span class="attr">circuitBreaker:</span> </span><br><span class="line">        <span class="attr">errorThresholdPercentage:</span> <span class="number">50</span> <span class="comment"># è§¦å‘ç†”æ–­é”™è¯¯æ¯”ä¾‹é˜ˆå€¼ï¼Œé»˜è®¤å€¼50% </span></span><br><span class="line">        <span class="attr">sleepWindowInMilliseconds:</span> <span class="number">10000</span> <span class="comment"># ç†”æ–­åä¼‘çœ æ—¶é•¿ï¼Œé»˜è®¤å€¼5ç§’ </span></span><br><span class="line">        <span class="attr">requestVolumeThreshold:</span> <span class="number">10</span> <span class="comment"># ç†”æ–­è§¦å‘æœ€å°è¯·æ±‚æ¬¡æ•°ï¼Œé»˜è®¤å€¼æ˜¯20æ¬¡</span></span><br></pre></td></tr></table></figure><p>å‚æ•°çš„è®¾ç½®é¡¹ï¼Œå¯ä»¥å‚è€ƒ<strong>HystrixCommandProperties</strong>ç±»ã€‚</p><p><img src="https://gitee.com/superAliang/pic-go-imges/raw/master/SpirngCloud_bill/img/image-20220119194249345.png" alt="image-20220119194249345" /></p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡ä¸»è¦è®²è¿°SpringCloudä¸­hystrixç»„ä»¶çš„ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œä»¥åŠåœ¨é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®å‚æ•°åˆ—ä¸¾</summary>
    
    
    
    <category term="åˆ†å¸ƒå¼æ²»ç†" scheme="https://blog.kakar.top/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B2%BB%E7%90%86/"/>
    
    
    <category term="Hystrix" scheme="https://blog.kakar.top/tags/Hystrix/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloudç»„ä»¶å­¦ä¹ ä¹‹Eureka</title>
    <link href="https://blog.kakar.top/posts/a74d913e.html"/>
    <id>https://blog.kakar.top/posts/a74d913e.html</id>
    <published>2023-06-11T03:46:41.000Z</published>
    <updated>2023-06-11T03:46:41.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="springcloudç»„ä»¶å­¦ä¹ ç¬”è®°ç³»åˆ—"><a class="markdownIt-Anchor" href="#springcloudç»„ä»¶å­¦ä¹ ç¬”è®°ç³»åˆ—"></a> SpringCloudç»„ä»¶å­¦ä¹ ç¬”è®°ç³»åˆ—</h1><blockquote><p><a href="">ã€SpringCloudç»„ä»¶å­¦ä¹ ç¬”è®°ç³»åˆ—ã€‘ï¼ˆ1ï¼‰Eurekaç»„ä»¶</a></p><p><a href="">ã€SpringCloudç»„ä»¶å­¦ä¹ ç¬”è®°ç³»åˆ—ã€‘ï¼ˆ2ï¼‰Hystrixç»„ä»¶</a></p><p><a href="">ã€SpringCloudç»„ä»¶å­¦ä¹ ç¬”è®°ç³»åˆ—ã€‘ï¼ˆ3ï¼‰OpenFeignç»„ä»¶</a></p><p><a href="">ã€SpringCloudç»„ä»¶å­¦ä¹ ç¬”è®°ç³»åˆ—ã€‘ï¼ˆ4ï¼‰Gatewayç»„ä»¶</a></p><p><a href="">ã€SpringCloudç»„ä»¶å­¦ä¹ ç¬”è®°ç³»åˆ—ã€‘ï¼ˆ5ï¼‰Configç»„ä»¶</a></p></blockquote><p>å®Œæ•´ä»£ç å·²åœ¨Githubå¼€æº:<a href="https://github.com/Aliang99/SpringCloud_Bill">è®°è´¦demo</a></p><h1 id="0-ç¯å¢ƒè¯´æ˜ä»¥åŠæ¶æ„å›¾"><a class="markdownIt-Anchor" href="#0-ç¯å¢ƒè¯´æ˜ä»¥åŠæ¶æ„å›¾"></a> 0ã€ç¯å¢ƒè¯´æ˜ä»¥åŠæ¶æ„å›¾</h1><p><strong>ç¯å¢ƒï¼š</strong></p><blockquote><p>â˜•ï¸JDKï¼š11</p><p>ğŸ”£Mavenï¼š3.8.2</p><p>ğŸ‘¢SpringBootï¼š2.3.2.RELEASE</p><p>â˜ï¸SpringCloudï¼šHoxton.SR1</p><p>ğŸ°Eurekaï¼š2.2.1.RELEASE</p><p>ğŸ–Hystrixï¼š2.2.1.RELEASE</p><p>âš–ï¸Ribbonï¼š2.2.1.RELEASE</p><p>â™»ï¸Feignï¼š2.2.1.RELEASE</p><p>ğŸŒŒGatewayï¼š2.2.1.RELEASE</p><p>ğŸ”©Configï¼š2.2.1.RELEASE</p><p>ğŸšŒBusï¼š2.2.1.RELEASE</p><p>ğŸ“šMySQLï¼š8.0.19</p><p>ğŸ“TK-MyBatisï¼š2.1.5</p><p>âœ‚ï¸Lombokï¼š1.18.12</p><p>ğŸƒMaven-Pluginï¼š2.6.2</p><p>ğŸ’»IDEAï¼š2021.3</p><p>ğŸ¥…Chromeï¼š97.0.4692.71</p><p>ğŸ’»Windowsï¼šwin10 å®¶åº­ç‰ˆ 19042</p></blockquote><p><strong>SpringCloud ä½“ç³»æ¶æ„å›¾</strong></p><p><img src="img.png" alt="img.png" /></p><h1 id="1-springcloud-netflix-eurekaç»„ä»¶çš„é…ç½®ä¸åº”ç”¨"><a class="markdownIt-Anchor" href="#1-springcloud-netflix-eurekaç»„ä»¶çš„é…ç½®ä¸åº”ç”¨"></a> 1ã€SpringCloud Netflix Eurekaç»„ä»¶çš„é…ç½®ä¸åº”ç”¨</h1><p>Eurekaä¸»è¦ç”¨äºæœåŠ¡çš„æ³¨å†Œä»¥åŠå‘ç°ï¼Œå¤šä¸ªå¾®æœåŠ¡ä½¿ç”¨åŒä¸€ä¸ªæœåŠ¡åç§°ï¼Œæ³¨å†Œä¸ºé›†ç¾¤ã€‚</p><p>å¤šä¸ªeurekaä¹Ÿå¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªæœåŠ¡åç§°ï¼Œå½¢æˆæ³¨å†Œé›†ç¾¤ï¼Œè¾¾æˆé«˜å¯ç”¨ç›®çš„ã€‚</p><h2 id="11-é¦–å…ˆåˆ›å»ºçˆ¶å·¥ç¨‹"><a class="markdownIt-Anchor" href="#11-é¦–å…ˆåˆ›å»ºçˆ¶å·¥ç¨‹"></a> 1.1ã€é¦–å…ˆåˆ›å»ºçˆ¶å·¥ç¨‹</h2><p><strong>åç§°ï¼šSpringCloudeDemo</strong></p><h5 id="111-ä¿®æ”¹package"><a class="markdownIt-Anchor" href="#111-ä¿®æ”¹package"></a> 1.1.1ã€ä¿®æ”¹package</h5><p>æŒ‡å®špomæ–‡ä»¶ä¸­packageç±»å‹ä¸ºPOM</p><h5 id="112-ç¼–å†™dependencymanagementæ ‡ç­¾-é‡ç‚¹"><a class="markdownIt-Anchor" href="#112-ç¼–å†™dependencymanagementæ ‡ç­¾-é‡ç‚¹"></a> 1.1.2ã€ç¼–å†™dependencyManagementæ ‡ç­¾ <strong>(é‡ç‚¹)</strong></h5><h5 id="113-å¯¼å…¥ä¾èµ–"><a class="markdownIt-Anchor" href="#113-å¯¼å…¥ä¾èµ–"></a> 1.1.3ã€å¯¼å…¥ä¾èµ–</h5><p>å¯¼å…¥spring-boot-dependenciesä¾èµ–ï¼ŒæŒ‡å®štypeä¸ºPOMï¼ŒScopeä¸ºimport <strong>ï¼ˆé‡ç‚¹ï¼‰</strong></p><h5 id="114-pomæ–‡ä»¶å†…å®¹"><a class="markdownIt-Anchor" href="#114-pomæ–‡ä»¶å†…å®¹"></a> 1.1.4ã€pomæ–‡ä»¶å†…å®¹</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aliang<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringCloudDemo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span>  <span class="comment">&lt;!-- ä¿®æ”¹æ‰“åŒ…æ–¹å¼ä¸ºpom,è¡¨ç¤ºè¯¥å·¥ç¨‹æ˜¯ä¸€ä¸ªèšåˆå·¥ç¨‹ï¼Œå³çˆ¶å·¥ç¨‹--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring.boot.version</span>&gt;</span>2.3.2.RELEASE<span class="tag">&lt;/<span class="name">spring.boot.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>Hoxton.SR1<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper.starter.version</span>&gt;</span>2.1.5<span class="tag">&lt;/<span class="name">mapper.starter.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>8.0.19<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å®šä¹‰ä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å®šä¹‰springbootä¾èµ–--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- ç”¨äºä¸ºå·²ç»ç»§æ‰¿äº†çˆ¶ç±»çš„é¡¹ç›® å¯¼å…¥å…¶å®ƒä¾èµ–æä¾›æœåŠ¡ å¦‚ï¼šspring-boot-starter-webç­‰ç­‰å¯åŠ¨å™¨ï¼Œ</span></span><br><span class="line"><span class="comment">                        å› ä¸ºmavenæ˜¯å•ç»§æ‰¿çš„ï¼Œæ‰€ä»¥å¦‚æœå­é¡¹ç›®å·²ç»æœ‰äº†çˆ¶ä¾èµ–ï¼Œå³parentæ ‡ç­¾ï¼Œé‚£ä¹ˆå°±éœ€è¦importæ¥å¼•å…¥æœªå®šä¹‰åœ¨çˆ¶é¡¹ç›®ä¸­çš„ä¾èµ–ï¼Œå½“ç„¶å‰ææ˜¯è¦ä¸typeæ ‡ç­¾ä¸­çš„pomç»“åˆä½¿ç”¨</span></span><br><span class="line"><span class="comment">                        å°±ä»¥å½“å‰é¡¹ç›®è€Œè¨€ï¼š</span></span><br><span class="line"><span class="comment">                            å¦‚æœæœªæ˜¾å¼å¼•å…¥mysqlä¾èµ–ï¼Œé‚£ä¹ˆmavenä¼šåœ¨scopeä¸ºimportçš„spring-boot-dependenciesä¾èµ–ä¸­,ç»§æ‰¿å·²å®šä¹‰å¥½çš„mysqlä¾èµ–åŠç‰ˆæœ¬å·åœ¨å½“å‰é¡¹ç›®ä½¿ç”¨</span></span><br><span class="line"><span class="comment">                            å¦‚æœæ˜¾å¼å¼•å…¥äº†mysqlä¾èµ–ï¼Œé‚£ä¹ˆå½“å‰é¡¹ç›®å°±ä¼šå‘ç”Ÿç‰ˆæœ¬é‡å†™ï¼Œç”¨è‡ªå·±å¼•å…¥çš„mysqlä¾èµ–è¦†ç›–æ‰importä¾èµ–ä¸­å®šä¹‰çš„mysqlä¾èµ–åŠç‰ˆæœ¬å·ï¼Œå¹¶åº”ç”¨åœ¨å½“å‰é¡¹ç›®ä½¿ç”¨</span></span><br><span class="line"><span class="comment">                            ä¹Ÿå°±æ˜¯ç»§æ‰¿äº†spring-boot-dependenciesä¸­å®šä¹‰çš„æ‰€æœ‰ä¾èµ–ï¼Œå¯ä¾›ä½¿ç”¨ï¼Œå¦‚æœæ˜¾å¼å®šä¹‰äº†å…¶ä¸­ä¸€ä¸ªï¼Œå°±å‘ç”Ÿæ›¿æ¢ï¼Œå°†æ˜¾å¼å®šä¹‰çš„ä½œä¸ºå”¯ä¸€ä¾èµ–ä¾›ä½¿ç”¨</span></span><br><span class="line"><span class="comment">                        å¯¹äºå­é¡¹ç›®è€Œè¨€ï¼š</span></span><br><span class="line"><span class="comment">                            å¯ä»¥ç›´æ¥å¼•ç”¨spring-boot-dependenciesä¸­å®šä¹‰çš„ä¾èµ–ä»¥åŠç‰ˆæœ¬ï¼Œè€Œä¸éœ€è¦è‡ªå·±æŒ‡å®šäº†</span></span><br><span class="line"><span class="comment">                        è¯¥ä½œç”¨åŸŸçš„pomä¸€èˆ¬ä½¿ç”¨åœ¨dependencyManagementä¸­</span></span><br><span class="line"><span class="comment">                        --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!--  å®šä¹‰springCloudä¾èµ–--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å®šä¹‰TkMybatisä¾èµ–--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>tk.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mapper.starter.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- å®šä¹‰mysqlä¾èµ–--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ ä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ·»åŠ lombokä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ·»åŠ mavenæ’ä»¶--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="12-åˆ›å»ºå…¬å…±å¾®æœåŠ¡"><a class="markdownIt-Anchor" href="#12-åˆ›å»ºå…¬å…±å¾®æœåŠ¡"></a> 1.2ã€åˆ›å»ºå…¬å…±å¾®æœåŠ¡</h2><p><strong>åç§°ï¼šSpringCloud-Commons</strong></p><p>è¯¥å¾®æœåŠ¡ä¸»è¦ç”¨äºç»™å…¶å®ƒå¾®æœåŠ¡æä¾›å®ä½“ç±»ã€å“åº”å°è£…ç±»æœåŠ¡ï¼Œå‡å°‘å†—ä½™é‡å¤ä»£ç ï¼Œå…¶å®ƒé‡å¤ä½¿ç”¨çš„ç±»ä¹Ÿå¯ä»¥æ”¾åœ¨è¿™ä¸ªå¾®æœåŠ¡ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åç«¯å“åº”å‰ç«¯çš„å°è£…å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CommonVo</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="keyword">private</span> T obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*æ•°æ®åº“å®ä½“ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="comment">//ç”¨æˆ·å</span></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="comment">//å¯†ç </span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">//å§“å</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//å¹´é¾„</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="comment">//æ€§åˆ«    å–å€¼:  1ç”· 2å¥³</span></span><br><span class="line">    <span class="keyword">private</span> Integer sex;</span><br><span class="line">    <span class="comment">//ç”Ÿæ—¥</span></span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    <span class="comment">//æ³¨å†Œæ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> Date created;</span><br><span class="line">    <span class="comment">//æ›´æ–°æ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> Date updated;</span><br><span class="line">    <span class="comment">//å¤‡æ³¨</span></span><br><span class="line">    <span class="keyword">private</span> String note;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®Œæ¯•åï¼Œä½¿ç”¨Mavenæ‰“åŒ…å¹¶å®‰è£…ï¼Œä¾›å…¶å®ƒå¾®æœåŠ¡ä½¿ç”¨</p><h2 id="13-åˆ›å»ºæœåŠ¡å‹å¾®æœåŠ¡"><a class="markdownIt-Anchor" href="#13-åˆ›å»ºæœåŠ¡å‹å¾®æœåŠ¡"></a> 1.3ã€åˆ›å»ºæœåŠ¡å‹å¾®æœåŠ¡</h2><p><strong>åç§°ï¼šSpringCloud-User-8001</strong></p><h5 id="131-pomæ–‡ä»¶å¤„ç†"><a class="markdownIt-Anchor" href="#131-pomæ–‡ä»¶å¤„ç†"></a> 1.3.1ã€pomæ–‡ä»¶å¤„ç†</h5><p>pomæ–‡ä»¶ä¸­parentæ ‡ç­¾æŒ‡å®šä¸ºçˆ¶å·¥ç¨‹ï¼Œå¹¶å¼•å…¥æ‰€éœ€çš„ä¾èµ–åŒ…ï¼Œä»¥åŠ<strong>å…¬å…±å¾®æœåŠ¡</strong>çš„å¼•å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliang<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringCloudDemo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ·»åŠ eurekaå®¢æˆ·ç«¯ä¾èµ–</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="132-å¯åŠ¨ç±»"><a class="markdownIt-Anchor" href="#132-å¯åŠ¨ç±»"></a> 1.3.2ã€å¯åŠ¨ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span> <span class="comment">//å½“å‰å¾®æœåŠ¡åŠ å…¥æ³¨å†Œä¸­å¿ƒï¼Œä½œä¸ºå®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringCloud_User_8001_Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringCloud_User_8001_Application.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="133-é…ç½®æ–‡ä»¶å¤„ç†"><a class="markdownIt-Anchor" href="#133-é…ç½®æ–‡ä»¶å¤„ç†"></a> 1.3.3ã€é…ç½®æ–‡ä»¶å¤„ç†</h5><p>é…ç½®æ–‡ä»¶æŒ‡å®šç«¯å£ã€DataSourceã€Eurekaé…ç½®ä¿¡æ¯ç­‰ <strong>ï¼ˆé‡ç‚¹ï¼‰</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8001</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springcloud?serverTimezone=GMT%2B8</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">111111</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">User-Service</span> <span class="comment"># ç”¨äºæ ‡è¯†å•ä¸ªæˆ–å¤šä¸ªåŒä¸€ç±»å‹çš„æœåŠ¡</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:10086/eureka</span></span><br><span class="line">    <span class="comment"># register-with-eurekaå’Œfetch-registry é»˜è®¤æ˜¯true,æ‰€ä»¥ä¸ç”¨è®¾ç½®</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">ip-address:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h5 id="134-ç¼–å†™dao"><a class="markdownIt-Anchor" href="#134-ç¼–å†™dao"></a> 1.3.4ã€ç¼–å†™dao</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;User&gt; &#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨TkMybatisçš„å†…ç½®æ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="135-ç¼–å†™service"><a class="markdownIt-Anchor" href="#135-ç¼–å†™service"></a> 1.3.5ã€ç¼–å†™service</h5><p>ç¼–å†™serviceè°ƒç”¨daoæ¥å£ï¼ŒæŸ¥è¯¢æˆ–ä¿®æ”¹æ•°æ®</p><p><strong>æ¥å£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    User <span class="title function_">queryById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">    Integer <span class="title function_">insertUser</span><span class="params">(User user)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>å®ç°ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">IUserService</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">queryById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.selectByPrimaryKey(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">insertUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.insert(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="136-ç¼–å†™controller"><a class="markdownIt-Anchor" href="#136-ç¼–å†™controller"></a> 1.3.6ã€ç¼–å†™controller</h5><p>åˆ›å»ºcontrollerï¼Œç¼–å†™ å¯¹æ¶ˆè´¹å‹å¼€æ”¾çš„è¿œç¨‹è°ƒç”¨ ä¸šåŠ¡æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IUserService userService;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;queryById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.queryById(id);</span><br><span class="line">        <span class="keyword">if</span> (user==<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonVo</span>&lt;&gt;(<span class="number">400</span>,<span class="string">&quot;æ•°æ®åº“ä¸­æš‚æ— æ­¤æ•°æ®&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonVo</span>&lt;User&gt;(<span class="number">200</span>,<span class="string">&quot;OK&quot;</span>,user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¥æ”¶ç”¨æˆ·ä¿¡æ¯ï¼Œæ–°å¢ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;insertUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;Integer&gt; <span class="title function_">insertUser</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">integer</span> <span class="operator">=</span> userService.insertUser(user);</span><br><span class="line">        <span class="keyword">if</span> (integer!=<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonVo</span>&lt;&gt;(<span class="number">400</span>,<span class="string">&quot;æ’å…¥å¤±è´¥&quot;</span>,<span class="number">0</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonVo</span>&lt;&gt;(<span class="number">200</span>,<span class="string">&quot;ok&quot;</span>,<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="14-åˆ›å»ºæ¶ˆè´¹å‹å¾®æœåŠ¡"><a class="markdownIt-Anchor" href="#14-åˆ›å»ºæ¶ˆè´¹å‹å¾®æœåŠ¡"></a> 1.4ã€åˆ›å»ºæ¶ˆè´¹å‹å¾®æœåŠ¡</h2><p><strong>åç§°ï¼šSpringCloud-Consumer-User-80</strong></p><h5 id="141-pomæ–‡ä»¶å¤„ç†"><a class="markdownIt-Anchor" href="#141-pomæ–‡ä»¶å¤„ç†"></a> 1.4.1ã€pomæ–‡ä»¶å¤„ç†</h5><p>pomæ–‡ä»¶ä¸­parentæ ‡ç­¾æŒ‡å®šä¸ºçˆ¶å·¥ç¨‹ï¼Œå¹¶å¼•å…¥æ‰€éœ€çš„ä¾èµ–åŒ…ï¼Œä»¥åŠå…¬å…±å¾®æœåŠ¡çš„å¼•å…¥ï¼Œé‡ç‚¹åœ¨äºeurekaçš„clientä¾èµ–åŒ…ï¼Œå½“å‰å¾®æœåŠ¡æ˜¯æ³¨å†ŒæœåŠ¡çš„å®¢æˆ·ç«¯ã€‚</p><p>çˆ¶å·¥ç¨‹å¼•å…¥å‚è€ƒ3.1</p><p>æ·»åŠ eurekaå®¢æˆ·ç«¯ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="142-å¯åŠ¨ç±»"><a class="markdownIt-Anchor" href="#142-å¯åŠ¨ç±»"></a> 1.4.2ã€å¯åŠ¨ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span><span class="comment">//(exclude= &#123;DataSourceAutoConfiguration.class&#125;) //exclude é¿å…å› å¯¼å…¥çš„å…¶å®ƒæ¨¡å—ä¸­æœ‰ç±»éœ€è¦é“¾æ¥æ•°æ®åº“è€ŒæŠ¥é”™</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringCloud_Consumer_80_Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringCloud_Consumer_80_Application.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="143-é…ç½®æ–‡ä»¶å¤„ç†"><a class="markdownIt-Anchor" href="#143-é…ç½®æ–‡ä»¶å¤„ç†"></a> 1.4.3ã€é…ç½®æ–‡ä»¶å¤„ç†</h5><p>é…ç½®æ–‡ä»¶æŒ‡å®šç«¯å£ã€Eurekaé…ç½®ä¿¡æ¯ç­‰ <strong>ï¼ˆé‡ç‚¹ï¼‰</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:10086/eureka</span> <span class="comment"># æ³¨å†Œåˆ°è¯¥è·¯å¾„çš„Eurekaä¸­</span></span><br><span class="line">    <span class="comment"># register-with-eurekaå’Œfetch-registry é»˜è®¤æ˜¯true,æ‰€ä»¥ä¸ç”¨è®¾ç½®</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">User-Consumer</span> <span class="comment"># æœåŠ¡åç§°</span></span><br></pre></td></tr></table></figure><h5 id="144-ç¼–å†™é…ç½®ç±»"><a class="markdownIt-Anchor" href="#144-ç¼–å†™é…ç½®ç±»"></a> 1.4.4ã€ç¼–å†™é…ç½®ç±»</h5><p>ä½¿ç”¨é…ç½®ç±»ï¼Œåˆ›å»ºRestTemplateå¯¹è±¡ï¼Œç”¨äºè¿œç¨‹è°ƒç”¨å…¶å®ƒå¾®æœåŠ¡æä¾›çš„æ¥å£ <strong>ï¼ˆé‡ç‚¹ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * RestTemplateæ˜¯ SpringBoot æä¾›çš„è®¿é—®è¿œç¨‹æœåŠ¡çš„æ¨¡æ¿</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RestTempConfiguration</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">getRestTemplate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="145-ç¼–å†™controller"><a class="markdownIt-Anchor" href="#145-ç¼–å†™controller"></a> 1.4.5ã€ç¼–å†™controller</h5><p>åˆ›å»ºcontrollerï¼Œå®šä¹‰å…¨å±€å˜é‡å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šå½“å‰æ¶ˆè´¹å‹å¾®æœåŠ¡éœ€è¦æ¶ˆè´¹å“ªä¸ªåœ°å€çš„æœåŠ¡</p><p>ä»£ç éƒ¨åˆ†è§4.7</p><h5 id="146-ç¼–å†™mapping"><a class="markdownIt-Anchor" href="#146-ç¼–å†™mapping"></a> 1.4.6ã€ç¼–å†™mapping</h5><p>ç¼–å†™controllerå†…çš„mappingæ–¹æ³•ï¼Œç»™å‡ºæä¾›ç»™ç”¨æˆ·çš„æ¥å£</p><p>ä»£ç éƒ¨åˆ†è§4.7</p><h5 id="147-è¿œç¨‹è°ƒç”¨"><a class="markdownIt-Anchor" href="#147-è¿œç¨‹è°ƒç”¨"></a> 1.4.7ã€è¿œç¨‹è°ƒç”¨</h5><p>æ–¹æ³•å†…éƒ¨ä½¿ç”¨RestTempalteè°ƒç”¨æœåŠ¡å‹å¾®æœåŠ¡ï¼Œå¹¶è·å–è¿”å›å€¼ï¼Œå†è°ƒç”¨å…¬å…±å¾®æœåŠ¡çš„å°è£…å¯¹è±¡å°è£…ä¿¡æ¯ï¼Œè¿”å›åˆ°å®¢æˆ·ç«¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;consumer&quot;)</span></span><br><span class="line"><span class="meta">@DefaultProperties(defaultFallback = &quot;defaultFallback&quot;)</span> <span class="comment">//æŒ‡å®šé»˜è®¤æœåŠ¡é™çº§æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;queryById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> CommonVo&lt;User&gt; <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line"> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://localhost:8001&quot;</span>; <span class="comment">//æœåŠ¡æä¾›è€…åœ°å€</span></span><br><span class="line">        CommonVo&lt;User&gt; resp = restTemplate.getForObject(url + <span class="string">&quot;/queryById/&quot;</span> + id, CommonVo.class);</span><br><span class="line">        <span class="keyword">return</span> resp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="15-åˆ›å»ºeurekaæ³¨å†Œä¸­å¿ƒå¾®æœåŠ¡"><a class="markdownIt-Anchor" href="#15-åˆ›å»ºeurekaæ³¨å†Œä¸­å¿ƒå¾®æœåŠ¡"></a> 1.5ã€åˆ›å»ºEurekaæ³¨å†Œä¸­å¿ƒå¾®æœåŠ¡</h2><p><strong>åç§°ï¼šSpringCloud-Eureka-Server-10086</strong></p><p>ç”¨äºä¸ºæœåŠ¡å‹åŠæ¶ˆè´¹å‹å¾®æœåŠ¡æä¾›æ³¨å†ŒæœåŠ¡ï¼Œå®ç°æ³¨å†Œçš„å¾®æœåŠ¡å¯ä»¥è¿œç¨‹è°ƒç”¨</p><h5 id="151-pomæ–‡ä»¶å¤„ç†"><a class="markdownIt-Anchor" href="#151-pomæ–‡ä»¶å¤„ç†"></a> 1.5.1ã€pomæ–‡ä»¶å¤„ç†</h5><p>pomæ–‡ä»¶ä¸­parentæ ‡ç­¾æŒ‡å®šä¸ºçˆ¶å·¥ç¨‹ï¼Œå¹¶å¼•å…¥æ‰€éœ€çš„ä¾èµ–åŒ…,é‡ç‚¹åœ¨äºeurekaçš„serverä¾èµ–åŒ…ï¼Œå½“å‰å¾®æœåŠ¡æ˜¯æ³¨å†ŒæœåŠ¡ æœåŠ¡ç«¯</p><p>çˆ¶å·¥ç¨‹å¼•å…¥å‚è€ƒ3.1</p><p>æ·»åŠ eurekaæœåŠ¡ç«¯ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="152-å¯åŠ¨ç±»"><a class="markdownIt-Anchor" href="#152-å¯åŠ¨ç±»"></a> 1.5.2ã€å¯åŠ¨ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span> <span class="comment">//EurekaæœåŠ¡ç«¯æ³¨è§£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringCloud_EurekaServer_10086_Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringCloud_EurekaServer_10086_Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="153-é…ç½®æ–‡ä»¶å¤„ç†"><a class="markdownIt-Anchor" href="#153-é…ç½®æ–‡ä»¶å¤„ç†"></a> 1.5.3ã€é…ç½®æ–‡ä»¶å¤„ç†</h5><p>é…ç½®æ–‡ä»¶æŒ‡å®šç«¯å£ã€Eurekaé…ç½®ä¿¡æ¯ç­‰ <strong>ï¼ˆé‡ç‚¹ï¼‰</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">localhost</span> <span class="comment"># eureka æœåŠ¡ç«¯çš„å®ä¾‹åç§°</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span>  <span class="comment"># ç”³æ˜ä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span> <span class="comment"># ç”³æ˜ä¸æ£€ç´¢æœåŠ¡ï¼Œè‡ªå·±å°±æ˜¯æ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span> <span class="comment"># è®¾ç½® ä¸eurekaäº¤äº’ çš„ æŸ¥è¯¢æœåŠ¡ å’Œ æ³¨å†ŒæœåŠ¡ éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªåœ°å€</span></span><br></pre></td></tr></table></figure><h2 id="16-é›†ç¾¤ç‰ˆeurekaé‡ç‚¹"><a class="markdownIt-Anchor" href="#16-é›†ç¾¤ç‰ˆeurekaé‡ç‚¹"></a> 1.6ã€é›†ç¾¤ç‰ˆEureka(é‡ç‚¹)</h2><h5 id="161-ä¿®æ”¹hostæ–‡ä»¶"><a class="markdownIt-Anchor" href="#161-ä¿®æ”¹hostæ–‡ä»¶"></a> 1.6.1ã€ ä¿®æ”¹HOSTæ–‡ä»¶</h5><p>ä¿®æ”¹HOSTæ–‡ä»¶ï¼Œä½¿å½“å‰æœºå™¨å¯ä»¥æ˜ å°„å¤šä¸ªåœ°å€</p><p>æ‰“å¼€<strong>C:\Windows\System32\drivers\etc\HOSTS</strong>æ–‡ä»¶<br />æ·»åŠ </p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 eureka10086.com</span><br><span class="line">127.0.0.1 eureka10087.com</span><br><span class="line">127.0.0.1 eureka10088.com</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ­¥çš„ç›®çš„åœ¨äºï¼Œé›†ç¾¤ä¸‹çš„Eurekaï¼Œå¯ä»¥ä½¿ç”¨åŸŸåä»£æ›¿ipåœ°å€ï¼Œæœ‰ä¸€ä¸ªæ ‡è¯†ä½œç”¨ã€‚</p><p>åœ¨åœ°å€æ ä¸­å¯ä»¥ä½¿ç”¨åŸŸå+ç«¯å£å·ï¼Œè®¿é—®å¯¹åº”çš„EurekaæœåŠ¡é¡µé¢</p><h5 id="162-æ¨¡æ‹Ÿé›†ç¾¤åœºæ™¯"><a class="markdownIt-Anchor" href="#162-æ¨¡æ‹Ÿé›†ç¾¤åœºæ™¯"></a> 1.6.2ã€æ¨¡æ‹Ÿé›†ç¾¤åœºæ™¯</h5><p>å¤åˆ¶ä¸¤ä»½10086åˆ°10087,10088,æ¨¡æ‹Ÿå¤šå°æœºå™¨ä¸Šçš„Eurekaé›†ç¾¤</p><h5 id="163-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#163-ä¿®æ”¹é…ç½®æ–‡ä»¶"></a> 1.6.3ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</h5><p>ä¿®æ”¹10087ï¼Œ10088é…ç½®æ–‡ä»¶</p><p>10088çš„é…ç½®æ–‡ä»¶åŒä¸‹é¢ä¸€æ ·ï¼ŒæŠŠ10087æ”¹æˆ10088å³å¯ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10087</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">eureka10087.com</span> <span class="comment"># é›†ç¾¤å†™æ³• é¿å…å¤šä¸ªeureka åŒå ,æ˜ å°„çš„eureka10087.com éœ€è¦å†hostæ–‡ä»¶ä¸­æ·»åŠ æ˜ å°„ 127.0.0.1 eureka10087.com</span></span><br><span class="line">    <span class="comment"># hostname: localhost #å•æœºå†™æ³•ï¼š eureka æœåŠ¡ç«¯çš„å®ä¾‹åç§°</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span>  <span class="comment"># ç”³æ˜ä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span> <span class="comment"># ç”³æ˜ä¸æ£€ç´¢æœåŠ¡ï¼Œè‡ªå·±å°±æ˜¯æ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka10086.com:10086/eureka/,http://eureka10088.com:10088/eureka/</span> <span class="comment"># è®¾ç½® ä¸eurekaäº¤äº’ çš„ æŸ¥è¯¢æœåŠ¡ å’Œ æ³¨å†ŒæœåŠ¡ éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªåœ°å€</span></span><br><span class="line">      <span class="comment"># é›†ç¾¤å†™æ³•ï¼šéœ€è¦å°†å½“å‰eurekaç»‘å®šåˆ°å¦ä¸€ä¸ªeurekaåœ°å€</span></span><br></pre></td></tr></table></figure><h5 id="164-ä¿®æ”¹å¯åŠ¨ç±»åç§°"><a class="markdownIt-Anchor" href="#164-ä¿®æ”¹å¯åŠ¨ç±»åç§°"></a> 1.6.4ã€ä¿®æ”¹å¯åŠ¨ç±»åç§°</h5><p>10087å¯åŠ¨ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Eurekaå¯åŠ¨ç±»  å‰ç«¯é¢æ¿è®¿é—®é¡µåœ°å€: localhost:10087/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span> <span class="comment">//å½“å‰å¾®æœåŠ¡åŠ å…¥æ³¨å†Œä¸­å¿ƒï¼Œä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼ŒæœåŠ¡ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringCloud_EurekaServer_10087_Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringCloud_EurekaServer_10087_Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>10088åŒç†ï¼Œä¸å†èµ˜è¿°ã€‚</p><h5 id="165-å¯åŠ¨"><a class="markdownIt-Anchor" href="#165-å¯åŠ¨"></a> 1.6.5ã€å¯åŠ¨</h5><p>å¯åŠ¨10086ï¼Œ10087ï¼Œ10088ï¼Œ8001ï¼Œ80</p><p>æŸ¥çœ‹Eurekaçš„DS Replicasä¸‹ï¼Œå­˜åœ¨å¤šä¸ªEurekaç›¸äº’ç®¡ç†ä¿¡æ¯ï¼Œå³ä¸ºæˆåŠŸ</p><h2 id="17-åˆ›å»ºæœåŠ¡å‹å¾®æœåŠ¡é›†ç¾¤é‡ç‚¹"><a class="markdownIt-Anchor" href="#17-åˆ›å»ºæœåŠ¡å‹å¾®æœåŠ¡é›†ç¾¤é‡ç‚¹"></a> 1.7ã€åˆ›å»ºæœåŠ¡å‹å¾®æœåŠ¡é›†ç¾¤(é‡ç‚¹)</h2><h5 id="171-æ¨¡æ‹Ÿé›†ç¾¤åœºæ™¯"><a class="markdownIt-Anchor" href="#171-æ¨¡æ‹Ÿé›†ç¾¤åœºæ™¯"></a> 1.7.1ã€æ¨¡æ‹Ÿé›†ç¾¤åœºæ™¯</h5><p>å¤åˆ¶8001å¾®æœåŠ¡åˆ°8002ï¼Œ8003</p><h5 id="172-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#172-ä¿®æ”¹é…ç½®æ–‡ä»¶"></a> 1.7.2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</h5><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8002</span> <span class="comment"># ç«¯å£å·</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">User-Service</span> <span class="comment"># å¾®æœåŠ¡åç§°ï¼Œåœ¨Eurekaé¢æ¿é¡µé¢å¯ä»¥æŸ¥çœ‹</span></span><br><span class="line">  <span class="attr">datasource:</span> <span class="comment"># æ•°æ®æº</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springcloud?serverTimezone=GMT%2B8</span> <span class="comment"># mysql8.0ä»¥ä¸Šç‰ˆæœ¬ï¼Œæœ‰ä¸€ä¸ªæ—¶åŒºä¸ä¸€è‡´é—®é¢˜ï¼Œéœ€è¦æ·»åŠ  serverTimezone=GMT%2B8 ===&gt; %2B8 ä¸º +8 UrlEncodeä¹‹åçš„å€¼</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">111111</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span> <span class="comment"># è¡¨ç¤ºæ˜¯å¦å°†è‡ªå·±æ³¨å†Œè¿›Eureka é»˜è®¤ä¸ºtrue</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">true</span> <span class="comment"># è¡¨ç¤ºæ˜¯å¦ä»EurekaServeræŠ“å–å·²æœ‰çš„æ³¨å†Œä¿¡æ¯ï¼Œé»˜è®¤ä¸ºtrueï¼Œå•èŠ‚ç‚¹æ— æ‰€è°“ï¼Œé›†ç¾¤å¿…é¡»è®¾ç½®ä¸ºtrueæ‰èƒ½é…åˆribbonä½¿ç”¨è´Ÿè½½å‡è¡¡</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka10086.com:10086/eureka/,http://eureka10088.com:10088/eureka/,http://eureka10087.com:10087/eureka</span> <span class="comment"># é›†ç¾¤ç‰ˆ æŒ‡å®šå¤šä¸ª</span></span><br><span class="line">      <span class="comment"># å•æœºç‰ˆ æŒ‡å®šä¸€ä¸ªï¼šhttp://localhost:10086/eureka</span></span><br></pre></td></tr></table></figure><p>8003é…ç½®æ–‡ä»¶åœ¨8002åŸºç¡€ä¸Šå°†8002æ”¹æˆ8003å³å¯ã€‚</p><h5 id="173-è·å–ç«¯å£"><a class="markdownIt-Anchor" href="#173-è·å–ç«¯å£"></a> 1.7.3ã€è·å–ç«¯å£</h5><p>åœ¨controllerä¸­å®šä¹‰ç«¯å£çš„å€¼</p><p>@Valueæ³¨è§£ä¼šè‡ªåŠ¨ä»é…ç½®æ–‡ä»¶ä¸­è·å–é…ç½®å¥½çš„ç«¯å£å·</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value(&quot;$&#123;server.port&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String serverPort;</span><br></pre></td></tr></table></figure><h5 id="174-å†æ¬¡ä¿®æ”¹é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#174-å†æ¬¡ä¿®æ”¹é…ç½®æ–‡ä»¶"></a> 1.7.4ã€å†æ¬¡ä¿®æ”¹é…ç½®æ–‡ä»¶</h5><p>ä¿®æ”¹æ¶ˆè´¹å‹å¾®æœåŠ¡çš„é…ç½®æ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span> <span class="comment"># è¡¨ç¤ºæ˜¯å¦å°†è‡ªå·±æ³¨å†Œè¿›Eureka é»˜è®¤ä¸ºtrue</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">true</span> <span class="comment"># è¡¨ç¤ºæ˜¯å¦ä»EurekaServeræŠ“å–å·²æœ‰çš„æ³¨å†Œä¿¡æ¯ï¼Œé»˜è®¤ä¸ºtrueï¼Œå•èŠ‚ç‚¹æ— æ‰€è°“ï¼Œé›†ç¾¤å¿…é¡»è®¾ç½®ä¸ºtrueæ‰èƒ½é…åˆribbonä½¿ç”¨è´Ÿè½½å‡è¡¡</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka10086.com:10086/eureka/,http://eureka10088.com:10088/eureka/,http://eureka10087.com:10087/eureka</span> <span class="comment"># é›†ç¾¤ç‰ˆ æŒ‡å®šå¤šä¸ª</span></span><br><span class="line">      <span class="comment"># å•æœºç‰ˆ æŒ‡å®šä¸€ä¸ªï¼šhttp://localhost:10086/eureka</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">SpringCloud-Consumer-User-80</span></span><br></pre></td></tr></table></figure><h5 id="175-è·å–å¾®æœåŠ¡åç§°"><a class="markdownIt-Anchor" href="#175-è·å–å¾®æœåŠ¡åç§°"></a> 1.7.5ã€è·å–å¾®æœåŠ¡åç§°</h5><p>åœ¨Controllerä¸­æŒ‡å®šå¾®æœåŠ¡åç§°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PaymentController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 8001å¾®æœåŠ¡çš„åœ°å€</span></span><br><span class="line">    <span class="comment">//private static final String USER_URL = &quot;http://localhost:8001&quot;; å•æœºç‰ˆï¼Œå†™æ­»äº†</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//é›†ç¾¤ç‰ˆ ç»™çš„åœ°å€åº”è¯¥æ—¶eurekaä¸­æ³¨å†Œçš„å¾®æœåŠ¡åç§°ï¼Œå¤šä¸ªå¾®æœåŠ¡å…±ç”¨åŒä¸€ä¸ªåç§°ï¼Œåœ°å€å¡«å†™ä¸ºè¯¥åç§°ï¼Œå¹¶ä¸”éœ€è¦åœ¨RestTempConfigurationç±»ä¸­æ·»åŠ RestTemplateçš„è´Ÿè½½å‡è¡¡æ³¨è§£@LoadBalancedï¼Œè¾¾æˆå®ç°äº†å¤šä¸ªç«¯å£çš„è´Ÿè½½å‡è¡¡ç›®çš„</span></span><br><span class="line">    <span class="comment">// ä¸€ä¸ªå¾®æœåŠ¡åç§°ä¸‹å¯ä»¥æœ‰å¤šä¸ªæä¾›æœåŠ¡çš„æœºå™¨  è¿™é‡Œä½¿ç”¨å•æœºçš„å¤šä¸ªç«¯å£ï¼Œæ¨¡æ‹Ÿå¤šå°æœºå™¨ï¼Œè¿œç¨‹è°ƒç”¨æ—¶ï¼Œåªéœ€è¦å…³å¿ƒå¾®æœåŠ¡åç§°ï¼Œä¸å†å…³å¿ƒåœ°å€å’Œç«¯å£å·ï¼ŒEurekaå·²è‡ªåŠ¨æ˜ å°„äº†</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">USER_URL</span> <span class="operator">=</span> <span class="string">&quot;http://User-Service&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate; <span class="comment">// å½“å‰å¾®æœåŠ¡å¯ä»¥ä½¿ç”¨ RestTemplateå¯¹è±¡ ä¸ 8001 é€šä¿¡</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="176-æ·»åŠ è´Ÿè½½å‡è¡¡"><a class="markdownIt-Anchor" href="#176-æ·»åŠ è´Ÿè½½å‡è¡¡"></a> 1.7.6ã€æ·»åŠ è´Ÿè½½å‡è¡¡</h5><p>åœ¨RestTemplateé…ç½®æ–‡ä»¶ä¸­ï¼Œæ·»åŠ @LoadBalancedæ³¨è§£ï¼Œåšè´Ÿè½½å‡è¡¡(é‡ç‚¹)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * RestTemplateæ˜¯ SpringBoot æä¾›çš„è®¿é—®è¿œç¨‹æœåŠ¡çš„æ¨¡æ¿</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RestTempConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@LoadBalanced</span>  <span class="comment">//å¼€å¯è´Ÿè½½å‡è¡¡ï¼Œé»˜è®¤æ˜¯è½®è¯¢ï¼Œå³è¿œç¨‹è°ƒç”¨çš„å¾®æœåŠ¡åç§°ä¸‹æœ‰å¤šå°æœºå™¨ï¼Œè°ƒç”¨æ—¶è½®ç•ªè°ƒç”¨ï¼Œå‡å°æœåŠ¡ç«¯å‹åŠ›</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">getRestTemplate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><blockquote><p>åœ¨ä½¿ç”¨http://localhost/consumer/payment/1 è®¿é—®æ—¶ï¼Œä¼šè½®ç•ªå‡ºç°8001ï¼Œ8002ï¼Œ8003æä¾›æœåŠ¡</p><p>å½“è¯•ç€åœæ‰ä¸€ä¸ªå¾®æœåŠ¡åï¼Œè½®è¯¢ä¼šæŠ¥é”™ï¼Œç†ç”±æ˜¯å½“å‰è½®åˆ°çš„å¾®æœåŠ¡ä¸èƒ½è®¿é—®ï¼Œå¤šæ¬¡åˆ·æ–°ä¾æ—§å¦‚æ­¤ã€‚</p><p>åªæœ‰ç­‰å¾…eurekaè‡ªåŠ¨æŠŠåœæ‰çš„å¾®æœåŠ¡ä»æ³¨å†Œä¸­å¿ƒæ³¨é”€åï¼Œå†è®¿é—®å°±ä¸æŠ¥é”™äº†ï¼Œå‰©ä¸‹çš„ä¸¤ä¸ªå¾®æœåŠ¡ä¾ç„¶å¯ä»¥è½®è¯¢è°ƒç”¨ã€‚ç­‰å¾…çš„æ—¶é—´å¤§æ¦‚90ç§’å·¦å³ã€‚</p></blockquote><p><strong>ä»€ä¹ˆæ˜¯Eurekaçš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Ÿ</strong></p><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒEurekaClientå®šæ—¶å‘EurekaServerå‘é€å¿ƒè·³åŒ…ï¼Œå¦‚æœEurekaServeråœ¨ä¸€å®šæ—¶é—´å†…**ï¼ˆä»ä¸Šä¸€æ¬¡æ”¶åˆ°å¿ƒè·³åŒ…å¼€å§‹è®¡æ—¶ç­‰å¾…90ç§’ï¼‰<strong>æ²¡æœ‰æ”¶åˆ°æŸä¸ªå¾®æœåŠ¡å®ä¾‹çš„å¿ƒè·³ï¼ŒEurekaServerå°†ä¼šæ³¨é”€è¯¥å®ä¾‹ï¼Œæ¯æ¬¡å‘é€å¿ƒè·³åŒ…çš„é—´éš”æ—¶é—´ä¸º</strong>30ç§’**</p><p>ä½†å¦‚æœæ˜¯å½“å‰ç½‘ç»œåˆ†åŒºæ•…éšœï¼Œå¾®æœåŠ¡ä¸EurekaServerä¹‹é—´æ— æ³•æ­£å¸¸é€šä¿¡ï¼Œä»¥ä¸Šè¡Œä¸ºå¯èƒ½å˜å¾—éå¸¸å±é™©äº†ï¼Œå› ä¸ºæœåŠ¡æœ¬èº«æ˜¯å¥åº·çš„ï¼Œå‡ºäºé«˜å¯ç”¨çš„ç›®çš„ï¼Œæ­¤æ—¶æœ¬ä¸åº”è¯¥æ³¨é”€è¿™ä¸ªå¾®æœåŠ¡ã€‚</p><p>äºæ˜¯Eurekaé€šè¿‡è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œæ¥è§£å†³å½“å‰é—®é¢˜ï¼Œå½“å®¢æˆ·æœºå› ä¸ºç½‘ç»œé—®é¢˜ä¸¢å¤±äº†å¤§é‡çš„å¿ƒè·³åŒ…æ—¶ï¼Œä¸æ³¨é”€è¯¥å¾®æœåŠ¡ã€‚æ³¨æ„ï¼šEurekaServeråœ¨æ²¡æœ‰æ”¶åˆ°EurekaClientå¿ƒè·³åŒ…æ—¶ä¼šè§¦å‘è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œæš‚æ—¶ä¸æ³¨é”€ï¼Œå¦‚æœ<strong>90ç§’</strong>å†…æ²¡æœ‰æ”¶åˆ°å¿ƒè·³åŒ…ï¼Œå†æ³¨é”€ã€‚</p><p>è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶çš„è®¾è®¡å“²å­¦å°±æ˜¯å®å¯ä¿ç•™é”™è¯¯çš„æœåŠ¡æ³¨å†Œä¿¡æ¯ï¼Œä¹Ÿä¸ç›²ç›®æ³¨é”€ä»»ä½•å¯èƒ½å¥åº·çš„æœåŠ¡å®ä¾‹ã€‚</p></blockquote><p><strong>è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶å¯åœ¨é…ç½®æ–‡ä»¶é€šè¿‡å‚æ•°å…³é—­ã€‚</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å…³é—­å„ä¸ªEurekaServerä¹‹é—´çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶,EurekaClientåœ¨2000msåæœªè”ç³»ä¸Šå°±è¸¢å‡ºæ³¨å†Œè¡¨</span></span><br><span class="line"><span class="attr">eureka:</span> </span><br><span class="line">  <span class="attr">server:</span> </span><br><span class="line">    <span class="attr">enable-self-preservation:</span> <span class="literal">false</span> <span class="comment"># å…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œä¿è¯ä¸å¯ç”¨æœåŠ¡åŠæ—¶è¢«è¸¢å‡º</span></span><br><span class="line">    <span class="attr">eviction-interval-timer-in-ms:</span> <span class="number">2000</span> <span class="comment">#ä»é»˜è®¤å¿ƒè·³åŒ…ç­‰å¾…æ—¶é—´ 90ç§’ æ”¹æˆ 2ç§’</span></span><br></pre></td></tr></table></figure><p>å…³é—­åï¼Œå†æ‰“å¼€Eurekaé¡µé¢ï¼Œçº¢è‰²çš„å­—è¡¨ç¤ºå·²ç»å…³é—­è‡ªæˆ‘ä¿æŠ¤</p><p><img src="img_1.png" alt="img_1.png" /></p><h2 id="18-æœåŠ¡å‘ç°"><a class="markdownIt-Anchor" href="#18-æœåŠ¡å‘ç°"></a> 1.8ã€æœåŠ¡å‘ç°</h2><h5 id="181-æ³¨å…¥æœåŠ¡å‘ç°ç±»"><a class="markdownIt-Anchor" href="#181-æ³¨å…¥æœåŠ¡å‘ç°ç±»"></a> 1.8.1ã€æ³¨å…¥æœåŠ¡å‘ç°ç±»</h5><p>åœ¨controllerä¸­æ³¨å…¥DiscoveryClient</p><p>æ³¨æ„å¯¼åŒ…ï¼š<code>import org.springframework.cloud.client.discovery.DiscoveryClient;</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨äºæä¾›æœåŠ¡å‘ç°,å¯ä»¥ä½¿ç”¨è¯¥å¯¹è±¡,è·å–Eurekaçš„æœåŠ¡åç§°ã€åœ°å€ã€ç«¯å£ç­‰ä¿¡æ¯,å®ç°åŠ¨æ€çš„è°ƒç”¨è¿œç¨‹æ¥å£ã€‚,æ³¨æ„ï¼Œå¯¼åŒ…æ˜¯springcloudä¸‹çš„</span></span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> DiscoveryClient discoveryClient;</span><br></pre></td></tr></table></figure><h5 id="182-ç¼–å†™mapping"><a class="markdownIt-Anchor" href="#182-ç¼–å†™mapping"></a> 1.8.2ã€ç¼–å†™Mapping</h5><p>ç¼–å†™æ¼”ç¤ºDiscoveryClientå¯¹è±¡ç”¨æ³•çš„mapping</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/user/discovery&quot;)</span> <span class="comment">//discoveryä¿¡æ¯è·å–æµ‹è¯•</span></span><br><span class="line"><span class="keyword">public</span> CommonVo&lt;List&gt; <span class="title function_">discoveryClient</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(<span class="string">&quot;User-Service&quot;</span>); <span class="comment">//æ ¹æ®å¾®æœåŠ¡åœ¨Eurekaæ³¨å†Œçš„åç§°è·å–ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">for</span> (ServiceInstance instance : instances) &#123;</span><br><span class="line">        System.out.println(instance);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonVo</span>&lt;List&gt;(<span class="number">200</span>,<span class="string">&quot;OK&quot;</span>, instances);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="183-å¯åŠ¨ç±»"><a class="markdownIt-Anchor" href="#183-å¯åŠ¨ç±»"></a> 1.8.3ã€å¯åŠ¨ç±»</h5><p>å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableDiscoveryClient</span> <span class="comment">//å¼€å¯æœåŠ¡å‘ç°</span></span><br></pre></td></tr></table></figure><h2 id="19-ribbon"><a class="markdownIt-Anchor" href="#19-ribbon"></a> 1.9ã€Ribbon</h2><h5 id="191-ribbonçš„æ¦‚å¿µ"><a class="markdownIt-Anchor" href="#191-ribbonçš„æ¦‚å¿µ"></a> 1.9.1ã€Ribbonçš„æ¦‚å¿µ</h5><blockquote><p>Ribbonæ˜¯Netflixå‘å¸ƒçš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå®ƒæœ‰åŠ©äºæ§åˆ¶HTTPå’ŒTCPå®¢æˆ·ç«¯çš„è¡Œä¸ºã€‚</p><p>ä¸ºRibboné…ç½®æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨åï¼ŒRibbonå°±å¯<strong>åŸºäºæŸç§è´Ÿè½½å‡è¡¡ç®—æ³•</strong>ï¼Œè‡ªåŠ¨åœ°å¸®åŠ©æœåŠ¡æ¶ˆè´¹è€…å»è¯·æ±‚ã€‚</p><p>Ribboné»˜è®¤ä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šçš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œä¾‹å¦‚è½®è¯¢ã€éšæœºç­‰ã€‚</p><p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä¸ºRibbonå®ç°è‡ªå®šä¹‰çš„è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚</p></blockquote><h5 id="192-ribbonçš„ä½¿ç”¨"><a class="markdownIt-Anchor" href="#192-ribbonçš„ä½¿ç”¨"></a> 1.9.2ã€Ribbonçš„ä½¿ç”¨</h5><p>åœ¨å®é™…ç¯å¢ƒä¸­ï¼Œå¤šä¸ªæœåŠ¡æä¾›å‹å¾®æœåŠ¡å½¢æˆçš„é›†ç¾¤ï¼Œåœ¨æ¥å—åˆ°è®¿é—®æ—¶ï¼Œå„ä¸ªå­æœåŠ¡åº”è¯¥è¦è½®ç•ªå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œä»¥è¾¾æˆè´Ÿè½½å‡è¡¡ç›®çš„ã€‚</p><p>Eurekaä¸­é›†æˆçš„Ribbonå°±å¯ä»¥å®ç°è¯¥åŠŸèƒ½ã€‚</p><p>é¦–å…ˆè¦åœ¨åœ¨restTemplateæ–¹æ³•ä¸Šä½¿ç”¨æ³¨è§£@LoadBalanced</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@LoadBalanced</span> </span><br><span class="line"><span class="keyword">public</span> RestTemplate <span class="title function_">restTemplate</span><span class="params">()</span> &#123; </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºè¿œç¨‹è°ƒç”¨çš„ä»£ç ï¼Œä¹Ÿéœ€è¦åšç›¸åº”çš„ä¿®æ”¹ï¼Œæ ¹æ®æœåŠ¡åç§°å»è°ƒç”¨ï¼ŒRibbonä¼šè‡ªåŠ¨æ ¹æ®è¯¥æœåŠ¡åç§°ä¸‹çš„é›†ç¾¤é€‰æ‹©ä¸€ä¸ªå¾®æœåŠ¡å¤„ç†è¯·æ±‚ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span> </span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123; </span><br><span class="line">      <span class="type">ServiceInstance</span> <span class="variable">serviceInstance</span> <span class="operator">=</span> discoveryClient.getInstances(<span class="string">&quot;User-Service&quot;</span>).get(<span class="number">0</span>);<span class="comment">// æ ¹æ®æœåŠ¡åç§°è·å–æœåŠ¡ä¿¡æ¯</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">hostName</span> <span class="operator">=</span> serviceInstance.getHost(); <span class="comment">// è·å–ä¸»æœºåç§°</span></span><br><span class="line">      <span class="type">int</span> <span class="variable">hostPort</span> <span class="operator">=</span> serviceInstance.getPort(); <span class="comment">//è·å–ç«¯å£</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://&quot;</span>+hostName+<span class="string">&quot;:&quot;</span>+hostPort; <span class="comment">//æ‹¼æ¥è¿œç¨‹è°ƒç”¨åœ°å€</span></span><br><span class="line">      <span class="keyword">return</span> restTemplate.getForObject(url + <span class="string">&quot;/queryById/&quot;</span> + id, User.class); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="193-æºç è¿½è¸ª"><a class="markdownIt-Anchor" href="#193-æºç è¿½è¸ª"></a> 1.9.3ã€æºç è¿½è¸ª</h5><p>ä¸ºä»€ä¹ˆåªè¾“å…¥äº†æœåŠ¡å‹å¾®æœåŠ¡åç§°å°±å¯ä»¥è®¿é—®äº†å‘¢ï¼Ÿä¹‹å‰è¿˜è¦è·å–ipå’Œç«¯å£ã€‚</p><p>æ˜¾ç„¶æ˜¯å› ä¸ºæœ‰ç»„ä»¶æ ¹æ®æœåŠ¡å‹å¾®æœåŠ¡åç§°ï¼Œè·å–åˆ°äº†æœåŠ¡å®ä¾‹çš„ipå’Œç«¯å£ã€‚</p><p>å› ä¸ºæ¶ˆè´¹å‹å¾®æœåŠ¡ä½¿ç”¨çš„æ˜¯RestTemplateï¼Œspringä½¿ç”¨LoadBalancerInterceptoræ‹¦æˆªå™¨ ï¼Œè¿™ä¸ªç±»ä¼šå¯¹RestTemplateçš„è¯·æ±‚è¿›è¡Œæ‹¦æˆªï¼Œç„¶åæ ¹æ®æœåŠ¡idä»Eurekaè·å–å·²æ³¨å†Œçš„æœåŠ¡åˆ—è¡¨ï¼Œéšååˆ©ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•å¾—åˆ°çœŸå®çš„æœåŠ¡åœ°å€ä¿¡æ¯ï¼Œæ›¿æ¢æœåŠ¡idã€‚</p><p>æˆ‘ä»¬è¿›è¡Œæºç è·Ÿè¸ªï¼š</p><p><img src="img_2.png" alt="img_2.png" /></p><p>ç»§ç»­è·Ÿå…¥executeæ–¹æ³•ï¼šå‘ç°è·å–äº†<strong>9091</strong>ç«¯å£çš„æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯8081ï¼ˆç«¯å£ä¸ä¸€è‡´æ˜¯å¤ç°æ—¶ç«¯å£ç»™çš„9091ï¼‰</p><p><img src="img_3.png" alt="img_3.png" /></p><p>å†è·Ÿä¸‹ä¸€æ¬¡ï¼Œå‘ç°è·å–çš„æ˜¯<strong>9092</strong>ï¼šä¹Ÿå°±æ˜¯8082ï¼ˆç«¯å£ä¸ä¸€è‡´æ˜¯å¤ç°æ—¶ç«¯å£ç»™çš„9092ï¼‰</p><p><img src="img_4.png" alt="img_4.png" /></p><h5 id="194-è´Ÿè½½å‡è¡¡çš„ç­–ç•¥"><a class="markdownIt-Anchor" href="#194-è´Ÿè½½å‡è¡¡çš„ç­–ç•¥"></a> 1.9.4ã€è´Ÿè½½å‡è¡¡çš„ç­–ç•¥</h5><p><strong>Ribboné»˜è®¤çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æ˜¯ç®€å•çš„è½®è¯¢</strong></p><p>åœ¨åˆšæ‰çš„æºç ä¸­æˆ‘ä»¬çœ‹åˆ°æ‹¦æˆªä¸­æ˜¯ä½¿ç”¨<strong>RibbonLoadBalanceClient</strong>æ¥è¿›è¡Œè´Ÿè½½å‡è¡¡çš„ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª <strong>chooseæ–¹æ³•</strong>ï¼Œæ˜¯è¿™æ ·ä»‹ç»çš„ï¼š</p><p><img src="img_5.png" alt="img_5.png" /></p><p>ç°åœ¨è¿™ä¸ªå°±æ˜¯è´Ÿè½½å‡è¡¡è·å–å®ä¾‹çš„æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬å¯¹æ³¨å…¥è¿™ä¸ªç±»çš„å¯¹è±¡ï¼Œç„¶åå¯¹å…¶æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span> </span><br><span class="line"><span class="meta">@SpringBootTest(classes = UserConsumerDemoApplication.class)</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoadBalanceTest</span> &#123; </span><br><span class="line">  <span class="meta">@Autowired</span> </span><br><span class="line">  RibbonLoadBalancerClient client;</span><br><span class="line"><span class="meta">@Test</span> </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123; </span><br><span class="line">    <span class="comment">// è½®è¯¢100æ¬¡</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123; </span><br><span class="line">      <span class="type">ServiceInstance</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="built_in">this</span>.client.choose(<span class="string">&quot;user-service&quot;</span>); </span><br><span class="line">      System.out.println(instance.getHost() + <span class="string">&quot;:&quot;</span> + instance.getPort()); </span><br><span class="line">    &#125; </span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p><img src="img_6.png" alt="img_6.png" /></p><p>ç¬¦åˆé¢„æœŸæ¨æµ‹ï¼Œç¡®å®šæ˜¯<strong>è½®è¯¢æ–¹å¼</strong>ã€‚</p><p>SpringBootä¹Ÿå¸®æˆ‘ä»¬æä¾›äº†ä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™çš„é…ç½®å…¥å£ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">user-service:</span> </span><br><span class="line"><span class="attr">ribbon:</span> </span><br><span class="line"><span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.netflix.loadbalancer.RandomRule</span> <span class="comment"># éšæœºè°ƒç”¨</span></span><br></pre></td></tr></table></figure><p><strong>æ ¼å¼æ˜¯ï¼š {æœåŠ¡åç§°}.ribbon.NFLoadBalancerRuleClassName ï¼Œå€¼å°±æ˜¯IRuleçš„å®ç°ç±»ã€‚</strong></p><p>å†æ¬¡æµ‹è¯•ï¼Œç»“æœå˜æˆäº†éšæœºè°ƒç”¨ï¼š</p><p><img src="img_7.png" alt="img_7.png" /></p><h2 id="110-eurekaçš„ä¸€äº›æ¦‚å¿µ"><a class="markdownIt-Anchor" href="#110-eurekaçš„ä¸€äº›æ¦‚å¿µ"></a> 1.10ã€Eurekaçš„ä¸€äº›æ¦‚å¿µ</h2><h5 id="1101-æœåŠ¡æ³¨å†Œ"><a class="markdownIt-Anchor" href="#1101-æœåŠ¡æ³¨å†Œ"></a> <strong>1.10.1ã€æœåŠ¡æ³¨å†Œï¼š</strong></h5><blockquote><p>æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œä¼šæ£€æµ‹é…ç½®å±æ€§ä¸­çš„ï¼š eureka.client.register-with-erueka=true å‚æ•°æ˜¯å¦ä¸ºtrueï¼Œäº‹å®ä¸Šé»˜è®¤å°±æ˜¯trueã€‚å¦‚æœå€¼ç¡®å®ä¸ºtrueï¼Œåˆ™ä¼šå‘EurekaServerå‘èµ·ä¸€ä¸ªRestè¯·æ±‚ï¼Œå¹¶æºå¸¦è‡ªå·±çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œ</p><p>EurekaServerä¼šæŠŠè¿™äº›ä¿¡æ¯ä¿å­˜åˆ°ä¸€ä¸ªåŒå±‚Mapç»“æ„ä¸­ ã€‚</p><p>ç¬¬ä¸€å±‚Mapçš„Keyå°±æ˜¯æœåŠ¡idï¼Œä¸€èˆ¬æ˜¯é…ç½®ä¸­çš„ <a href="http://spring.application.name">spring.application.name</a> å±æ€§,user-service</p><p>ç¬¬äºŒå±‚Mapçš„keyæ˜¯æœåŠ¡çš„å®ä¾‹idã€‚ä¸€èˆ¬host+ serviceId + portï¼Œä¾‹å¦‚ï¼š localhost:user-service:8081ï¼Œå€¼åˆ™æ˜¯æœåŠ¡çš„å®ä¾‹å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæœåŠ¡ï¼Œè¿™æ ·å¯ä»¥åŒæ—¶å¯åŠ¨å¤šä¸ªä¸åŒå®ä¾‹ï¼Œå½¢æˆé›†ç¾¤ã€‚</p><p>é»˜è®¤æ³¨å†Œæ—¶ä½¿ç”¨çš„æ˜¯ä¸»æœºåæˆ–è€…localhostï¼Œå¦‚æœæƒ³ç”¨ipè¿›è¡Œæ³¨å†Œï¼Œå¯ä»¥åœ¨ user-service ä¸­æ·»åŠ é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span> </span><br><span class="line">  <span class="attr">instance:</span> </span><br><span class="line">    <span class="attr">ip-address:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="comment"># ipåœ°å€ prefer-ip-address: true # æ›´å€¾å‘äºä½¿ç”¨ipï¼Œè€Œä¸æ˜¯hostå</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å®Œåå…ˆåé‡å¯ æœåŠ¡ç«¯ å’Œ æ¶ˆè´¹ç«¯ ï¼›åœ¨è°ƒç”¨æœåŠ¡çš„æ—¶å€™å°±å·²ç»å˜æˆipåœ°å€ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šä¸æ˜¯åœ¨<strong>eureka</strong>ä¸­çš„æ§åˆ¶å°æœåŠ¡å®ä¾‹çŠ¶æ€æ˜¾ç¤ºã€‚</p></blockquote><h5 id="1102-æœåŠ¡ç»­çº¦"><a class="markdownIt-Anchor" href="#1102-æœåŠ¡ç»­çº¦"></a> <strong>1.10.2ã€æœåŠ¡ç»­çº¦ï¼š</strong></h5><blockquote><p>åœ¨æ³¨å†ŒæœåŠ¡å®Œæˆä»¥åï¼ŒæœåŠ¡æä¾›è€…ä¼šç»´æŒä¸€ä¸ªå¿ƒè·³ï¼ˆå®šæ—¶å‘EurekaServerå‘èµ·Restè¯·æ±‚ï¼‰ï¼Œå‘Šè¯‰</p><p>EurekaServerï¼šâ€œæˆ‘è¿˜æ´»ç€â€ã€‚è¿™ä¸ªæˆ‘ä»¬ç§°ä¸ºæœåŠ¡çš„ç»­çº¦ï¼ˆrenewï¼‰ï¼›</p><p>æœ‰ä¸¤ä¸ªé‡è¦å‚æ•°å¯ä»¥ä¿®æ”¹æœåŠ¡ç»­çº¦çš„è¡Œä¸ºï¼›å¯ä»¥åœ¨ user-service ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®é¡¹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span> </span><br><span class="line"><span class="attr">instance:</span> </span><br><span class="line"><span class="attr">lease-expiration-duration-in-seconds:</span> <span class="number">90</span></span><br><span class="line"><span class="attr">lease-renewal-interval-in-seconds:</span> <span class="number">30</span></span><br></pre></td></tr></table></figure><p>lease-renewal-interval-in-secondsï¼šæœåŠ¡ç»­çº¦(renew)çš„é—´éš”ï¼Œé»˜è®¤ä¸º30ç§’</p><p>lease-expiration-duration-in-secondsï¼šæœåŠ¡å¤±æ•ˆæ—¶é—´ï¼Œé»˜è®¤å€¼90ç§’</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹æ¯ä¸ª30ç§’æœåŠ¡ä¼šå‘æ³¨å†Œä¸­å¿ƒå‘é€ä¸€æ¬¡å¿ƒè·³ï¼Œè¯æ˜è‡ªå·±è¿˜æ´»ç€ã€‚å¦‚æœè¶…è¿‡90ç§’æ²¡æœ‰å‘é€å¿ƒ</p><p>è·³ï¼ŒEurekaServerå°±ä¼šè®¤ä¸ºè¯¥æœåŠ¡å®•æœºï¼Œä¼šä»æœåŠ¡åˆ—è¡¨ä¸­ç§»é™¤ï¼Œè¿™ä¸¤ä¸ªå€¼åœ¨ç”Ÿäº§ç¯å¢ƒä¸è¦ä¿®æ”¹ï¼Œé»˜è®¤å³å¯ã€‚</p></blockquote><h5 id="1103-è·å–æœåŠ¡åˆ—è¡¨"><a class="markdownIt-Anchor" href="#1103-è·å–æœåŠ¡åˆ—è¡¨"></a> <strong>1.10.3ã€è·å–æœåŠ¡åˆ—è¡¨ï¼š</strong></h5><blockquote><p>å½“æœåŠ¡æ¶ˆè´¹è€…å¯åŠ¨æ—¶ï¼Œä¼šæ£€æµ‹ eureka.client.fetch-registry=true å‚æ•°çš„å€¼ï¼Œå¦‚æœä¸ºtrueï¼Œåˆ™ä¼šä»Eureka Serveræœ</p><p>åŠ¡çš„åˆ—è¡¨æ‹‰å–åªè¯»å¤‡ä»½ï¼Œç„¶åç¼“å­˜åœ¨æœ¬åœ°ã€‚å¹¶ä¸” æ¯éš”30ç§’ ä¼šé‡æ–°æ‹‰å–å¹¶æ›´æ–°æ•°æ®ã€‚å¯ä»¥åœ¨ consumer-demo é¡¹ç›®</p><p>ä¸­é€šè¿‡ä¸‹é¢çš„å‚æ•°æ¥ä¿®æ”¹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span> </span><br><span class="line"><span class="attr">client:</span> </span><br><span class="line"><span class="attr">registry-fetch-interval-seconds:</span> <span class="number">30</span></span><br></pre></td></tr></table></figure><p>ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¿®æ”¹è¿™ä¸ªå€¼ã€‚</p><p>ä½†æ˜¯ä¸ºäº†å¼€å‘ç¯å¢ƒä¸‹ï¼Œèƒ½å¤Ÿå¿«é€Ÿå¾—åˆ°æœåŠ¡çš„æœ€æ–°çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è®¾ç½®å°ä¸€ç‚¹ã€‚</p></blockquote><p>å¦‚ä¸‹çš„é…ç½®éƒ½æ˜¯åœ¨EurekaServeræœåŠ¡ç«¯è¿›è¡Œ</p><h5 id="1104-æœåŠ¡ä¸‹çº¿"><a class="markdownIt-Anchor" href="#1104-æœåŠ¡ä¸‹çº¿"></a> <strong>1.10.4ã€æœåŠ¡ä¸‹çº¿ï¼š</strong></h5><blockquote><p>å½“æœåŠ¡è¿›è¡Œæ­£å¸¸å…³é—­æ“ä½œæ—¶ï¼Œå®ƒä¼šè§¦å‘ä¸€ä¸ªæœåŠ¡ä¸‹çº¿çš„Restè¯·æ±‚ç»™EurekaServerï¼Œå‘Šè¯‰æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œè¦ä¸‹çº¿äº†ï¼ŒæœåŠ¡æ³¨å†Œä¸­å¿ƒæ¥å—åˆ°è¯·æ±‚ä¹‹åï¼Œå°†è¯¥æœåŠ¡è®¾ç½®ä¸ºä¸‹çº¿çŠ¶æ€</p></blockquote><h5 id="1105-å¤±æ•ˆå‰”é™¤"><a class="markdownIt-Anchor" href="#1105-å¤±æ•ˆå‰”é™¤"></a> <strong>1.10.5ã€å¤±æ•ˆå‰”é™¤ï¼š</strong></h5><blockquote><p>æœ‰æ—¶å€™ï¼ŒæœåŠ¡å¯èƒ½ç”±äºå†…å­˜æº¢å‡ºæˆ–ç½‘ç»œæ•…éšœç­‰åŸå› ï¼Œä¸èƒ½æ­£å¸¸çš„å·¥ä½œï¼Œä½¿å¾—æœåŠ¡æ³¨å†Œä¸­å¿ƒæ— æ³•æ”¶åˆ°æœåŠ¡ä¸‹çº¿è¯·æ±‚ï¼Œé‚£ä¹ˆï¼ŒæœåŠ¡æ³¨å†Œä¸­å¿ƒä¼šåœ¨å¯åŠ¨æ—¶åˆ›å»ºä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œé»˜è®¤<strong>æ¯éš”60ç§’</strong>ï¼Œå°†å½“å‰æ³¨å†Œæ¸…å•ä¸­ï¼Œ<strong>è¶…è¿‡90ç§’</strong>æœªæ”¶åˆ°ç»­çº¦åŒ…çš„æœåŠ¡å‰”é™¤ï¼Œè¿™ä¸ªæ“ä½œè¢«æˆä¸ºå¤±æ•ˆå‰”é™¤ã€‚</p></blockquote><h5 id="1106-è‡ªæˆ‘ä¿æŠ¤"><a class="markdownIt-Anchor" href="#1106-è‡ªæˆ‘ä¿æŠ¤"></a> <strong>1.10.6ã€è‡ªæˆ‘ä¿æŠ¤ï¼š</strong></h5><blockquote><p>å…³åœä¸€ä¸ªæœåŠ¡ï¼Œå°±ä¼šåœ¨Eurekaé¢æ¿ä¸Šçœ‹åˆ°ä¸€æ¡è­¦å‘Šã€‚è¿™è¡¨ç¤ºè§¦å‘äº†Eurekaçš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ã€‚è¿›å…¥è‡ªæˆ‘ä¿æŠ¤ä¹‹åï¼Œä¸å‰”é™¤ä»»ä½•å®ä¾‹ã€‚</p><p>å½“ä¸€ä¸ªæœåŠ¡æœªæŒ‰æ—¶è¿›è¡Œå¿ƒè·³ç»­çº¦æ—¶ï¼ŒEurekaä¼šç»Ÿè®¡<strong>æœ€è¿‘15åˆ†é’Ÿ</strong>å¿ƒè·³å¤±è´¥çš„æœåŠ¡å®ä¾‹çš„æ¯”ä¾‹ï¼Œæ˜¯å¦è¶…è¿‡äº†<strong>85%</strong>ï¼Œå¦‚æœç»Ÿè®¡å‡ºEurekaServerèŠ‚ç‚¹åœ¨çŸ­æ—¶é—´å†…ä¸¢å¤±è¿‡å¤šå®¢æˆ·ç«¯ï¼ˆè¶…è¿‡85%ï¼‰ï¼ŒEurekaä¼šè®¤ä¸ºæ˜¯<strong>ç½‘ç»œæ•…éšœï¼Œè€Œä¸å‰”é™¤æœåŠ¡</strong>ã€‚</p><p>åœ¨<strong>ç”Ÿäº§ç¯å¢ƒ</strong>ä¸‹ï¼Œå› ä¸ºç½‘ç»œå»¶è¿Ÿç­‰åŸå› ï¼Œå¿ƒè·³å¤±è´¥å®ä¾‹çš„æ¯”ä¾‹å¾ˆå¯èƒ½è¶…æ ‡ï¼Œä½†æ˜¯æ­¤æ—¶å°±æŠŠæœåŠ¡å‰”é™¤åˆ—è¡¨ï¼Œæ˜¾ç„¶æ˜¯ä¸æ°å½“çš„ï¼Œå› ä¸ºæœåŠ¡å¯èƒ½å¹¶æ²¡æœ‰å®•æœºã€‚Eurekaä¼šæŠŠå½“å‰å®ä¾‹çš„æ³¨å†Œä¿¡æ¯ä¿æŠ¤èµ·æ¥ï¼Œä¸äºˆå‰”é™¤ã€‚</p><p>ä½†åœ¨<strong>å¼€å‘ç¯å¢ƒ</strong>ä¸‹ï¼Œä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œä¸€èˆ¬éƒ½ä¼šå…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ã€‚å°†ç»­çº¦æ—¶é—´ä»é»˜è®¤çš„30ç§’ä¿®æ”¹ä¸º5ç§’ï¼Œå°†å¤±æ•ˆå‰”é™¤çš„ç­‰å¾…æ—¶é—´é»˜è®¤30ç§’ä¿®æ”¹ä¸º5ç§’ã€‚åˆ©äºå¼€å‘é˜¶æ®µã€‚</p></blockquote><h2 id="111-è¡¥å……"><a class="markdownIt-Anchor" href="#111-è¡¥å……"></a> 1.11ã€è¡¥å……</h2><h5 id="1111-eurekaå‚æ•°"><a class="markdownIt-Anchor" href="#1111-eurekaå‚æ•°"></a> 1.11.1ã€eurekaå‚æ•°</h5><p>å½“å‰ç¬”è®°æ‰€ä½¿ç”¨åˆ°çš„eurekaå‚æ•°</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span> </span><br><span class="line">  <span class="attr">server:</span> </span><br><span class="line">  <span class="comment"># å…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œä¿è¯ä¸å¯ç”¨æœåŠ¡åŠæ—¶è¢«è¸¢å‡º</span></span><br><span class="line">      <span class="attr">enable-self-preservation:</span> <span class="literal">false</span></span><br><span class="line">      <span class="comment">#é»˜è®¤çš„å¤±æ•ˆå‰”é™¤æ—¶é—´ç”± 60*1000ms æ”¹æˆ 2000ms</span></span><br><span class="line">      <span class="attr">eviction-interval-timer-in-ms:</span> <span class="number">2000</span></span><br><span class="line"><span class="attr">client:</span> </span><br><span class="line"><span class="comment"># è¡¨ç¤ºæ˜¯å¦å°†è‡ªå·±æ³¨å†Œè¿›Eureka é»˜è®¤ä¸ºtrue</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># è¡¨ç¤ºæ˜¯å¦ä»EurekaServeræŠ“å–å·²æœ‰çš„æ³¨å†Œä¿¡æ¯ï¼Œ</span></span><br><span class="line">    <span class="comment"># é»˜è®¤ä¸ºtrueï¼Œå•èŠ‚ç‚¹æ— æ‰€è°“ï¼Œé›†ç¾¤å¿…é¡»è®¾ç½®ä¸ºtrueæ‰èƒ½é…åˆribbonä½¿ç”¨è´Ÿè½½å‡è¡¡</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">service-url:</span> </span><br><span class="line">      <span class="attr">defaultZone:</span> </span><br><span class="line">       <span class="comment"># é›†ç¾¤ç‰ˆ æŒ‡å®šå¤šä¸ª</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">http://eureka10086.com:10086/eureka/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">http://eureka10088.com:10088/eureka/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">http://eureka10087.com:10087/eureka/</span></span><br><span class="line">      <span class="comment"># å•æœºç‰ˆ æŒ‡å®šä¸€ä¸ª</span></span><br><span class="line">      <span class="comment"># http://localhost:10086/eureka</span></span><br><span class="line">  <span class="attr">instance:</span> </span><br><span class="line">  <span class="comment"># æŒ‡å®šä¸»æœºåé›†ç¾¤å†™æ³• é¿å…å¤šä¸ªeureka åŒå ,æ˜ å°„çš„eureka10087.com éœ€è¦åœ¨hostæ–‡ä»¶ä¸­æ·»åŠ æ˜ å°„</span></span><br><span class="line">  <span class="attr">hostname:</span> <span class="string">eureka10087.com</span></span><br><span class="line">    <span class="comment"># è¿™é‡Œçš„ç”¨å¤„ä¸»è¦ä½“ç°åœ¨discoveryClient.getInstances(&quot;user-service&quot;).get(0).getHost(); è·å–æ—¶ï¼Œ</span></span><br><span class="line">    <span class="comment"># è·å–çš„æ˜¯ipåœ°å€åè€Œä¸æ˜¯ä¸»æœºå,</span></span><br><span class="line">    <span class="comment"># å…·ä½“å‚è€ƒconsumerçš„controllerçš„queryByIdæ–¹æ³•ä½“</span></span><br><span class="line">    <span class="comment"># è®¾ç½®ä½¿ç”¨ipåœ°å€è€Œä¸æ˜¯ä¸»æœºå</span></span><br><span class="line">    <span class="comment"># ä¸»è¦é…ç½®åœ¨ discoveryClient.getInstances(&quot;user-service&quot;) æŒ‡å®šçš„å¾®æœåŠ¡ä¸Š</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># å•æœºæ¨¡å¼ä¸‹ï¼Œä½¿ç”¨æœ¬åœ°åœ°å€æ— æ‰€è°“ï¼Œä½†æ˜¯é›†ç¾¤æ¨¡å¼ä¸‹æœ€å¥½ä½¿ç”¨åŸŸåæ˜ å°„ç«¯å£</span></span><br><span class="line">    <span class="attr">ip-address:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">    <span class="comment"># æœåŠ¡ç»­çº¦çš„é—´éš”ï¼ˆåœ¨eurekaserveræœªæ”¶åˆ°å¿ƒè·³åŒ…è¶…è¿‡90ç§’ï¼Œå°±å°†è¯¥æœåŠ¡æä¾›è€…å‰”é™¤ï¼‰ï¼Œé»˜è®¤90ç§’</span></span><br><span class="line">    <span class="attr">lease-expiration-duration-in-seconds:</span> <span class="number">90</span></span><br><span class="line">    <span class="comment">#æœåŠ¡å¤±æ•ˆæ—¶é—´( æŒ‡åœ¨æ³¨å†ŒæœåŠ¡å®Œæˆä»¥åï¼ŒæœåŠ¡æä¾›è€…ä¼šç»´æŒä¸€ä¸ªå¿ƒè·³ï¼Œå‘eurekaServerå‘é€restè¯·æ±‚ï¼Œå‘Šè¯‰eurekaçŠ¶æ€æ­£å¸¸ ï¼Œè¶…è¿‡30ç§’åˆ™æ ‡è¯†æœåŠ¡å¤±æ•ˆ)ï¼Œé»˜è®¤30ç§’</span></span><br><span class="line">    <span class="attr">lease-renewal-interval-in-seconds:</span> <span class="number">30</span></span><br></pre></td></tr></table></figure><p><strong>å½“å‰ç¬”è®°ä½¿ç”¨åˆ°çš„å„ç±»é»˜è®¤æ—¶é—´çš„å°ç»“ï¼š</strong></p><blockquote><p><strong>æ³¨å†Œä¸­å¿ƒç«¯é…ç½®ï¼š</strong></p><p>æ¯éš”60ç§’ï¼Œå°†å½“å‰æ³¨å†Œæ¸…å•ä¸­ï¼Œè¶…è¿‡90ç§’æœªæ”¶åˆ°ç»­çº¦åŒ…çš„æœåŠ¡å‰”é™¤**ï¼ˆè¶…æ—¶90ç§’çš„å®ä¾‹éƒ½å­˜æ”¾åœ¨å¾…å‰”é™¤åˆ—è¡¨ä¸­ï¼Œç­‰å¾…å‰”é™¤ï¼‰**</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span> </span><br><span class="line">    <span class="attr">server:</span> </span><br><span class="line">        <span class="comment">#é»˜è®¤çš„å¤±æ•ˆå‰”é™¤æ—¶é—´ç”± 60*1000ms æ”¹æˆ 2000ms</span></span><br><span class="line">        <span class="attr">eviction-interval-timer-in-ms:</span> <span class="number">2000</span></span><br><span class="line">    <span class="attr">instance:</span> </span><br><span class="line">        <span class="comment"># æœåŠ¡ç»­çº¦çš„é—´éš”ï¼ˆåœ¨eurekaserveræœªæ”¶åˆ°å¿ƒè·³åŒ…è¶…è¿‡90ç§’ï¼Œå°±å°†è¯¥æœåŠ¡æä¾›è€…å‰”é™¤ï¼‰ï¼Œé»˜è®¤90ç§’</span></span><br><span class="line">        <span class="attr">lease-expiration-duration-in-seconds:</span> <span class="number">90</span></span><br></pre></td></tr></table></figure><p><strong>å®¢æˆ·ç«¯é…ç½®ï¼š</strong></p><p>å¿ƒè·³åŒ…é—´éš”æ—¶é—´( ç»­çº¦é—´éš”æ—¶é—´ )ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eureka:</span> </span><br><span class="line"><span class="attr">instance:</span> </span><br><span class="line">  <span class="comment">#æœåŠ¡å¤±æ•ˆæ—¶é—´( æŒ‡åœ¨æ³¨å†ŒæœåŠ¡å®Œæˆä»¥åï¼ŒæœåŠ¡æä¾›è€…ä¼šç»´æŒä¸€ä¸ªå¿ƒè·³ï¼Œå‘eurekaServerå‘é€restè¯·æ±‚ï¼Œå‘Šè¯‰eurekaçŠ¶æ€æ­£å¸¸ ï¼Œè¶…è¿‡30ç§’åˆ™æ ‡è¯†æœåŠ¡å¤±æ•ˆ)ï¼Œé»˜è®¤30ç§’</span></span><br><span class="line">      <span class="attr">lease-renewal-interval-in-seconds:</span> <span class="number">30</span></span><br></pre></td></tr></table></figure></blockquote><h5 id="1112-eurekaæ³¨è§£"><a class="markdownIt-Anchor" href="#1112-eurekaæ³¨è§£"></a> 1.11.2ã€eurekaæ³¨è§£</h5><p>å½“å‰ç¬”è®°ä½¿ç”¨çš„æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableDiscoveryClient</span> <span class="comment">//å¼€å¯æœåŠ¡å‘ç°,ç”¨äºå°†æœåŠ¡æ¥å…¥Eureka å’Œ @@EnableEurekaClientä½œç”¨å¤§è‡´ä¸€è‡´ï¼Œå¼‚åŒç‚¹è§ä¸‹æ–¹è¯´æ˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Eurekaç»§æ‰¿äº†Ribbon,è¯¥æ³¨è§£å¼•å…¥äº†eurekaåŒ…å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</span></span><br><span class="line"><span class="meta">@LoadBalanced</span>  <span class="comment">//è¯¥æ³¨è§£ç”¨äºå¼€å¯è´Ÿè½½å‡è¡¡ï¼Œé»˜è®¤æ˜¯è½®è¯¢ï¼Œå³è¿œç¨‹è°ƒç”¨çš„å¾®æœåŠ¡åç§°ä¸‹æœ‰å¤šå°æœºå™¨ï¼Œè°ƒç”¨æ—¶è½®ç•ªè°ƒç”¨ï¼Œèƒ½å‡å°æœåŠ¡ç«¯å‹åŠ›ï¼Œç”¨åœ¨åˆ›å»ºrestTemplateçš„æ–¹æ³•ä¸Š</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableEurekaServer</span> <span class="comment">//å½“å‰å¾®æœåŠ¡åŠ å…¥æ³¨å†Œä¸­å¿ƒï¼Œä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼ŒæœåŠ¡ç«¯ï¼Œç”¨äºeurekaå¾®æœåŠ¡</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span> <span class="comment">// å°†å½“å‰å¾®æœåŠ¡æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼Œä½œä¸ºå®¢æˆ·ç«¯</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>@EnableDiscoveryClient</strong> å’Œ <strong>@EnableEurekaClient</strong>çš„æ¯”è¾ƒğŸ‘‡</p><p>**å…±åŒç‚¹ï¼š**éƒ½æ˜¯èƒ½å¤Ÿè®©æ³¨å†Œä¸­å¿ƒèƒ½å¤Ÿå‘ç°ï¼Œæ‰«æåˆ°è¯¥æœåŠ¡ã€‚</p><p><strong>ä¸åŒç‚¹ï¼š</strong>@EnableEurekaClientåªé€‚ç”¨äºEurekaä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼Œ@EnableDiscoveryClient å¯ä»¥æ˜¯å…¶ä»–æ³¨å†Œä¸­å¿ƒï¼ˆZookeeperã€Consulã€Nacosç­‰æ³¨å†Œä¸­å¿ƒï¼‰ã€‚</p></blockquote>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡ä¸»è¦è®²è¿°SpringCloudä¸­Eurekaç»„ä»¶çš„ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œä»¥åŠåœ¨é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®å‚æ•°åˆ—ä¸¾</summary>
    
    
    
    <category term="åˆ†å¸ƒå¼æ²»ç†" scheme="https://blog.kakar.top/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B2%BB%E7%90%86/"/>
    
    
    <category term="Eureka" scheme="https://blog.kakar.top/tags/Eureka/"/>
    
  </entry>
  
  <entry>
    <title>RabbitMQçš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ¢³ç†</title>
    <link href="https://blog.kakar.top/posts/727687fb.html"/>
    <id>https://blog.kakar.top/posts/727687fb.html</id>
    <published>2023-06-07T02:31:16.000Z</published>
    <updated>2023-06-07T02:31:16.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶æœ‰ä»€ä¹ˆç”¨"><a class="markdownIt-Anchor" href="#1-ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶æœ‰ä»€ä¹ˆç”¨"></a> 1ã€ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h1><h3 id="1-ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶å‘¢"><a class="markdownIt-Anchor" href="#1-ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶å‘¢"></a> 1)ã€ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶å‘¢ï¼Ÿ</h3><blockquote><p>æ¶ˆæ¯ä¸­é—´ä»¶å°±åƒæ˜¯ä¸€ä¸ªé‚®å±€ï¼Œç”¨æ¥å°†ä¿¡ä»¶ä»å¯„ä»¶äººä¼ é€’åˆ°æ”¶ä»¶äººã€‚åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œå„ä¸ªåº”ç”¨ç¨‹åºå°±åƒæ˜¯ä¸åŒçš„äººï¼Œè¿™äº›äººä¹‹é—´éœ€è¦äº’ç›¸é€šä¿¡ã€‚ä½†æ˜¯ç”±äºä»–ä»¬å¯èƒ½è¿è¡Œåœ¨ä¸åŒçš„ç”µè„‘ä¸Šï¼Œå¹¶ä¸”ä¸æ–¹ä¾¿ç›´æ¥è”ç³»ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªä¸­é—´çš„è½¯ä»¶æ¥å¸®åŠ©ä»–ä»¬ä¼ é€’ä¿¡æ¯ã€‚è¿™ä¸ªä¸­é—´è½¯ä»¶å°±æ˜¯æ¶ˆæ¯ä¸­é—´ä»¶ã€‚å½“ä¸€ä¸ªåº”ç”¨ç¨‹åºéœ€è¦ç»™å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºå‘é€æ¶ˆæ¯æ—¶ï¼Œå®ƒæŠŠè¿™ä¸ªæ¶ˆæ¯äº¤ç»™æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œç„¶åæ¶ˆæ¯ä¸­é—´ä»¶æ ¹æ®æ¶ˆæ¯çš„ç›®çš„åœ°ï¼ŒæŠŠæ¶ˆæ¯é€åˆ°æ¥æ”¶è€…é‚£é‡Œã€‚å°±åƒé‚®å±€ä¸€æ ·ï¼Œæ¯å°ä¿¡ä»¶éƒ½æœ‰ä¸€ä¸ªåœ°å€ï¼Œé‚®å±€æ ¹æ®åœ°å€æ¥æ´¾é€ä¿¡ä»¶ã€‚ä½¿ç”¨æ¶ˆæ¯ä¸­é—´ä»¶å¯ä»¥è®©åº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡æ›´åŠ å¯é ã€çµæ´»å’Œé«˜æ•ˆã€‚å› ä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºåªéœ€è¦å‘æ¶ˆæ¯ä¸­é—´ä»¶å‘é€æˆ–æ¥æ”¶æ¶ˆæ¯ï¼Œè€Œä¸éœ€è¦ç›´æ¥ä¸å…¶ä»–åº”ç”¨ç¨‹åºç›¸è¿ï¼Œè¿™æ ·ç³»ç»Ÿå°±æ›´å®¹æ˜“æ‰©å±•ã€ä¿®æ”¹å’Œç»´æŠ¤ã€‚åŒæ—¶ï¼Œæ¶ˆæ¯ä¸­é—´ä»¶è¿˜èƒ½å¤Ÿç¡®ä¿æ¶ˆæ¯çš„å¯é æ€§ï¼Œå³ä½¿æŸä¸ªåº”ç”¨ç¨‹åºæš‚æ—¶æ— æ³•å¤„ç†æ¶ˆæ¯ï¼Œä¹Ÿèƒ½ä¿è¯æ¶ˆæ¯ä¸ä¼šä¸¢å¤±ã€‚</p></blockquote><h3 id="2-æ¶ˆæ¯ä¸­é—´ä»¶æœ‰ä»€ä¹ˆä½œç”¨"><a class="markdownIt-Anchor" href="#2-æ¶ˆæ¯ä¸­é—´ä»¶æœ‰ä»€ä¹ˆä½œç”¨"></a> 2)ã€æ¶ˆæ¯ä¸­é—´ä»¶æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3><blockquote><p>æ¶ˆæ¯ä¸­é—´ä»¶æ˜¯ä¸€ç§ç”¨äºå¸®åŠ©åº”ç”¨ç¨‹åºä¹‹é—´è¿›è¡Œé€šä¿¡çš„è½¯ä»¶æ¨¡å‹ã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå„ä¸ªåº”ç”¨ç¨‹åºå¯èƒ½è¿è¡Œåœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸”å½¼æ­¤ä¹‹é—´å¹¶ä¸ç›´æ¥ç›¸äº’è¿æ¥ã€‚æ­¤æ—¶ï¼Œå¦‚æœåº”ç”¨ç¨‹åºä¹‹é—´éœ€è¦è¿›è¡Œé€šä¿¡ï¼Œå°±éœ€è¦å€ŸåŠ©äºä¸€ä¸ªæ¶ˆæ¯ä¸­é—´ä»¶æ¥ä¼ é€’æ¶ˆæ¯ã€‚</p><p>ä½¿ç”¨æ¶ˆæ¯ä¸­é—´ä»¶å¯ä»¥è®©åº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡æ›´åŠ å¯é ã€çµæ´»å’Œé«˜æ•ˆã€‚å®ƒæä¾›äº†ä»¥ä¸‹å‡ ä¸ªä¸»è¦ä¼˜ç‚¹ï¼š</p><ol><li>å¼‚æ­¥é€šä¿¡ï¼šåº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡æ¶ˆæ¯ä¸­é—´ä»¶è¿›è¡Œå¼‚æ­¥é€šä¿¡ï¼Œå³å‘é€æ–¹æ— éœ€ç­‰å¾…æ¥æ”¶æ–¹çš„å“åº”å³å¯ç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œã€‚è¿™æ ·å¯ä»¥æé«˜åº”ç”¨ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡å’Œç”¨æˆ·ä½“éªŒã€‚</li><li>è§£è€¦åˆï¼šæ¶ˆæ¯ä¸­é—´ä»¶å¯ä»¥å°†åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¾èµ–å…³ç³»åˆ†ç¦»å¼€æ¥ï¼Œä»è€Œé™ä½åº”ç”¨ç¨‹åºä¹‹é—´çš„è€¦åˆåº¦ã€‚è¿™æ ·å¯ä»¥è®©ç³»ç»Ÿæ›´å®¹æ˜“æ‰©å±•ã€ä¿®æ”¹å’Œç»´æŠ¤ã€‚</li><li>å¯é æ€§ï¼šæ¶ˆæ¯ä¸­é—´ä»¶å¯ä»¥ç¡®ä¿æ¶ˆæ¯çš„å¯é æ€§ï¼Œå½“ä¸€ä¸ªæ¥æ”¶æ–¹æš‚æ—¶æ— æ³•å¤„ç†æ¶ˆæ¯æ—¶ï¼Œæ¶ˆæ¯ä¸­é—´ä»¶å¯ä»¥å°†æ¶ˆæ¯æš‚å­˜èµ·æ¥ï¼Œå¹¶åœ¨æ¥æ”¶æ–¹é‡æ–°å¯åŠ¨åé‡æ–°å‘é€ã€‚è¿™æ ·å¯ä»¥é¿å…æ¶ˆæ¯çš„ä¸¢å¤±å’Œé‡å¤ã€‚</li><li>å®‰å…¨æ€§ï¼šæ¶ˆæ¯ä¸­é—´ä»¶å¯ä»¥æä¾›å®‰å…¨çš„é€šä¿¡é€šé“ï¼Œä¿è¯æ¶ˆæ¯çš„æœºå¯†æ€§å’Œå®Œæ•´æ€§ã€‚è¿™æ ·å¯ä»¥ä¿æŠ¤åº”ç”¨ç¨‹åºä¹‹é—´ä¼ è¾“çš„æ•æ„Ÿä¿¡æ¯ã€‚</li><li>å¤šè¯­è¨€æ”¯æŒï¼šæ¶ˆæ¯ä¸­é—´ä»¶é€šå¸¸æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œé€šä¿¡åè®®ï¼Œå¯ä»¥è®©ä¸åŒç¼–ç¨‹è¯­è¨€å’Œä¸åŒå¹³å°çš„åº”ç”¨ç¨‹åºä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚è¿™æ ·å¯ä»¥æé«˜ç³»ç»Ÿçš„äº’æ“ä½œæ€§å’Œå¯æ‰©å±•æ€§ã€‚</li></ol><p>åŸºäºä»¥ä¸Šä¼˜ç‚¹ï¼Œæ¶ˆæ¯ä¸­é—´ä»¶å¯ä»¥å¹¿æ³›åº”ç”¨äºå„ç§åˆ†å¸ƒå¼ç³»ç»Ÿåœºæ™¯ä¸­ï¼Œä¾‹å¦‚å¾®æœåŠ¡æ¶æ„ã€å¤§æ•°æ®å¤„ç†ã€å®æ—¶æµå¤„ç†ç­‰ã€‚</p></blockquote><h1 id="2-æ¶ˆæ¯ä¸­é—´ä»¶é‚£ä¹ˆå¤šæœ‰å“ªäº›åŒºåˆ«å¦‚ä½•é€‰æ‹©"><a class="markdownIt-Anchor" href="#2-æ¶ˆæ¯ä¸­é—´ä»¶é‚£ä¹ˆå¤šæœ‰å“ªäº›åŒºåˆ«å¦‚ä½•é€‰æ‹©"></a> 2ã€æ¶ˆæ¯ä¸­é—´ä»¶é‚£ä¹ˆå¤šï¼Œæœ‰å“ªäº›åŒºåˆ«ï¼Œå¦‚ä½•é€‰æ‹©</h1><table><thead><tr><th style="text-align:left">ç‰¹æ€§</th><th style="text-align:left">RabbitMQ</th><th style="text-align:left">RocketMQ</th><th style="text-align:left">ActiveMQ</th><th style="text-align:left">Kafka</th><th style="text-align:left">Redis</th></tr></thead><tbody><tr><td style="text-align:left">å¼€å‘è¯­è¨€</td><td style="text-align:left">Erlang</td><td style="text-align:left">Java</td><td style="text-align:left">Java</td><td style="text-align:left">Scala</td><td style="text-align:left">C</td></tr><tr><td style="text-align:left">å¼€æºè®¸å¯è¯</td><td style="text-align:left">Mozilla Public License 1.1</td><td style="text-align:left">Apache License 2.0</td><td style="text-align:left">Apache License 2.0</td><td style="text-align:left">Apache License 2.0</td><td style="text-align:left">BSD License</td></tr><tr><td style="text-align:left">åè®®æ”¯æŒ</td><td style="text-align:left">AMQPã€MQTT</td><td style="text-align:left">JMSã€MQTT</td><td style="text-align:left">JMSã€AMQPã€STOMP</td><td style="text-align:left">Kafkaåè®®</td><td style="text-align:left">è‡ªå®šä¹‰åè®®</td></tr><tr><td style="text-align:left">æ¶ˆæ¯å¯é æ€§</td><td style="text-align:left">æ”¯æŒå¤šç§æ¨¡å¼ï¼Œå¯ä»¥é…ç½®ä¸ºâ€œè‡³å°‘ä¸€æ¬¡â€æˆ–â€œæ°å¥½ä¸€æ¬¡â€äº¤ä»˜</td><td style="text-align:left">æ”¯æŒå¤šç§æ¨¡å¼ï¼Œå¯ä»¥é…ç½®ä¸ºâ€œè‡³å°‘ä¸€æ¬¡â€æˆ–â€œæ°å¥½ä¸€æ¬¡â€äº¤ä»˜</td><td style="text-align:left">é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨å¼‚æ­¥å‘é€æ–¹å¼ï¼Œâ€œè‡³å°‘ä¸€æ¬¡â€äº¤ä»˜ã€‚ä½†ä¹Ÿæ”¯æŒâ€œåªæŠ•é€’ä¸€æ¬¡â€äº¤ä»˜æ¨¡å¼</td><td style="text-align:left">å¼‚æ­¥å‘é€ï¼Œâ€œè‡³å°‘ä¸€æ¬¡â€äº¤ä»˜</td><td style="text-align:left">ä¸ä¿è¯æ¶ˆæ¯çš„å¯é æ€§</td></tr><tr><td style="text-align:left">å¯ç”¨æ€§å’Œæ•…éšœè½¬ç§»</td><td style="text-align:left">é›†ç¾¤æ¶æ„ã€é•œåƒé˜Ÿåˆ—ã€è‡ªåŠ¨é‡æ–°è¿æ¥ç­‰æœºåˆ¶</td><td style="text-align:left">é›†ç¾¤æ¶æ„ã€ä¸»ä»åŒæ­¥ã€å®¹é”™å¤„ç†ç­‰æœºåˆ¶</td><td style="text-align:left">ä¸»ä»å¤åˆ¶ã€é›†ç¾¤ã€åˆ†å¸ƒå¼äº‹åŠ¡ç­‰æœºåˆ¶</td><td style="text-align:left">é«˜å¯ç”¨é›†ç¾¤ã€æ•°æ®å‰¯æœ¬ã€å¤‡ä»½å’Œæ¢å¤æœºåˆ¶</td><td style="text-align:left">æ— </td></tr><tr><td style="text-align:left">æ€§èƒ½</td><td style="text-align:left">ä½å»¶è¿Ÿå’Œé«˜ååé‡ï¼Œé€‚åˆå¤§é‡å°æ¶ˆæ¯çš„å¤„ç†</td><td style="text-align:left">ä½å»¶è¿Ÿå’Œé«˜ååé‡ï¼Œé€‚åˆå¤§é‡å°æ¶ˆæ¯çš„å¤„ç†</td><td style="text-align:left">é«˜ååé‡ï¼Œé€‚åˆå¤„ç†å¤§å‹æ¶ˆæ¯ã€æ–‡ä»¶ç­‰æ•°æ®</td><td style="text-align:left">é«˜ååé‡çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œé€‚åˆå¤„ç†æµ·é‡æ•°æ®</td><td style="text-align:left">å¿«é€Ÿã€å¯é ï¼Œé€‚åˆç”¨ä½œç¼“å­˜æˆ–æ¶ˆæ¯é˜Ÿåˆ—</td></tr><tr><td style="text-align:left">æ•°æ®æŒä¹…åŒ–</td><td style="text-align:left">æ”¯æŒå°†æ¶ˆæ¯è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨</td><td style="text-align:left">æ”¯æŒå°†æ¶ˆæ¯è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨</td><td style="text-align:left">æ”¯æŒå°†æ¶ˆæ¯è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨</td><td style="text-align:left">æ”¯æŒå°†æ¶ˆæ¯è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨</td><td style="text-align:left">é»˜è®¤ä¸å¯¹æ¶ˆæ¯è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨</td></tr><tr><td style="text-align:left">åº”ç”¨åœºæ™¯</td><td style="text-align:left">å¾®æœåŠ¡æ¶æ„ã€å®æ—¶æ•°æ®å¤„ç†ã€äº‘è®¡ç®—ç­‰</td><td style="text-align:left">å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿã€æµå¼è®¡ç®—ã€å¾®æœåŠ¡æ¶æ„</td><td style="text-align:left">JMS ç³»ç»Ÿã€ä¼ä¸šé›†æˆã€SOA æ¶æ„</td><td style="text-align:left">æµå¼æ•°æ®å¤„ç†ã€å®æ—¶æ•°æ®åˆ†æã€æ—¥å¿—æ”¶é›†ç­‰</td><td style="text-align:left">ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å‘å¸ƒ/è®¢é˜…ç³»ç»Ÿ</td></tr><tr><td style="text-align:left">å¯æ‰©å±•æ€§</td><td style="text-align:left">é›†ç¾¤æ¶æ„æ”¯æŒæ— ç¼æ‰©å®¹</td><td style="text-align:left">é›†ç¾¤æ¶æ„æ”¯æŒæ— ç¼æ‰©å®¹</td><td style="text-align:left">é›†ç¾¤æ¶æ„æ”¯æŒæ— ç¼æ‰©å®¹</td><td style="text-align:left">é›†ç¾¤æ¶æ„æ”¯æŒæ— ç¼æ‰©å®¹</td><td style="text-align:left">æ”¯æŒä¸»ä»å¤åˆ¶å’Œé›†ç¾¤ï¼Œä½†ä¸æ”¯æŒåˆ†å¸ƒå¼</td></tr><tr><td style="text-align:left">å…¼å®¹æ€§</td><td style="text-align:left">æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ Javaã€Pythonã€Rubyã€C#ã€Go ç­‰</td><td style="text-align:left">æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ Javaã€C++ã€Python ç­‰</td><td style="text-align:left">æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ Javaã€C++ã€Pythonã€Perl ç­‰</td><td style="text-align:left">æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ Javaã€Pythonã€Go ç­‰</td><td style="text-align:left">æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ Cã€Javaã€Pythonã€Lua ç­‰</td></tr></tbody></table><h1 id="3-rabbitmqçš„åŸºæœ¬æ¦‚å¿µ"><a class="markdownIt-Anchor" href="#3-rabbitmqçš„åŸºæœ¬æ¦‚å¿µ"></a> 3ã€RabbitMQçš„åŸºæœ¬æ¦‚å¿µ</h1><h3 id="æ¶ˆæ¯é˜Ÿåˆ—"><a class="markdownIt-Anchor" href="#æ¶ˆæ¯é˜Ÿåˆ—"></a> æ¶ˆæ¯é˜Ÿåˆ—ï¼š</h3><p>RabbitMQä¸­æœ€é‡è¦çš„ç»„æˆéƒ¨åˆ†ä¹‹ä¸€å°±æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ã€‚æ¶ˆæ¯é˜Ÿåˆ—æ˜¯ä¸€ä¸ªç¼“å†²åŒºï¼Œç”¨äºå­˜å‚¨å·²å‘é€ä½†å°šæœªè¢«æ¶ˆè´¹è€…å¤„ç†çš„æ¶ˆæ¯ã€‚æ¶ˆæ¯é˜Ÿåˆ—å…è®¸ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘å¸ƒåˆ°é˜Ÿåˆ—ä¸­ï¼Œç„¶åæ¶ˆè´¹è€…å¯ä»¥ä»é˜Ÿåˆ—ä¸­è·å–å¹¶å¤„ç†è¿™äº›æ¶ˆæ¯ã€‚</p><h3 id="ç”Ÿäº§è€…"><a class="markdownIt-Anchor" href="#ç”Ÿäº§è€…"></a> ç”Ÿäº§è€…</h3><p>ç”Ÿäº§è€…æ˜¯æŒ‡å‘å¸ƒæ¶ˆæ¯åˆ°RabbitMQçš„åº”ç”¨ç¨‹åºã€‚ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€åˆ°ä¸€ä¸ªç‰¹å®šçš„é˜Ÿåˆ—ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®éœ€è¦è®¾ç½®å…¶ä»–å±æ€§ï¼Œä¾‹å¦‚ä¼˜å…ˆçº§æˆ–è¿‡æœŸæ—¶é—´ã€‚</p><h3 id="æ¶ˆè´¹è€…"><a class="markdownIt-Anchor" href="#æ¶ˆè´¹è€…"></a> æ¶ˆè´¹è€…ï¼š</h3><p>æ¶ˆè´¹è€…æ˜¯æŒ‡ä»RabbitMQè·å–æ¶ˆæ¯å¹¶è¿›è¡Œå¤„ç†çš„åº”ç”¨ç¨‹åºã€‚æ¶ˆè´¹è€…å¯ä»¥è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªé˜Ÿåˆ—ï¼Œå¹¶ä»é˜Ÿåˆ—ä¸­è·å–å¹¶å¤„ç†æ¶ˆæ¯ã€‚å½“æ¶ˆè´¹è€…æˆåŠŸåœ°å¤„ç†äº†ä¸€æ¡æ¶ˆæ¯æ—¶ï¼Œå®ƒä¼šå°†å…¶æ ‡è®°ä¸ºå·²ç¡®è®¤ï¼Œå¹¶ä»é˜Ÿåˆ—ä¸­åˆ é™¤è¯¥æ¶ˆæ¯ã€‚</p><h3 id="ç»‘å®š"><a class="markdownIt-Anchor" href="#ç»‘å®š"></a> ç»‘å®šï¼š</h3><p>ç»‘å®šæ˜¯ä¸€ç§æœºåˆ¶ï¼Œç”¨äºå°†æ¶ˆæ¯é˜Ÿåˆ—å’Œäº¤æ¢å™¨ç›¸äº’å…³è”ã€‚å½“ä¸€ä¸ªæ¶ˆæ¯è¢«å‘å¸ƒåˆ°äº¤æ¢å™¨æ—¶ï¼Œäº¤æ¢å™¨ä¼šæ ¹æ®ç»‘å®šè§„åˆ™é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªä¸ä¹‹å…³è”çš„é˜Ÿåˆ—å¹¶å°†æ¶ˆæ¯è·¯ç”±åˆ°è¿™äº›é˜Ÿåˆ—ä¸­ã€‚</p><h3 id="äº¤æ¢å™¨"><a class="markdownIt-Anchor" href="#äº¤æ¢å™¨"></a> äº¤æ¢å™¨ï¼š</h3><p>äº¤æ¢å™¨æ˜¯RabbitMQä¸­å¦ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå®ƒç”¨äºæ¥æ”¶ç”Ÿäº§è€…å‘å¸ƒçš„æ¶ˆæ¯ï¼Œå¹¶æ ¹æ®ç»‘å®šè§„åˆ™å°†è¿™äº›æ¶ˆæ¯è·¯ç”±åˆ°ç›¸åº”çš„é˜Ÿåˆ—ä¸­ã€‚RabbitMQæä¾›äº†å‡ ç§ä¸åŒç±»å‹çš„äº¤æ¢å™¨ï¼Œä¾‹å¦‚ç›´æ¥äº¤æ¢å™¨ã€ä¸»é¢˜äº¤æ¢å™¨å’Œæ‰‡å½¢äº¤æ¢å™¨ç­‰ã€‚</p><h3 id="è·¯ç”±é”®"><a class="markdownIt-Anchor" href="#è·¯ç”±é”®"></a> è·¯ç”±é”®ï¼š</h3><p>è·¯ç”±é”®æ˜¯ä¸€ç§å¯é€‰å­—æ®µï¼Œç”¨äºæŒ‡å®šæ¶ˆæ¯åº”è¯¥è¢«è·¯ç”±åˆ°å“ªä¸ªé˜Ÿåˆ—ä¸­ã€‚å½“ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€åˆ°äº¤æ¢å™¨æ—¶ï¼Œå¯ä»¥è®¾ç½®è·¯ç”±é”®å±æ€§ï¼Œäº¤æ¢å™¨ä¼šæ ¹æ®ç»‘å®šè§„åˆ™å°†æ¶ˆæ¯è·¯ç”±åˆ°ä¸ä¹‹åŒ¹é…çš„é˜Ÿåˆ—ä¸­ã€‚</p><h3 id="æŒä¹…åŒ–"><a class="markdownIt-Anchor" href="#æŒä¹…åŒ–"></a> æŒä¹…åŒ–ï¼š</h3><p>é˜Ÿåˆ—å’Œæ¶ˆæ¯éƒ½å¯ä»¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œå³åœ¨RabbitMQæœåŠ¡å™¨å®•æœºåï¼Œæ•°æ®ä»ç„¶èƒ½å¤Ÿæ¢å¤ã€‚å¯¹äºè¦æ±‚é«˜å¯é æ€§çš„åº”ç”¨ç¨‹åºï¼Œåº”å½“å¼€å¯æŒä¹…åŒ–åŠŸèƒ½ã€‚</p><h3 id="ç¡®è®¤æœºåˆ¶"><a class="markdownIt-Anchor" href="#ç¡®è®¤æœºåˆ¶"></a> ç¡®è®¤æœºåˆ¶ï¼š</h3><p>æ¶ˆè´¹è€…å¤„ç†å®Œæ¶ˆæ¯åï¼Œéœ€è¦å‘RabbitMQæœåŠ¡å™¨å‘é€ç¡®è®¤ä¿¡æ¯ï¼Œå‘Šè¯‰å®ƒè¯¥æ¶ˆæ¯å·²ç»å¤„ç†å®Œæˆã€‚RabbitMQæ”¯æŒä¸¤ç§ç¡®è®¤æ¨¡å¼ï¼šæ‰‹åŠ¨ç¡®è®¤å’Œè‡ªåŠ¨ç¡®è®¤ã€‚æ‰‹åŠ¨ç¡®è®¤éœ€è¦æ˜¾å¼åœ°è°ƒç”¨ç¡®è®¤æ–¹æ³•ï¼Œè€Œè‡ªåŠ¨ç¡®è®¤åˆ™ç”±RabbitMQè‡ªåŠ¨ç¡®è®¤æ‰€æœ‰æ¶ˆè´¹è€…å¤„ç†å®Œæˆçš„æ¶ˆæ¯ã€‚</p><h3 id="æ¶ˆè´¹è€…é™æµ"><a class="markdownIt-Anchor" href="#æ¶ˆè´¹è€…é™æµ"></a> æ¶ˆè´¹è€…é™æµï¼š</h3><p>æ¶ˆè´¹è€…é™æµæ˜¯æŒ‡æ§åˆ¶æ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯çš„é€Ÿç‡ã€‚å¦‚æœæ¶ˆè´¹è€…å¤„ç†é€Ÿåº¦æ¯”ç”Ÿäº§è€…å‘å¸ƒé€Ÿåº¦æ…¢ï¼Œé‚£ä¹ˆé˜Ÿåˆ—å¯èƒ½ä¼šå˜å¾—éå¸¸å¤§ï¼Œç”šè‡³è¾¾åˆ°å†…å­˜é™åˆ¶ã€‚å› æ­¤ï¼Œå¯ä»¥é€šè¿‡æ§åˆ¶æ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯çš„é€Ÿç‡æ¥é¿å…è¿™ç§æƒ…å†µã€‚</p><h3 id="è™šæ‹Ÿä¸»æœº"><a class="markdownIt-Anchor" href="#è™šæ‹Ÿä¸»æœº"></a> è™šæ‹Ÿä¸»æœºï¼š</h3><p>è™šæ‹Ÿä¸»æœºæ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µï¼Œå®ƒå…è®¸å°†RabbitMQä»£ç†åˆ†æˆå¤šä¸ªç‹¬ç«‹çš„éƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰è‡ªå·±çš„é˜Ÿåˆ—ã€äº¤æ¢å™¨å’Œç»‘å®šç­‰ã€‚ä¸åŒçš„è™šæ‹Ÿä¸»æœºä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œå¯ä»¥ç”¨äºå°†ä¸åŒçš„åº”ç”¨æˆ–ç¯å¢ƒéš”ç¦»å¼€æ¥ã€‚</p><h3 id="ttltime-to-live"><a class="markdownIt-Anchor" href="#ttltime-to-live"></a> TTLï¼ˆTime to Liveï¼‰ï¼š</h3><p>åœ¨RabbitMQä¸­ï¼Œå¯ä»¥ä¸ºé˜Ÿåˆ—æˆ–æ¶ˆæ¯è®¾ç½®TTLå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å®šäº†æ•°æ®åœ¨ç»è¿‡ä¸€æ®µç‰¹å®šæ—¶é—´åæ˜¯å¦è¿‡æœŸã€‚å¦‚æœæ•°æ®è¿‡æœŸäº†ï¼Œåˆ™å¯ä»¥å°†å…¶ä»é˜Ÿåˆ—ä¸­åˆ é™¤æˆ–è€…å°†å…¶å‘é€åˆ°æ­»</p><h3 id="dlxdead-letter-exchange"><a class="markdownIt-Anchor" href="#dlxdead-letter-exchange"></a> DLXï¼ˆDead-Letter-Exchangeï¼‰ï¼š</h3><p>DLXæ˜¯RabbitMQä¸­çš„å¦ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œå®ƒç”¨äºå¤„ç†æ— æ³•æˆåŠŸä¼ é€’åˆ°ç›®æ ‡é˜Ÿåˆ—çš„æ¶ˆæ¯ã€‚å½“é˜Ÿåˆ—è¶…è¿‡å…¶å®¹é‡é™åˆ¶æˆ–æ¶ˆæ¯çš„TTLæ—¶é—´å·²è¿‡æœŸæ—¶ï¼Œæ¶ˆæ¯å¯èƒ½ä¼šè¢«ä¸¢å¼ƒæˆ–è€…é‡æ–°æ’é˜Ÿã€‚ä½†æ˜¯ï¼Œå¦‚æœå°†DLXä¸é˜Ÿåˆ—å…³è”èµ·æ¥ï¼Œé‚£ä¹ˆè¿™äº›æ— æ³•æˆåŠŸä¼ é€’çš„æ¶ˆæ¯å°±å¯ä»¥å‘é€åˆ°æŒ‡å®šçš„äº¤æ¢å™¨ä¸­è¿›è¡Œå¤„ç†ã€‚</p><h3 id="æ¶ˆæ¯ä¼˜å…ˆçº§"><a class="markdownIt-Anchor" href="#æ¶ˆæ¯ä¼˜å…ˆçº§"></a> æ¶ˆæ¯ä¼˜å…ˆçº§ï¼š</h3><p>RabbitMQæ”¯æŒä¸ºæ¯ä¸ªæ¶ˆæ¯è®¾ç½®ä¼˜å…ˆçº§ï¼Œè¿™å…è®¸æ¶ˆè´¹è€…æœ‰é€‰æ‹©åœ°è·å–å…·æœ‰é«˜ä¼˜å…ˆçº§çš„æ¶ˆæ¯ã€‚å½“å¤šä¸ªæ¶ˆæ¯åŒæ—¶å‡ºç°åœ¨é˜Ÿåˆ—ä¸­æ—¶ï¼Œä¼˜å…ˆçº§è¾ƒé«˜çš„æ¶ˆæ¯å°†é¦–å…ˆè¢«æ¶ˆè´¹ã€‚</p><h3 id="rpcremote-procedure-call"><a class="markdownIt-Anchor" href="#rpcremote-procedure-call"></a> RPCï¼ˆRemote Procedure Callï¼‰ï¼š</h3><p>RPCæ˜¯ä¸€ç§è¿œç¨‹è°ƒç”¨æŠ€æœ¯ï¼Œå®ƒå…è®¸å®¢æˆ·ç«¯é€šè¿‡ç½‘ç»œè°ƒç”¨æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶æ¥æ”¶å…¶è¿”å›å€¼ã€‚åœ¨RabbitMQä¸­ï¼ŒRPCé€šå¸¸ä½¿ç”¨è¯·æ±‚-å“åº”æ¨¡å¼æ¥å®ç°ã€‚å®¢æˆ·ç«¯å‘å¸ƒè¯·æ±‚æ¶ˆæ¯åˆ°ä¸€ä¸ªç‰¹å®šçš„é˜Ÿåˆ—ä¸­ï¼Œç„¶åç­‰å¾…æœåŠ¡å™¨è¿”å›çš„å“åº”æ¶ˆæ¯ã€‚</p><h3 id="æ¶ˆæ¯ç¡®è®¤è¶…æ—¶"><a class="markdownIt-Anchor" href="#æ¶ˆæ¯ç¡®è®¤è¶…æ—¶"></a> æ¶ˆæ¯ç¡®è®¤è¶…æ—¶ï¼š</h3><p>å½“æ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯æ—¶ï¼Œå¦‚æœç”±äºæŸç§åŸå› å¯¼è‡´æ¶ˆè´¹è€…å´©æºƒæˆ–è¶…æ—¶ï¼Œåˆ™æ¶ˆæ¯å¯èƒ½ä¼šé‡æ–°æ’é˜Ÿã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥è®¾ç½®æ¶ˆæ¯ç¡®è®¤è¶…æ—¶æ—¶é—´ï¼Œå³åœ¨ä¸€å®šæ—¶é—´å†…æœªç¡®è®¤çš„æ¶ˆæ¯å°†è¢«é‡æ–°æ’é˜Ÿã€‚</p><h3 id="rabbitmqé›†ç¾¤æ¨¡å¼"><a class="markdownIt-Anchor" href="#rabbitmqé›†ç¾¤æ¨¡å¼"></a> RabbitMQé›†ç¾¤æ¨¡å¼ï¼š</h3><p>é›†ç¾¤æ˜¯ä¸€ç§æ‰©å±•RabbitMQçš„æ–¹æ³•ï¼Œå®ƒå…è®¸å¤šä¸ªRabbitMQèŠ‚ç‚¹ç»„æˆä¸€ä¸ªé€»è¾‘ä¸Šçš„å•ä¸€å®ä½“ã€‚åœ¨é›†ç¾¤ä¸­ï¼Œé˜Ÿåˆ—ã€äº¤æ¢å™¨å’Œç»‘å®šç­‰å…ƒç´ è¢«å¤åˆ¶åˆ°æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œè½¬å‘ã€‚è¿™æ ·å°±å¯ä»¥æé«˜å¯ç”¨æ€§ã€é¿å…å•ç‚¹æ•…éšœï¼Œå¹¶æé«˜æ¶ˆæ¯å¤„ç†ååé‡ã€‚é›†ç¾¤ä¸­çš„èŠ‚ç‚¹å¯ä»¥é€šè¿‡ç½‘ç»œè¿æ¥æˆ–è€…åœ¨åŒä¸€ä¸»æœºä¸Šè¿è¡Œæ¥å®ç°ã€‚</p><h3 id="sslåŠ å¯†ä¼ è¾“"><a class="markdownIt-Anchor" href="#sslåŠ å¯†ä¼ è¾“"></a> SSLåŠ å¯†ä¼ è¾“ï¼š</h3><p>RabbitMQæ”¯æŒä½¿ç”¨SSL/TLSåè®®å¯¹æ¶ˆæ¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€‚SSL/TLSæ˜¯ä¸€ç§å®‰å…¨é€šä¿¡åè®®ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€ä¸ªå®‰å…¨çš„é€šé“ï¼Œé˜²æ­¢ä¸­é—´äººæ”»å‡»å’Œæ•°æ®æ³„æ¼ã€‚åœ¨ä½¿ç”¨SSL/TLSåè®®æ—¶ï¼Œéœ€è¦ä¸ºRabbitMQç”Ÿæˆè¯ä¹¦ï¼Œå¹¶å°†å…¶å®‰è£…åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸Šã€‚</p><h3 id="webç®¡ç†ç•Œé¢"><a class="markdownIt-Anchor" href="#webç®¡ç†ç•Œé¢"></a> Webç®¡ç†ç•Œé¢ï¼š</h3><p>RabbitMQæä¾›äº†ä¸€ä¸ªWebç®¡ç†ç•Œé¢ï¼Œç”¨äºç›‘æ§å’Œç®¡ç†RabbitMQæœåŠ¡å™¨ã€‚ç®¡ç†ç•Œé¢å¯ä»¥é€šè¿‡Webæµè§ˆå™¨è®¿é—®ï¼Œå¹¶æä¾›äº†ä¸€ç³»åˆ—ç®¡ç†å·¥å…·ï¼Œä¾‹å¦‚ç®¡ç†é˜Ÿåˆ—ã€äº¤æ¢å™¨ã€ç»‘å®šã€ç”¨æˆ·å’Œæƒé™ç­‰ã€‚é€šè¿‡ç®¡ç†ç•Œé¢ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æŸ¥çœ‹RabbitMQçš„çŠ¶æ€ä¿¡æ¯ã€è®¾ç½®å‚æ•°ã€è¯Šæ–­é—®é¢˜ç­‰ã€‚</p><h3 id="policy"><a class="markdownIt-Anchor" href="#policy"></a> Policyï¼š</h3><p>RabbitMQçš„ç­–ç•¥åŠŸèƒ½å¯ä»¥è‡ªåŠ¨åŒ–ç®¡ç†RabbitMQä¸­çš„é˜Ÿåˆ—ã€äº¤æ¢å™¨ã€ç»‘å®šç­‰å¯¹è±¡çš„è¡Œä¸ºã€‚ç­–ç•¥å¯ä»¥å¸®åŠ©è‡ªåŠ¨åŒ–ç®¡ç†RabbitMQä¸­çš„å„ç§å¯¹è±¡ï¼Œä¾‹å¦‚é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ã€æ¶ˆæ¯çš„æœ€å¤§TTLæ—¶é—´ç­‰ï¼Œè¿™äº›éƒ½å¯ä»¥åœ¨éœ€è¦æ—¶è‡ªåŠ¨åº”ç”¨äºé˜Ÿåˆ—æˆ–äº¤æ¢å™¨ä¸Šã€‚</p><h3 id="shovel"><a class="markdownIt-Anchor" href="#shovel"></a> Shovelï¼š</h3><p>RabbitMQçš„Shovelæ’ä»¶å¯ä»¥å°†æ¶ˆæ¯ä»ä¸€ä¸ªRabbitMQæœåŠ¡å™¨å¤åˆ¶åˆ°å¦ä¸€ä¸ªRabbitMQæœåŠ¡å™¨ã€‚å®ƒå…è®¸åœ¨ä¸åŒçš„RabbitMQé›†ç¾¤ä¹‹é—´è¿›è¡Œæ•°æ®å¤åˆ¶å’Œè½¬ç§»ï¼Œä»è€Œå®ç°æ›´é«˜çš„å¯ç”¨æ€§å’Œå®¹é”™æ€§ã€‚</p><h3 id="management-plugin"><a class="markdownIt-Anchor" href="#management-plugin"></a> Management Pluginï¼š</h3><p>RabbitMQçš„ç®¡ç†æ’ä»¶æä¾›äº†ä¸€ç³»åˆ—RESTful APIï¼Œå¯ä»¥é€šè¿‡HTTPåè®®è°ƒç”¨æ¥ç®¡ç†RabbitMQæœåŠ¡å™¨ã€‚è¿™ä¸ªæ’ä»¶ä¹Ÿæ˜¯Webç®¡ç†ç•Œé¢çš„åŸºç¡€ï¼Œå› æ­¤å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨è„šæœ¬å’Œç¨‹åºæ¥ç®¡ç†RabbitMQæœåŠ¡å™¨ã€‚</p><h3 id="ingress-flow-control"><a class="markdownIt-Anchor" href="#ingress-flow-control"></a> Ingress Flow Controlï¼š</h3><p>RabbitMQæ”¯æŒå¯¹å…¥ç«™æµé‡çš„æ§åˆ¶ã€‚å½“RabbitMQèŠ‚ç‚¹çš„å†…å­˜å ç”¨è¿‡é«˜æ—¶ï¼Œå¯ä»¥é€šè¿‡Ingress Flow Controlæ¥é™åˆ¶ç”Ÿäº§è€…å‘é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯çš„é€Ÿç‡ï¼Œä»¥é¿å…é˜Ÿåˆ—æº¢å‡ºã€‚</p><h1 id="4-rabbitmqçš„ç®€å•ä¸Šæ‰‹åº”ç”¨"><a class="markdownIt-Anchor" href="#4-rabbitmqçš„ç®€å•ä¸Šæ‰‹åº”ç”¨"></a> 4ã€RabbitMQçš„ç®€å•ä¸Šæ‰‹åº”ç”¨</h1><h3 id="ç¬¬ä¸€æ­¥å¼•å…¥pomä¾èµ–"><a class="markdownIt-Anchor" href="#ç¬¬ä¸€æ­¥å¼•å…¥pomä¾èµ–"></a> ç¬¬ä¸€æ­¥ï¼šå¼•å…¥<code>pom</code>ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pom.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>rabbitmq-demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- RabbitMQ Client --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.rabbitmq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>amqp-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.13.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¬¬äºŒæ­¥åˆ›å»ºç”Ÿäº§è€…ç±»produceerjava"><a class="markdownIt-Anchor" href="#ç¬¬äºŒæ­¥åˆ›å»ºç”Ÿäº§è€…ç±»produceerjava"></a> ç¬¬äºŒæ­¥ï¼šåˆ›å»ºç”Ÿäº§è€…ç±»<code>Produceer.java</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Producer.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.rabbitmq.client.Channel;</span><br><span class="line"><span class="keyword">import</span> com.rabbitmq.client.Connection;</span><br><span class="line"><span class="keyword">import</span> com.rabbitmq.client.ConnectionFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Producer</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å®šä¹‰é˜Ÿåˆ—åç§°</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;test-queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºè¿æ¥å·¥å‚</span></span><br><span class="line">    <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">    <span class="comment">// è®¾ç½®RabbitMQæœåŠ¡å™¨çš„åœ°å€</span></span><br><span class="line">    factory.setHost(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">    <span class="comment">// è®¾ç½®RabbitMQæœåŠ¡å™¨çš„ç«¯å£ï¼Œé»˜è®¤ä¸º5672</span></span><br><span class="line">    factory.setPort(<span class="number">5672</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºè¿æ¥</span></span><br><span class="line">    <span class="keyword">try</span> (<span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line">         <span class="comment">// åˆ›å»ºé€šé“</span></span><br><span class="line">         <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel()) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å£°æ˜é˜Ÿåˆ—</span></span><br><span class="line">      <span class="comment">// å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span></span><br><span class="line">      <span class="comment">// å‚æ•°2ï¼šæ˜¯å¦æŒä¹…åŒ–é˜Ÿåˆ—ï¼ˆé˜Ÿåˆ—åœ¨æœåŠ¡å™¨é‡å¯æ—¶æ˜¯å¦ä¾ç„¶å­˜åœ¨ï¼‰</span></span><br><span class="line">      <span class="comment">// å‚æ•°3ï¼šæ˜¯å¦æ’ä»–ï¼ˆä»…æ­¤è¿æ¥å¯è§ï¼‰</span></span><br><span class="line">      <span class="comment">// å‚æ•°4ï¼šæ˜¯å¦è‡ªåŠ¨åˆ é™¤ï¼ˆé˜Ÿåˆ—åœ¨ä¸ä½¿ç”¨æ—¶æ˜¯å¦è‡ªåŠ¨åˆ é™¤ï¼‰</span></span><br><span class="line">      <span class="comment">// å‚æ•°5ï¼šé˜Ÿåˆ—çš„å…¶ä»–å±æ€§</span></span><br><span class="line">      channel.queueDeclare(QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å®šä¹‰æ¶ˆæ¯å†…å®¹</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;Hello, RabbitMQ!&quot;</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å‘å¸ƒæ¶ˆæ¯</span></span><br><span class="line">      <span class="comment">// å‚æ•°1ï¼šäº¤æ¢æœºåç§°ï¼Œä¸ºç©ºå­—ç¬¦ä¸²è¡¨ç¤ºä½¿ç”¨é»˜è®¤çš„ç›´æ¥äº¤æ¢æœºæ¨¡å¼</span></span><br><span class="line">      <span class="comment">// å‚æ•°2ï¼šè·¯ç”±é”®ï¼Œè¿™é‡Œä½¿ç”¨é˜Ÿåˆ—åç§°</span></span><br><span class="line">      <span class="comment">// å‚æ•°3ï¼šæ¶ˆæ¯çš„å…¶ä»–å±æ€§</span></span><br><span class="line">      <span class="comment">// å‚æ•°4ï¼šæ¶ˆæ¯ä½“</span></span><br><span class="line">      channel.basicPublish(<span class="string">&quot;&quot;</span>, QUEUE_NAME, <span class="literal">null</span>, message.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">      System.out.println(<span class="string">&quot; å‘é€æ¶ˆæ¯ï¼š &#x27;&quot;</span> + message + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸‰æ­¥åˆ›å»ºæ¶ˆè´¹è€…ç±»consumerjava"><a class="markdownIt-Anchor" href="#ç¬¬ä¸‰æ­¥åˆ›å»ºæ¶ˆè´¹è€…ç±»consumerjava"></a> ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºæ¶ˆè´¹è€…ç±»<code>Consumer.java</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.rabbitmq.client.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Consumer</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;test-queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">    factory.setHost(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">    factory.setPort(<span class="number">5672</span>);</span><br><span class="line"><span class="comment">// åˆ›å»ºè¿æ¥</span></span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line">    <span class="comment">// åˆ›å»ºé¢‘é“</span></span><br><span class="line">    <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">    channel.queueDeclare(QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot; ç­‰å¾…ç”Ÿäº§è€…å‘å¸ƒæ¶ˆæ¯ä¸­...&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªæ¶ˆè´¹è€…å¯¹è±¡</span></span><br><span class="line">    <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumerTag, delivery) -&gt; &#123;</span><br><span class="line">      <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(delivery.getBody(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">      System.out.println(<span class="string">&quot;è·å–åˆ°æ¶ˆæ¯ï¼š &#x27;&quot;</span> + message + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼€å§‹æ¶ˆè´¹æ¶ˆæ¯</span></span><br><span class="line">    <span class="comment">// å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span></span><br><span class="line">    <span class="comment">// å‚æ•°2ï¼šæ˜¯å¦è‡ªåŠ¨ç¡®è®¤æ”¶åˆ°æ¶ˆæ¯ï¼ˆè®¾ç½®ä¸ºtrueæ—¶ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨ç¡®è®¤æ”¶åˆ°æ¶ˆæ¯ï¼‰</span></span><br><span class="line">    <span class="comment">// å‚æ•°3ï¼šå®šä¹‰çš„æ¶ˆè´¹è€…å¯¹è±¡ (DeliverCallback)</span></span><br><span class="line">    <span class="comment">// å‚æ•°4ï¼šå–æ¶ˆæ—¶çš„å›è°ƒ</span></span><br><span class="line">    channel.basicConsume(QUEUE_NAME, <span class="literal">true</span>, deliverCallback, consumerTag -&gt; &#123; &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬å››æ­¥ä»£ç è®²è§£"><a class="markdownIt-Anchor" href="#ç¬¬å››æ­¥ä»£ç è®²è§£"></a> ç¬¬å››æ­¥ï¼šä»£ç è®²è§£ï¼š</h3><p>ä»¥ä¸Šæ˜¯ä¸€ä¸ªç®€å•çš„<code>RabbitMQ</code>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ç¤ºä¾‹ã€‚ç”Ÿäº§è€…å°†å‘é€ä¸€æ¡æ¶ˆæ¯åˆ°åä¸º<code>test-queue</code>çš„é˜Ÿåˆ—ï¼Œè€Œæ¶ˆè´¹è€…å°†æ¥æ”¶å¹¶æ‰“å°è¿™æ¡æ¶ˆæ¯ã€‚è¿™ä¸ªç¤ºä¾‹ä½¿ç”¨äº†é»˜è®¤çš„ç›´æ¥äº¤æ¢æœºæ¨¡å¼ï¼Œå®ƒå°†æ ¹æ®è·¯ç”±é”®å°†æ¶ˆæ¯å‘é€åˆ°ç›¸åº”çš„é˜Ÿåˆ—ã€‚</p><p>è¯·æ³¨æ„ï¼Œä¸ºäº†è¿è¡Œæ­¤ç¤ºä¾‹ï¼Œæ‚¨éœ€è¦åœ¨æœ¬åœ°è¿è¡Œä¸€ä¸ª<code>RabbitMQ</code>æœåŠ¡å™¨ã€‚åœ¨è¿è¡Œæ­¤ç¤ºä¾‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²æ­£ç¡®å®‰è£…å’Œå¯åŠ¨<code>RabbitMQ</code>æœåŠ¡å™¨ã€‚æ‚¨å¯ä»¥åœ¨<a href="https://www.rabbitmq.com/download.html">RabbitMQå®˜æ–¹æ–‡æ¡£</a>ä¸­æ‰¾åˆ°æœ‰å…³å¦‚ä½•å®‰è£…å’Œå¯åŠ¨<code>RabbitMQ</code>æœåŠ¡å™¨çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><h1 id="5-rabbitmqçš„å‘å±•å†ç¨‹"><a class="markdownIt-Anchor" href="#5-rabbitmqçš„å‘å±•å†ç¨‹"></a> 5ã€RabbitMQçš„å‘å±•å†ç¨‹</h1><blockquote><p><code>2004å¹´</code>ï¼šLShiftå…¬å¸å¼€å§‹å¼€å‘åä¸ºâ€œMetroâ€çš„é¡¹ç›®ï¼Œä½œä¸ºä¸€ç§æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿã€‚</p><p><code>2006å¹´</code>ï¼šMetroé¡¹ç›®æ”¹åä¸ºRabbitMQï¼Œå¹¶åœ¨2007å¹´é¦–æ¬¡å‘å¸ƒã€‚è¿™ä¸ªç‰ˆæœ¬æ”¯æŒAMQPï¼ˆAdvanced Message Queuing Protocolï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†çš„åè®®ï¼Œç”¨äºå¼‚æ­¥æ¶ˆæ¯ä¼ é€’ã€‚</p><p><code>2008å¹´</code>ï¼šRabbit Technologiesæˆç«‹ï¼Œä¸“é—¨è‡´åŠ›äºRabbitMQçš„å¼€å‘å’Œæ”¯æŒã€‚</p><p><code>2010å¹´</code>ï¼šRabbitMQ 2.0å‘å¸ƒï¼ŒåŠ å…¥äº†è®¸å¤šæ–°åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¯æ’æ‹”çš„èº«ä»½éªŒè¯å’Œæˆæƒæœºåˆ¶ã€ç®¡ç†ç•Œé¢ã€WebSocketsæ”¯æŒä»¥åŠæ›´å¥½çš„é›†ç¾¤æ”¯æŒã€‚</p><p><code>2011å¹´</code>ï¼šSpringSourceå…¬å¸æ”¶è´­Rabbit Technologiesï¼Œå°†RabbitMQæ•´åˆåˆ°Springæ¡†æ¶ä¸­ã€‚</p><p><code>2013å¹´</code>ï¼šPivotalè½¯ä»¶å…¬å¸æˆç«‹ï¼ŒRabbitMQè¢«è§†ä¸ºå…¶é‡è¦ç»„æˆéƒ¨åˆ†ä¹‹ä¸€ã€‚</p><p><code>2014å¹´</code>ï¼šRabbitMQ 3.3å‘å¸ƒï¼Œå¢åŠ äº†SSL/TLSæ”¯æŒã€JSONç¼–ç å’Œè§£ç ã€é•œåƒé˜Ÿåˆ—ç­‰åŠŸèƒ½ã€‚</p><p><code>2015å¹´</code>ï¼šRabbitMQ 3.5å‘å¸ƒï¼ŒåŠ å…¥äº†é’ˆå¯¹é«˜å¯ç”¨æ€§å’Œå¯ä¼¸ç¼©æ€§çš„æ–°ç‰¹æ€§ï¼Œå¦‚Quorumé˜Ÿåˆ—ã€Publisher Confirmså’ŒConsumer Acknowledgementsç­‰ã€‚</p><p><code>2016å¹´</code>ï¼šRabbitMQ 3.6å‘å¸ƒï¼Œå¼•å…¥äº†è‡ªåŠ¨åŒ–Shardingã€LRUé˜Ÿåˆ—å’ŒStreamæ’ä»¶ç­‰æ–°åŠŸèƒ½ã€‚</p><p><code>2018å¹´</code>ï¼šRabbitMQ 3.7å‘å¸ƒï¼Œå¼•å…¥äº†Metrics Collectorã€Delayed Messageæ’ä»¶ç­‰æ–°åŠŸèƒ½ï¼ŒåŒæ—¶æ”¹è¿›äº†ç°æœ‰çš„Quorumé˜Ÿåˆ—å’ŒStreamæ’ä»¶ã€‚</p><p><code>2020å¹´</code>ï¼šRabbitMQ 3.8å‘å¸ƒï¼Œå¼•å…¥äº†æ–°çš„é˜Ÿåˆ—ç±»å‹ï¼Œå¦‚lazyé˜Ÿåˆ—ã€å•æ¡æ¶ˆæ¯ä¼ é€’å’Œæµæ§åˆ¶ï¼Œè¿˜å¢å¼ºäº†å®‰å…¨æ€§å’Œå¯ä¼¸ç¼©æ€§ã€‚</p></blockquote><h1 id="6-rabbitmqçš„å®‰è£…é…ç½®å¸è½½"><a class="markdownIt-Anchor" href="#6-rabbitmqçš„å®‰è£…é…ç½®å¸è½½"></a> 6ã€RabbitMQçš„å®‰è£…ï¼Œé…ç½®ï¼Œå¸è½½</h1><h3 id="1-å®‰è£…"><a class="markdownIt-Anchor" href="#1-å®‰è£…"></a> 1ã€å®‰è£…ï¼š</h3><blockquote><p>1ã€å®‰è£…<code>RabbitMQ</code></p><p>1)ã€ä¸‹è½½å®‰è£…ç¨‹åº</p><p>é¦–å…ˆï¼Œæ‚¨éœ€è¦ä»<code>RabbitMQ</code>å®˜ç½‘ï¼ˆ<a href="https://www.rabbitmq.com/%EF%BC%89%E4%B8%8B%E8%BD%BD%E9%80%82%E7%94%A8%E4%BA%8E%E6%82%A8%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%89%88%E6%9C%AC%E7%9A%84%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85%E5%8C%85%E3%80%82">https://www.rabbitmq.com/ï¼‰ä¸‹è½½é€‚ç”¨äºæ‚¨æ“ä½œç³»ç»Ÿç‰ˆæœ¬çš„äºŒè¿›åˆ¶å®‰è£…åŒ…ã€‚</a></p><p>2)ã€å®‰è£…åˆ°æŒ‡å®šç›®å½•</p><p>å°†å®‰è£…åŒ…è§£å‹åˆ°æ‚¨å¸Œæœ›å®‰è£…<code>RabbitMQ</code>çš„ç›®å½•ä¸­ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å°†å…¶è§£å‹åˆ°<code>C:\Program Files\RabbitMQ</code>ç›®å½•ä¸‹ã€‚</p><p>3)ã€å®‰è£…<code>Erlang</code>è¿è¡Œæ—¶ç¯å¢ƒ</p><p><code>RabbitMQ</code>ä¾èµ–äº<code>Erlang</code>è¿è¡Œæ—¶ç¯å¢ƒï¼Œå› æ­¤æ‚¨éœ€è¦å…ˆå®‰è£…<code>Erlang</code>ã€‚æ‚¨å¯ä»¥ä»<code>Erlang</code>å®˜ç½‘ï¼ˆ<a href="https://www.erlang.org/downloads%EF%BC%89%E4%B8%8B%E8%BD%BD%E5%AF%B9%E5%BA%94%E7%89%88%E6%9C%AC%E7%9A%84%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F%E3%80%82">https://www.erlang.org/downloadsï¼‰ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„å®‰è£…ç¨‹åºã€‚</a></p><p>4)ã€å¯åŠ¨<code>RabbitMQ</code>æœåŠ¡</p><p>æ‰“å¼€æ§åˆ¶å°æˆ–ç»ˆç«¯ï¼Œè¿›å…¥è§£å‹åçš„<code>RabbitMQ</code>ç›®å½•ã€‚åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨<code>RabbitMQ</code>æœåŠ¡ï¼š</p><p><code>rabbitmq-server start</code></p><p>å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨å°†çœ‹åˆ°ç±»ä¼¼äºä»¥ä¸‹è¾“å‡ºï¼š</p><p><code>Starting broker... completed with 6 plugins.</code></p><p>å¦‚æœæç¤º<code>â€œError: unable to connect to node 'rabbit@localhost': nodedownâ€</code>ï¼Œåˆ™å¯èƒ½æ˜¯ç”±äº<code>Erlang</code>æœªæ­£ç¡®å®‰è£…æˆ–é…ç½®å¯¼è‡´çš„é—®é¢˜ã€‚</p></blockquote><h3 id="2-rabbitmqç®¡ç†ç•Œé¢"><a class="markdownIt-Anchor" href="#2-rabbitmqç®¡ç†ç•Œé¢"></a> 2ã€<code>RabbitMQ</code>ç®¡ç†ç•Œé¢</h3><blockquote><p><code>RabbitMQ</code>æä¾›äº†ä¸€ä¸ªWebç®¡ç†ç•Œé¢ï¼Œæ–¹ä¾¿ç”¨æˆ·ç®¡ç†å’Œç›‘æ§<code>RabbitMQ</code>æœåŠ¡å™¨ã€‚æ‚¨å¯ä»¥åœ¨Webæµè§ˆå™¨ä¸­è®¿é—®<code>http://localhost:15672</code>å³å¯æ‰“å¼€ç®¡ç†ç•Œé¢ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦ä½¿ç”¨<code>guest/guest</code>ä½œä¸ºç”¨æˆ·åå’Œå¯†ç ç™»å½•ç®¡ç†ç•Œé¢ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªè´¦æˆ·åªæœ‰æœ€åŸºæœ¬çš„æƒé™ï¼Œä¸èƒ½è¿›è¡Œé«˜çº§æ“ä½œã€‚å¦‚æœéœ€è¦è®¾ç½®ç”¨æˆ·å’Œæƒé™ï¼Œè¯·åœ¨ç®¡ç†ç•Œé¢æ·»åŠ ç”¨æˆ·å’Œæƒé™ã€‚</p></blockquote><h3 id="3-é…ç½®é¡¹"><a class="markdownIt-Anchor" href="#3-é…ç½®é¡¹"></a> 3ã€é…ç½®é¡¹</h3><p>é…ç½®é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>RabbitMQ</code>æœåŠ¡ä¼šç›‘å¬æœ¬åœ°IPåœ°å€127.0.0.1å’Œ<code>5672</code>ç«¯å£ã€‚å¦‚æœéœ€è¦ä¿®æ”¹ç›‘å¬åœ°å€å’Œç«¯å£å·ï¼Œå¯ä»¥ç¼–è¾‘<code>rabbitmq.config</code>æ–‡ä»¶å¹¶é‡å¯<code>RabbitMQ</code>æœåŠ¡ã€‚<code>RabbitMQ</code>é…ç½®æ–‡ä»¶ä¸­å¸¸è§çš„é…ç½®é¡¹ï¼š</p><blockquote><ol><li><code>listener</code>ï¼šæŒ‡å®šRabbitMQç›‘å¬å™¨çš„ç«¯å£å’Œåœ°å€ï¼›</li><li><code>log_levels</code>ï¼šè®¾ç½®æ—¥å¿—çº§åˆ«ï¼ŒåŒ…æ‹¬debugã€infoã€warningã€errorç­‰ï¼›</li><li><code>loopback_users</code>ï¼šå…è®¸ç”¨æˆ·åå•ï¼Œç”¨äºå®šä¹‰å¯ä»¥é€šè¿‡æœ¬åœ°å›ç¯æ¥å£è®¿é—®RabbitMQæœåŠ¡çš„ç”¨æˆ·åˆ—è¡¨ï¼›</li><li><code>vm_memory_high_watermark</code>ï¼šæŒ‡å®šå†…å­˜ä½¿ç”¨çš„é«˜æ°´ä½æ ‡è®°å€¼ï¼Œå½“è¾¾åˆ°è¿™ä¸ªå€¼æ—¶ï¼ŒRabbitMQå°†åœæ­¢æ¥å—æ–°çš„æ¶ˆæ¯ï¼›</li><li><code>disk_free_limit</code>ï¼šæŒ‡å®šç£ç›˜ç©ºé—´çš„ä½æ°´ä½æ ‡è®°å€¼ï¼Œå½“è¾¾åˆ°è¿™ä¸ªå€¼æ—¶ï¼ŒRabbitMQå°†åœæ­¢æ¥å—æ–°çš„æ¶ˆæ¯ï¼›</li><li><code>queue_master_locator</code>ï¼šæŒ‡å®šé˜Ÿåˆ—èŠ‚ç‚¹æ˜¯å¦å¯ä»¥è‡ªåŠ¨åˆ‡æ¢ï¼Œä¸»è¦ç”¨äºé›†ç¾¤ç¯å¢ƒä¸­ï¼›</li><li><code>cluster_partition_handling</code>ï¼šæŒ‡å®šåœ¨å‘ç”Ÿç½‘ç»œåˆ†åŒºæ—¶RabbitMQå¦‚ä½•å¤„ç†ï¼Œå¯é€‰å‚æ•°åŒ…æ‹¬pause_minorityã€autohealå’Œignoreï¼›</li><li><code>management.listener.port</code>ï¼šæŒ‡å®šRabbitMQç®¡ç†ç•Œé¢ç›‘å¬çš„ç«¯å£å·ï¼Œé»˜è®¤ä¸º15672ï¼›</li><li><code>management.listener.ssl</code>: æŒ‡å®šæ˜¯å¦ä½¿ç”¨SSLæ¥åŠ å¯†RabbitMQç®¡ç†ç•Œé¢çš„æ•°æ®ä¼ è¾“ï¼Œé»˜è®¤ä¸ºfalseã€‚</li><li><code>rabbitmqctl_path</code>: é…ç½®å‘½ä»¤è¡Œå·¥å…·rabbitmqctlçš„è·¯å¾„ã€‚</li></ol></blockquote><h3 id="4-å¸è½½"><a class="markdownIt-Anchor" href="#4-å¸è½½"></a> 4ã€å¸è½½</h3><blockquote><ol><li>åœ¨æ§åˆ¶å°æˆ–ç»ˆç«¯ä¸­åœæ­¢æ­£åœ¨è¿è¡Œçš„RabbitMQæœåŠ¡ã€‚</li><li>åˆ é™¤RabbitMQç›®å½•åŠå…¶å­ç›®å½•å’Œæ–‡ä»¶ã€‚</li><li>åˆ é™¤RabbitMQæœåŠ¡æ‰€åˆ›å»ºçš„ç”¨æˆ·å’Œç»„ã€‚</li><li>å¦‚æœå®‰è£…äº†Erlangï¼Œä¹Ÿéœ€è¦å°†å…¶å¸è½½ã€‚</li></ol></blockquote><h1 id="7-rabbitmqæ•´åˆspringboot"><a class="markdownIt-Anchor" href="#7-rabbitmqæ•´åˆspringboot"></a> 7ã€RabbitMQæ•´åˆSpringBoot</h1><h3 id="1-æ·»åŠ ä¾èµ–"><a class="markdownIt-Anchor" href="#1-æ·»åŠ ä¾èµ–"></a> 1)ã€æ·»åŠ ä¾èµ–</h3><p>é¦–å…ˆï¼Œåœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®è¿æ¥"><a class="markdownIt-Anchor" href="#2-é…ç½®è¿æ¥"></a> 2)ã€é…ç½®è¿æ¥</h3><p>åœ¨application.propertiesæˆ–application.ymlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">guest</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">guest</span></span><br></pre></td></tr></table></figure><h3 id="3-å£°æ˜é˜Ÿåˆ—"><a class="markdownIt-Anchor" href="#3-å£°æ˜é˜Ÿåˆ—"></a> 3)ã€å£°æ˜é˜Ÿåˆ—</h3><p>åˆ›å»ºä¸€ä¸ªåä¸º&quot;hello&quot;çš„é˜Ÿåˆ—ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RabbitConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">queue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-å‘é€æ¶ˆæ¯"><a class="markdownIt-Anchor" href="#4-å‘é€æ¶ˆæ¯"></a> 4)ã€å‘é€æ¶ˆæ¯</h3><p>åœ¨éœ€è¦å‘é€æ¶ˆæ¯çš„ç±»ä¸­æ³¨å…¥RabbitTemplateï¼Œè°ƒç”¨convertAndSendæ–¹æ³•å³å¯å‘é€æ¶ˆæ¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RabbitTemplate rabbitTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyService</span><span class="params">(RabbitTemplate rabbitTemplate)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rabbitTemplate = rabbitTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        rabbitTemplate.convertAndSend(<span class="string">&quot;hello&quot;</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-æ¥æ”¶æ¶ˆæ¯"><a class="markdownIt-Anchor" href="#5-æ¥æ”¶æ¶ˆæ¯"></a> 5)ã€æ¥æ”¶æ¶ˆæ¯</h3><p>åˆ›å»ºä¸€ä¸ªæ¶ˆè´¹è€…æ¥æ¥æ”¶æ¶ˆæ¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Receiver</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener(queues = &quot;hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receiveMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Received: &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-è¿è¡Œåº”ç”¨ç¨‹åº"><a class="markdownIt-Anchor" href="#6-è¿è¡Œåº”ç”¨ç¨‹åº"></a> 6)ã€è¿è¡Œåº”ç”¨ç¨‹åº</h3><p>ç°åœ¨ï¼Œæ‚¨å¯ä»¥è¿è¡Œåº”ç”¨ç¨‹åºå¹¶å°è¯•å‘é€å’Œæ¥æ”¶æ¶ˆæ¯äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> <span class="keyword">implements</span> <span class="title class_">CommandLineRunner</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MyService myService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Application</span><span class="params">(MyService myService)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.myService = myService;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        myService.sendMessage(<span class="string">&quot;Hello, world!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="8-rabbitmqé€‚ç”¨çš„ä¸šåŠ¡åœºæ™¯"><a class="markdownIt-Anchor" href="#8-rabbitmqé€‚ç”¨çš„ä¸šåŠ¡åœºæ™¯"></a> 8ã€RabbitMQé€‚ç”¨çš„ä¸šåŠ¡åœºæ™¯</h1><h3 id="1-ç½‘ç»œçˆ¬è™«"><a class="markdownIt-Anchor" href="#1-ç½‘ç»œçˆ¬è™«"></a> 1)ã€ç½‘ç»œçˆ¬è™«</h3><blockquote><p>ç½‘ç»œçˆ¬è™«éœ€è¦å¤„ç†å¤§é‡çš„æ•°æ®ï¼ŒåŒ…æ‹¬ä»å¤šä¸ªç½‘ç«™æŠ“å–æ•°æ®ã€è§£æHTMLæ–‡ä»¶ã€å­˜å‚¨æ•°æ®ç­‰ã€‚RabbitMQå¯ä»¥å¸®åŠ©å°†è¿™äº›ä»»åŠ¡åˆ†å‰²æˆå°å—ï¼Œå¹¶ä»¥å¼‚æ­¥æ–¹å¼å¤„ç†ã€‚ç”Ÿäº§è€…å°†å¤šä¸ªä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆè´¹è€…ä¼šé€ä¸ªè·å–å¹¶å¤„ç†å®ƒä»¬ï¼Œä»è€Œæé«˜çˆ¬è™«çš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚</p></blockquote><h3 id="2-ç”µå•†å¹³å°"><a class="markdownIt-Anchor" href="#2-ç”µå•†å¹³å°"></a> 2)ã€ç”µå•†å¹³å°</h3><blockquote><p>ç”µå•†å¹³å°éœ€è¦å¤„ç†å¤§é‡çš„è®¢å•æ•°æ®å’Œåº“å­˜ä¿¡æ¯ï¼ŒåŒæ—¶è¿˜éœ€è¦å‘é€é€šçŸ¥ã€çŸ­ä¿¡å’Œç”µå­é‚®ä»¶ã€‚RabbitMQå¯ä»¥å¸®åŠ©å°†è¿™äº›ä»»åŠ¡åˆ†å‰²æˆå°å—ï¼Œå¹¶ä»¥å¼‚æ­¥æ–¹å¼å¤„ç†ã€‚ç”Ÿäº§è€…å°†å¤šä¸ªä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆè´¹è€…ä¼šé€ä¸ªè·å–å¹¶å¤„ç†å®ƒä»¬ï¼Œä»è€Œæé«˜ç”µå•†å¹³å°çš„æ€§èƒ½å’Œå¯é æ€§ã€‚</p></blockquote><h3 id="3-åœ¨çº¿æ¸¸æˆ"><a class="markdownIt-Anchor" href="#3-åœ¨çº¿æ¸¸æˆ"></a> 3)ã€åœ¨çº¿æ¸¸æˆ</h3><blockquote><p>åœ¨çº¿æ¸¸æˆéœ€è¦å¤„ç†å¤§é‡çš„ç©å®¶è¯·æ±‚ã€è®°å½•æ¸¸æˆçŠ¶æ€ã€è®¡ç®—åˆ†æ•°å’Œæ’åç­‰æ“ä½œã€‚RabbitMQå¯ä»¥å¸®åŠ©å°†è¿™äº›ä»»åŠ¡åˆ†å‰²æˆå°å—ï¼Œå¹¶ä»¥å¼‚æ­¥æ–¹å¼å¤„ç†ã€‚ç”Ÿäº§è€…å°†å¤šä¸ªä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆè´¹è€…ä¼šé€ä¸ªè·å–å¹¶å¤„ç†å®ƒä»¬ï¼Œä»è€Œæé«˜åœ¨çº¿æ¸¸æˆçš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚</p></blockquote><h3 id="4-å¤§æ•°æ®åˆ†æ"><a class="markdownIt-Anchor" href="#4-å¤§æ•°æ®åˆ†æ"></a> 4)ã€å¤§æ•°æ®åˆ†æ</h3><blockquote><p>å¤§æ•°æ®åˆ†æéœ€è¦å¤„ç†å¤§é‡çš„æ•°æ®ï¼ŒåŒ…æ‹¬æ•°æ®æ¸…ç†ã€è½¬æ¢ã€å»ºæ¨¡ç­‰æ“ä½œã€‚RabbitMQå¯ä»¥å¸®åŠ©å°†è¿™äº›ä»»åŠ¡åˆ†å‰²æˆå°å—ï¼Œå¹¶ä»¥å¼‚æ­¥æ–¹å¼å¤„ç†ã€‚ç”Ÿäº§è€…å°†å¤šä¸ªä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆè´¹è€…ä¼šé€ä¸ªè·å–å¹¶å¤„ç†å®ƒä»¬ï¼Œä»è€Œæé«˜å¤§æ•°æ®åˆ†æçš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚</p></blockquote><h3 id="5-é‡‘èäº¤æ˜“"><a class="markdownIt-Anchor" href="#5-é‡‘èäº¤æ˜“"></a> 5)ã€é‡‘èäº¤æ˜“</h3><blockquote><p>é‡‘èäº¤æ˜“éœ€è¦å¤„ç†å¤§é‡çš„æ•°æ®ï¼ŒåŒ…æ‹¬æ”¶é›†ã€å¤„ç†ã€å­˜å‚¨å’Œè½¬å‘äº¤æ˜“ä¿¡æ¯ã€‚RabbitMQå¯ä»¥å¸®åŠ©å°†è¿™äº›ä»»åŠ¡åˆ†å‰²æˆå°å—ï¼Œå¹¶ä»¥å¼‚æ­¥æ–¹å¼å¤„ç†ã€‚ç”Ÿäº§è€…å°†å¤šä¸ªä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆè´¹è€…ä¼šé€ä¸ªè·å–å¹¶å¤„ç†å®ƒä»¬ï¼Œä»è€Œæé«˜é‡‘èäº¤æ˜“çš„æ€§èƒ½å’Œå¯é æ€§ã€‚</p></blockquote><h3 id="6-åˆ†å¸ƒå¼ç³»ç»Ÿ"><a class="markdownIt-Anchor" href="#6-åˆ†å¸ƒå¼ç³»ç»Ÿ"></a> 6)ã€åˆ†å¸ƒå¼ç³»ç»Ÿ</h3><blockquote><p>åˆ†å¸ƒå¼ç³»ç»Ÿéœ€è¦å¤„ç†å¤§é‡çš„æ¶ˆæ¯å’Œäº‹ä»¶ï¼Œä¾‹å¦‚çŠ¶æ€å˜åŒ–ã€æ•…éšœæ¢å¤ç­‰ã€‚RabbitMQå¯ä»¥å¸®åŠ©å°†è¿™äº›ä»»åŠ¡åˆ†å‰²æˆå°å—ï¼Œå¹¶ä»¥å¼‚æ­¥æ–¹å¼å¤„ç†ã€‚ç”Ÿäº§è€…å°†å¤šä¸ªä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆè´¹è€…ä¼šé€ä¸ªè·å–å¹¶å¤„ç†å®ƒä»¬ï¼Œä»è€Œæé«˜åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚</p></blockquote><h3 id="7-ç‰©è”ç½‘"><a class="markdownIt-Anchor" href="#7-ç‰©è”ç½‘"></a> 7)ã€ç‰©è”ç½‘</h3><blockquote><p>ç‰©è”ç½‘è®¾å¤‡éœ€è¦åœ¨äº’è”ç½‘ä¸Šå‘é€å’Œæ¥æ”¶æ•°æ®ï¼Œä¾‹å¦‚ä¼ æ„Ÿå™¨è¯»æ•°ã€è¿åŠ¨æ£€æµ‹ç­‰ã€‚RabbitMQå¯ä»¥å¸®åŠ©å°†è¿™äº›æ•°æ®åˆ†å‰²æˆå°å—ï¼Œå¹¶ä»¥å¼‚æ­¥æ–¹å¼å¤„ç†ã€‚ç”Ÿäº§è€…å°†å¤šä¸ªä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆè´¹è€…ä¼šé€ä¸ªè·å–å¹¶å¤„ç†å®ƒä»¬ï¼Œä»è€Œæé«˜ç‰©è”ç½‘è®¾å¤‡çš„æ€§èƒ½å’Œå¯é æ€§ã€‚</p></blockquote><h3 id="8-ç”µä¿¡è¡Œä¸š"><a class="markdownIt-Anchor" href="#8-ç”µä¿¡è¡Œä¸š"></a> 8)ã€ç”µä¿¡è¡Œä¸š</h3><blockquote><p>ç”µä¿¡è¡Œä¸šéœ€è¦å¤„ç†å¤§é‡çš„é€šä¿¡äº¤æ¢ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‘¼å«è®°å½•ã€çŸ­ä¿¡è®°å½•ã€æµé‡è®°å½•ç­‰ã€‚RabbitMQå¯ä»¥å¸®åŠ©å°†è¿™äº›ä¿¡æ¯åˆ†å‰²æˆå°å—ï¼Œå¹¶ä»¥å¼‚æ­¥æ–¹å¼å¤„ç†ã€‚ç”Ÿäº§è€…å°†å¤šä¸ªä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆè´¹è€…ä¼šé€ä¸ªè·å–å¹¶å¤„ç†å®ƒä»¬ï¼Œä»è€Œæé«˜ç”µä¿¡è¡Œä¸šçš„æ€§èƒ½å’Œå¯é æ€§ã€‚</p></blockquote><h3 id="9-å¤§å‹ä¼ä¸šåº”ç”¨ç¨‹åº"><a class="markdownIt-Anchor" href="#9-å¤§å‹ä¼ä¸šåº”ç”¨ç¨‹åº"></a> 9)ã€å¤§å‹ä¼ä¸šåº”ç”¨ç¨‹åº</h3><blockquote><p>å¤§å‹ä¼ä¸šåº”ç”¨ç¨‹åºéœ€è¦å¤„ç†å¤§é‡çš„ä¸šåŠ¡é€»è¾‘å’Œäº¤æ˜“æ•°æ®ï¼Œä¾‹å¦‚è®¢å•ç®¡ç†ã€åº“å­˜ç®¡ç†ç­‰ã€‚RabbitMQå¯ä»¥å¸®åŠ©å°†è¿™äº›ä»»åŠ¡åˆ†å‰²æˆå°å—ï¼Œå¹¶ä»¥å¼‚æ­¥æ–¹å¼å¤„ç†ã€‚ç”Ÿäº§è€…å°†å¤šä¸ªä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆè´¹è€…ä¼šé€ä¸ªè·å–å¹¶å¤„ç†å®ƒä»¬ï¼Œä»è€Œæé«˜å¤§å‹ä¼ä¸šåº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œå¯é æ€§ã€‚</p></blockquote><h1 id="9-rabbitmqçš„é«˜çº§åŠŸèƒ½ä»‹ç»"><a class="markdownIt-Anchor" href="#9-rabbitmqçš„é«˜çº§åŠŸèƒ½ä»‹ç»"></a> 9ã€RabbitMQçš„é«˜çº§åŠŸèƒ½ä»‹ç»</h1><h3 id="1-äº‹åŠ¡"><a class="markdownIt-Anchor" href="#1-äº‹åŠ¡"></a> 1)ã€äº‹åŠ¡</h3><blockquote><p>RabbitMQæ”¯æŒAMQPåè®®ä¸­çš„äº‹åŠ¡æœºåˆ¶ï¼Œå¯ä»¥ç¡®ä¿å‘é€æ–¹å’Œæ¥æ”¶æ–¹éƒ½å·²ç»å®Œæˆäº†æ¶ˆæ¯ä¼ é€’è¿‡ç¨‹ã€‚åœ¨å‘é€æ¶ˆæ¯ä¹‹å‰ï¼Œç”Ÿäº§è€…å¯ä»¥ä½¿ç”¨txSelectå‘½ä»¤å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨å®Œæˆæ‰€æœ‰æ“ä½œåï¼Œä½¿ç”¨txCommitå‘½ä»¤æäº¤äº‹åŠ¡ã€‚å¦‚æœå‡ºç°é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨txRollbackå‘½ä»¤å›æ»šäº‹åŠ¡ã€‚</p></blockquote><h3 id="2-ç¡®è®¤æœºåˆ¶"><a class="markdownIt-Anchor" href="#2-ç¡®è®¤æœºåˆ¶"></a> 2)ã€ç¡®è®¤æœºåˆ¶</h3><blockquote><p>RabbitMQæ”¯æŒç”Ÿäº§è€…ç¡®è®¤ï¼ˆpublisher confirmsï¼‰æœºåˆ¶ï¼Œå¯ä»¥ç¡®ä¿æ¶ˆæ¯å·²è¢«æˆåŠŸæŠ•é€’åˆ°é˜Ÿåˆ—ä¸­ã€‚å½“æ¶ˆæ¯è¢«æˆåŠŸå¤„ç†åï¼Œæ¶ˆè´¹è€…å°†å‘é€ç¡®è®¤æ¶ˆæ¯ç»™ç”Ÿäº§è€…ã€‚å¦‚æœæ¶ˆæ¯æ— æ³•æ­£ç¡®å¤„ç†ï¼Œæ¶ˆè´¹è€…å°†å‘é€æ‹’ç»æ¶ˆæ¯ç»™ç”Ÿäº§è€…ã€‚</p></blockquote><h3 id="3-æ­»ä¿¡é˜Ÿåˆ—"><a class="markdownIt-Anchor" href="#3-æ­»ä¿¡é˜Ÿåˆ—"></a> 3)ã€æ­»ä¿¡é˜Ÿåˆ—</h3><blockquote><p>æ­»ä¿¡é˜Ÿåˆ—ï¼ˆdead-letter queueï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—ï¼Œç”¨äºå­˜å‚¨æ— æ³•è¢«æ¶ˆè´¹çš„æ¶ˆæ¯ã€‚å½“æ¶ˆæ¯æ— æ³•è¢«è·¯ç”±åˆ°ç›®æ ‡é˜Ÿåˆ—æ—¶ï¼Œå®ƒå°†è¢«é‡æ–°è·¯ç”±åˆ°æ­»ä¿¡é˜Ÿåˆ—ã€‚è¿™ä¸ªåŠŸèƒ½å¯ä»¥å¸®åŠ©åº”ç”¨ç¨‹åºå¤„ç†æ— æ³•æ­£å¸¸å¤„ç†çš„æ¶ˆæ¯ï¼Œå¹¶è¿›è¡Œè°ƒè¯•å’Œæ’æŸ¥æ•…éšœã€‚</p></blockquote><h3 id="4-æ¶ˆæ¯ä¼˜å…ˆçº§"><a class="markdownIt-Anchor" href="#4-æ¶ˆæ¯ä¼˜å…ˆçº§"></a> 4)ã€æ¶ˆæ¯ä¼˜å…ˆçº§</h3><blockquote><p>RabbitMQæ”¯æŒæ¶ˆæ¯ä¼˜å…ˆçº§ï¼ˆmessage priorityï¼‰æœºåˆ¶ï¼Œå¯ä»¥ä¸ºæ¶ˆæ¯è®¾ç½®ä¸åŒçš„ä¼˜å…ˆçº§ã€‚å½“æœ‰å¤šä¸ªæ¶ˆæ¯éœ€è¦å¤„ç†æ—¶ï¼Œå…·æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„æ¶ˆæ¯å°†è¢«ä¼˜å…ˆå¤„ç†ã€‚è¿™ä¸ªåŠŸèƒ½å¯ä»¥å¸®åŠ©åº”ç”¨ç¨‹åºå¤„ç†ç´§æ€¥çš„æ¶ˆæ¯ï¼Œå¹¶ä¼˜åŒ–æ¶ˆæ¯ä¼ é€’çš„æ•ˆç‡ã€‚</p></blockquote><h3 id="5-å»¶è¿Ÿé˜Ÿåˆ—"><a class="markdownIt-Anchor" href="#5-å»¶è¿Ÿé˜Ÿåˆ—"></a> 5)ã€å»¶è¿Ÿé˜Ÿåˆ—</h3><blockquote><p>RabbitMQæ”¯æŒå»¶è¿Ÿé˜Ÿåˆ—ï¼ˆdelayed queueï¼‰æœºåˆ¶ï¼Œå¯ä»¥å°†æ¶ˆæ¯æ¨è¿Ÿåˆ°æœªæ¥çš„æŸä¸ªæ—¶é—´ç‚¹è¿›è¡Œå¤„ç†ã€‚å½“éœ€è¦åœ¨æŒ‡å®šæ—¶é—´åæ‰§è¡ŒæŸä¸ªä»»åŠ¡æ—¶ï¼Œå¯ä»¥å°†ä»»åŠ¡æ·»åŠ åˆ°å»¶è¿Ÿé˜Ÿåˆ—ä¸­ï¼Œå¹¶è®¾ç½®ç›¸åº”çš„å»¶è¿Ÿæ—¶é—´ã€‚ä¸€æ—¦åˆ°è¾¾æŒ‡å®šæ—¶é—´ï¼Œæ¶ˆæ¯å°†è¢«å‘é€åˆ°ç›®æ ‡é˜Ÿåˆ—è¿›è¡Œå¤„ç†ã€‚</p></blockquote><h3 id="6-æ¶ˆæ¯æŒä¹…åŒ–"><a class="markdownIt-Anchor" href="#6-æ¶ˆæ¯æŒä¹…åŒ–"></a> 6)ã€æ¶ˆæ¯æŒä¹…åŒ–</h3><blockquote><p>RabbitMQæ”¯æŒæ¶ˆæ¯æŒä¹…åŒ–ï¼ˆmessage durabilityï¼‰æœºåˆ¶ï¼Œå¯ä»¥ç¡®ä¿åœ¨RabbitMQé‡å¯æ—¶ä¸ä¼šä¸¢å¤±å·²ç»å‘é€çš„æ¶ˆæ¯ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒRabbitMQå°†æ¶ˆæ¯å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œä½†æ‚¨å¯ä»¥ä½¿ç”¨æ¶ˆæ¯å±æ€§å°†æ¶ˆæ¯æ ‡è®°ä¸ºæŒä¹…åŒ–ã€‚è¿™æ ·ï¼Œå½“RabbitMQé‡å¯æ—¶ï¼Œå®ƒå°†ä»ç£ç›˜åŠ è½½å·²ç»æŒä¹…åŒ–çš„æ¶ˆæ¯ã€‚</p></blockquote><h3 id="7-é˜Ÿåˆ—é•¿åº¦é™åˆ¶"><a class="markdownIt-Anchor" href="#7-é˜Ÿåˆ—é•¿åº¦é™åˆ¶"></a> 7)ã€é˜Ÿåˆ—é•¿åº¦é™åˆ¶</h3><blockquote><p>RabbitMQæ”¯æŒé˜Ÿåˆ—é•¿åº¦é™åˆ¶ï¼ˆqueue length limitï¼‰æœºåˆ¶ï¼Œå¯ä»¥é™åˆ¶é˜Ÿåˆ—ä¸­æ¶ˆæ¯çš„æ•°é‡ã€‚å½“é˜Ÿåˆ—è¾¾åˆ°æŒ‡å®šçš„æœ€å¤§é•¿åº¦æ—¶ï¼Œæ–°çš„æ¶ˆæ¯å°†æ— æ³•è¿›å…¥é˜Ÿåˆ—ï¼Œå¹¶è¿”å›é”™è¯¯ã€‚è¿™ä¸ªåŠŸèƒ½å¯ä»¥å¸®åŠ©åº”ç”¨ç¨‹åºé¿å…å› é˜Ÿåˆ—è¿‡å¤§è€Œå¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚</p></blockquote><h3 id="8-ttlå’Œè‡ªåŠ¨åˆ é™¤"><a class="markdownIt-Anchor" href="#8-ttlå’Œè‡ªåŠ¨åˆ é™¤"></a> 8)ã€TTLå’Œè‡ªåŠ¨åˆ é™¤</h3><blockquote><p>RabbitMQæ”¯æŒTTLï¼ˆtime-to-liveï¼‰å’Œè‡ªåŠ¨åˆ é™¤ï¼ˆauto-deleteï¼‰æœºåˆ¶ï¼Œå¯ä»¥ä¸ºæ¶ˆæ¯å’Œé˜Ÿåˆ—è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚å½“æ¶ˆæ¯æˆ–é˜Ÿåˆ—è¿‡æœŸæ—¶ï¼Œå®ƒä»¬å°†è¢«è‡ªåŠ¨åˆ é™¤ã€‚è¿™ä¸ªåŠŸèƒ½å¯ä»¥å¸®åŠ©åº”ç”¨ç¨‹åºç®¡ç†æ¶ˆæ¯å’Œé˜Ÿåˆ—çš„ç”Ÿå‘½å‘¨æœŸï¼Œæé«˜ç³»ç»Ÿçš„å¯é æ€§å’Œç¨³å®šæ€§ã€‚</p></blockquote><h3 id="9-æ¶ˆæ¯æ‹¦æˆªå™¨"><a class="markdownIt-Anchor" href="#9-æ¶ˆæ¯æ‹¦æˆªå™¨"></a> 9)ã€æ¶ˆæ¯æ‹¦æˆªå™¨</h3><blockquote><p>RabbitMQæ”¯æŒæ¶ˆæ¯æ‹¦æˆªå™¨ï¼ˆmessage interceptorï¼‰æœºåˆ¶ï¼Œå¯ä»¥åœ¨æ¶ˆæ¯ä¼ é€’è¿‡ç¨‹ä¸­å¯¹æ¶ˆæ¯è¿›è¡Œå¤„ç†å’Œä¿®æ”¹ã€‚å½“æ¶ˆæ¯è¢«å‘é€åˆ°é˜Ÿåˆ—ä¹‹å‰ï¼Œå¯ä»¥å°†å…¶æ·»åŠ åˆ°æ¶ˆæ¯æ‹¦æˆªå™¨ä¸­è¿›è¡Œå¤„ç†ã€‚è¿™ä¸ªåŠŸèƒ½å¯ä»¥å¸®åŠ©åº”ç”¨ç¨‹åºå®ç°æ›´çµæ´»çš„æ¶ˆæ¯ä¼ é€’å’Œå¤„ç†ã€‚</p></blockquote><h3 id="10-æ’ä»¶æ”¯æŒ"><a class="markdownIt-Anchor" href="#10-æ’ä»¶æ”¯æŒ"></a> 10)ã€æ’ä»¶æ”¯æŒ</h3><blockquote><p>RabbitMQæ”¯æŒè®¸å¤šæ’ä»¶ï¼Œä¾‹å¦‚Shovelã€Federationã€Managementç­‰ã€‚è¿™äº›æ’ä»¶å¯ä»¥æä¾›æ›´é«˜çº§åˆ«çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ¶ˆæ¯å¤åˆ¶ã€è·¨æ•°æ®ä¸­å¿ƒæ¶ˆæ¯ä¼ é€’ã€ç®¡ç†ç•Œé¢ç­‰ã€‚ä½¿ç”¨è¿™äº›æ’ä»¶ï¼Œå¯ä»¥å°†RabbitMQæ‰©å±•åˆ°æ›´å¹¿æ³›çš„åº”ç”¨åœºæ™¯ä¸­ã€‚</p></blockquote><h1 id="10-rabbitmqä¸redisæ•´åˆdemo"><a class="markdownIt-Anchor" href="#10-rabbitmqä¸redisæ•´åˆdemo"></a> 10ã€RabbitMQä¸Redisæ•´åˆdemo</h1><h3 id="1-æ·»åŠ pomä¾èµ–"><a class="markdownIt-Anchor" href="#1-æ·»åŠ pomä¾èµ–"></a> 1ã€æ·»åŠ pomä¾èµ–</h3><p>é¦–å…ˆï¼Œå°†ä»¥ä¸‹ä¾èµ–æ·»åŠ åˆ° <code>pom.xml</code> æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring Boot --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring Boot RabbitMQ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring Boot Redis --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-åˆ›å»ºå¯åŠ¨ç±»å’Œé…ç½®bean"><a class="markdownIt-Anchor" href="#2-åˆ›å»ºå¯åŠ¨ç±»å’Œé…ç½®bean"></a> 2ã€åˆ›å»ºå¯åŠ¨ç±»å’Œé…ç½®Bean</h3><p>æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªç®€å•çš„ Spring Boot åº”ç”¨ç¨‹åºï¼Œé…ç½® RabbitMQ å’Œ Redisï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥æ‰€éœ€çš„åº“</span></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.Queue;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.connection.ConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.core.RabbitTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ Spring Boot åº”ç”¨ç¨‹åº</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RabbitmqRedisIntegrationApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸»å‡½æ•°ï¼Œç¨‹åºå…¥å£</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(RabbitmqRedisIntegrationApplication.class, args); <span class="comment">// è¿è¡Œ Spring Boot åº”ç”¨ç¨‹åº</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰ RabbitMQ é˜Ÿåˆ—</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">queue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(<span class="string">&quot;exampleQueue&quot;</span>, <span class="literal">false</span>); <span class="comment">// åˆ›å»ºä¸€ä¸ªåä¸º &quot;exampleQueue&quot; çš„é˜Ÿåˆ—ï¼ŒéæŒä¹…åŒ–</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é…ç½® RabbitTemplate</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RabbitTemplate <span class="title function_">rabbitTemplate</span><span class="params">(ConnectionFactory connectionFactory)</span> &#123;</span><br><span class="line">        <span class="type">RabbitTemplate</span> <span class="variable">rabbitTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RabbitTemplate</span>(connectionFactory); <span class="comment">// ä½¿ç”¨è¿æ¥å·¥å‚åˆ›å»º RabbitTemplate</span></span><br><span class="line">        <span class="keyword">return</span> rabbitTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é…ç½® RedisTemplate</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> &#123;</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; redisTemplate = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>&lt;&gt;();</span><br><span class="line">        redisTemplate.setConnectionFactory(redisConnectionFactory); <span class="comment">// è®¾ç½® Redis è¿æ¥å·¥å‚</span></span><br><span class="line">        redisTemplate.setKeySerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>()); <span class="comment">// è®¾ç½®é”®çš„åºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        redisTemplate.setValueSerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>()); <span class="comment">// è®¾ç½®å€¼çš„åºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-åˆ›å»ºæœåŠ¡ç±»"><a class="markdownIt-Anchor" href="#3-åˆ›å»ºæœåŠ¡ç±»"></a> 3ã€åˆ›å»ºæœåŠ¡ç±»</h3><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæœåŠ¡ç±»ï¼Œç”¨äºå‘é€æ¶ˆæ¯åˆ° RabbitMQ å’Œå­˜å‚¨æ•°æ®åˆ° Redisï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥æ‰€éœ€çš„åº“</span></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.core.RabbitTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰æœåŠ¡ç±»</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªåŠ¨æ³¨å…¥ RabbitTemplate</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RabbitTemplate rabbitTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªåŠ¨æ³¨å…¥ RedisTemplate</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘é€æ¶ˆæ¯åˆ° RabbitMQ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        rabbitTemplate.convertAndSend(<span class="string">&quot;exampleQueue&quot;</span>, message); <span class="comment">// å°†æ¶ˆæ¯å‘é€åˆ° &quot;exampleQueue&quot; é˜Ÿåˆ—</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æ•°æ®å­˜å‚¨åˆ° Redis</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveToRedis</span><span class="params">(String key, String value)</span> &#123;</span><br><span class="line">        redisTemplate.opsForValue().set(key, value); <span class="comment">// è®¾ç½®é”®å€¼å¯¹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä» Redis è·å–æ•°æ®</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getFromRedis</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (String) redisTemplate.opsForValue().get(key); <span class="comment">// è·å–é”®å¯¹åº”çš„å€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-åˆ›å»ºæ§åˆ¶å™¨"><a class="markdownIt-Anchor" href="#4-åˆ›å»ºæ§åˆ¶å™¨"></a> 4ã€åˆ›å»ºæ§åˆ¶å™¨</h3><p>æœ€åï¼Œåˆ›å»ºä¸€ä¸ªç®€å•çš„æ§åˆ¶å™¨ï¼Œç”¨äºæ¥æ”¶ HTTP è¯·æ±‚å¹¶è°ƒç”¨æœåŠ¡ç±»çš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥æ‰€éœ€çš„åº“</span></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰æ§åˆ¶å™¨</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApiController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªåŠ¨æ³¨å…¥ MessageService</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MessageService messageService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰å‘é€æ¶ˆæ¯çš„ API</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/send/&#123;message&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sendMessage</span><span class="params">(<span class="meta">@PathVariable</span> String message)</span> &#123;</span><br><span class="line">        messageService.sendMessage(message); <span class="comment">// è°ƒç”¨æœåŠ¡ç±»çš„ sendMessage æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Message sent: &quot;</span> + message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰è®¾ç½® Redis å€¼çš„ API</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/redis/set/&#123;key&#125;/&#123;value&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">setRedisValue</span><span class="params">(<span class="meta">@PathVariable</span> String key, <span class="meta">@PathVariable</span> String value)</span> &#123;</span><br><span class="line">        messageService.saveToRedis(key, value); <span class="comment">// è°ƒç”¨æœåŠ¡ç±»çš„ saveToRedis æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Value set in Redis: &quot;</span> + key + <span class="string">&quot; = &quot;</span> + value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰è·å– Redis å€¼çš„ API</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/redis/get/&#123;key&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRedisValue</span><span class="params">(<span class="meta">@PathVariable</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Value from Redis: &quot;</span> + key + <span class="string">&quot; = &quot;</span> + messageService.getFromRedis(key); <span class="comment">// è°ƒç”¨æœåŠ¡ç±»çš„ getFromRedis æ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨ä¸€ä¸ª Spring Boot åº”ç”¨ç¨‹åºä¸­æ•´åˆ RabbitMQ å’Œ Redisã€‚ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è°ƒæ•´ä»£ç ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ¥§ä¸»è¦ä»‹ç»äº†æ¶ˆæ¯ä¸­é—´ä»¶RabbitMQçš„æ ¸å¿ƒæ¦‚å¿µï¼ŒåŒç±»å‹MQäº§å“çš„æ¨ªå‘å¯¹æ¯”ï¼Œä»¥åŠä½¿ç”¨æ–¹æ³•</summary>
    
    
    
    <category term="æ¶ˆæ¯ä¸­é—´ä»¶" scheme="https://blog.kakar.top/categories/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/"/>
    
    
    <category term="SpringBoot" scheme="https://blog.kakar.top/tags/SpringBoot/"/>
    
    <category term="Redis" scheme="https://blog.kakar.top/tags/Redis/"/>
    
    <category term="Maven" scheme="https://blog.kakar.top/tags/Maven/"/>
    
    <category term="RabbitMQ" scheme="https://blog.kakar.top/tags/RabbitMQ/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootå¤šé¡¹æ•´åˆæ¡ˆä¾‹</title>
    <link href="https://blog.kakar.top/posts/ea8bfc36.html"/>
    <id>https://blog.kakar.top/posts/ea8bfc36.html</id>
    <published>2023-06-04T00:40:57.000Z</published>
    <updated>2023-06-04T00:40:57.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="springbootå¤šé¡¹æ•´åˆæ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#springbootå¤šé¡¹æ•´åˆæ¡ˆä¾‹"></a> SpringBootå¤šé¡¹æ•´åˆæ¡ˆä¾‹</h1><h1 id="1-æ•´åˆspringmvc"><a class="markdownIt-Anchor" href="#1-æ•´åˆspringmvc"></a> 1ã€æ•´åˆSpringMVC</h1><h4 id="11-åˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®"><a class="markdownIt-Anchor" href="#11-åˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®"></a> 1.1ã€åˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®</h4><h4 id="12-æ·»åŠ ä¸€ä¸ªmaven-module"><a class="markdownIt-Anchor" href="#12-æ·»åŠ ä¸€ä¸ªmaven-module"></a> 1.2ã€æ·»åŠ ä¸€ä¸ªmaven module</h4><h4 id="13-æ·»åŠ åæ ‡"><a class="markdownIt-Anchor" href="#13-æ·»åŠ åæ ‡"></a> 1.3ã€æ·»åŠ åæ ‡</h4><p>åœ¨mavençš„pomæ–‡ä»¶ä¸­ï¼Œæ·»åŠ çˆ¶å·¥ç¨‹åæ ‡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="14-æ·»åŠ webå¯åŠ¨å™¨"><a class="markdownIt-Anchor" href="#14-æ·»åŠ webå¯åŠ¨å™¨"></a> 1.4ã€æ·»åŠ webå¯åŠ¨å™¨</h4><p>åœ¨pomæ–‡ä»¶ä¸­ï¼Œæ·»åŠ webå¯åŠ¨å™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="15-æŒ‡å®šjdkç‰ˆæœ¬"><a class="markdownIt-Anchor" href="#15-æŒ‡å®šjdkç‰ˆæœ¬"></a> 1.5ã€æŒ‡å®šjdkç‰ˆæœ¬</h4><p>åœ¨pomæ–‡ä»¶ä¸­ï¼ŒæŒ‡å®šjdkç‰ˆæœ¬</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>å®Œæ•´pomæ–‡ä»¶å¦‚ä¸‹ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.lxs.demo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springboot-demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">parent</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="16-ç¼–å†™å¯åŠ¨ç±»"><a class="markdownIt-Anchor" href="#16-ç¼–å†™å¯åŠ¨ç±»"></a> 1.6ã€ç¼–å†™å¯åŠ¨ç±»</h4><p>åˆ›å»ºç¼–å†™springbootå¯åŠ¨ç±»ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123; </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123; </span><br><span class="line">    SpringApplication.run(Application.class, args); </span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="17-åˆ›å»ºcontroller"><a class="markdownIt-Anchor" href="#17-åˆ›å»ºcontroller"></a> 1.7ã€åˆ›å»ºcontroller</h4><p>åˆ›å»ºcontroller,ä½¿ç”¨@RestControlleræ³¨è§£æ ‡è¯†ç±»</p><h4 id="18-ç¼–å†™controller"><a class="markdownIt-Anchor" href="#18-ç¼–å†™controller"></a> 1.8ã€ç¼–å†™controller</h4><p>ç¼–å†™controllerä¸­çš„æ–¹æ³•ï¼Œreturn â€œhello SpringBoot â€¦â€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">  <span class="meta">@GetMapping(&quot;/hello&quot;)</span> </span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello, spring boot!&quot;</span>; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="19-å¯åŠ¨"><a class="markdownIt-Anchor" href="#19-å¯åŠ¨"></a> 1.9ã€å¯åŠ¨</h4><h4 id="110-è®¿é—®"><a class="markdownIt-Anchor" href="#110-è®¿é—®"></a> 1.10ã€è®¿é—®</h4><p>æµè§ˆå™¨è¾“å…¥è®¿é—®åœ°å€ï¼Œé»˜è®¤ç«¯å£8080ï¼Œè¾“å‡ºhello SpringBoot â€¦</p><p>SpringBootæ•´åˆSpringMVCå…¥é—¨æ¡ˆä¾‹å®Œæˆã€‚</p><h1 id="2-æ•´åˆjdbc"><a class="markdownIt-Anchor" href="#2-æ•´åˆjdbc"></a> 2ã€æ•´åˆJDBC</h1><h4 id="21-ç¼–å†™pom"><a class="markdownIt-Anchor" href="#21-ç¼–å†™pom"></a> 2.1ã€ç¼–å†™pom</h4><p>pomæ–‡ä»¶ä¸­æ·»åŠ æ•°æ®åº“è®¿é—®ä»¥åŠæµ‹è¯•åŒ…ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.19<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="22-åˆ›å»ºé…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#22-åˆ›å»ºé…ç½®æ–‡ä»¶"></a> 2.2ã€åˆ›å»ºé…ç½®æ–‡ä»¶</h4><p>åˆ›å»ºapplication.ymlé…ç½®æ–‡ä»¶ï¼Œé…ç½®è¿æ¥æ± </p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot?serverTimezone=GMT</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">111111</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure><h4 id="23-åˆ›å»ºè¡¨"><a class="markdownIt-Anchor" href="#23-åˆ›å»ºè¡¨"></a> 2.3ã€åˆ›å»ºè¡¨</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `tb_user`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_user` (</span><br><span class="line">  `id` <span class="type">bigint</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `user_name` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `age` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `sex` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `birthday` <span class="type">date</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `created` <span class="type">date</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `updated` <span class="type">date</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `note` <span class="type">varchar</span>(<span class="number">2000</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">6</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure><h4 id="24-åˆ›å»ºå®ä½“ç±»"><a class="markdownIt-Anchor" href="#24-åˆ›å»ºå®ä½“ç±»"></a> 2.4ã€åˆ›å»ºå®ä½“ç±»</h4><p>åœ¨pojoåŒ…ä¸‹åˆ›å»ºUserå®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Integer sex;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    <span class="keyword">private</span> Date created;</span><br><span class="line">    <span class="keyword">private</span> Date updated;</span><br><span class="line">    <span class="keyword">private</span> String note;</span><br><span class="line"> Â·Â·Â·Â· <span class="comment">//setter And getter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="25-ç¼–å†™daoå±‚"><a class="markdownIt-Anchor" href="#25-ç¼–å†™daoå±‚"></a> 2.5ã€ç¼–å†™daoå±‚</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCDao</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(jdbcTemplate==<span class="literal">null</span>);</span><br><span class="line">        <span class="comment">// BeanPropertyRowMapperç”¨äºæŠŠåŒåå­—æ®µèµ‹å€¼ç»™ç±»Userçš„å±æ€§å€¼</span></span><br><span class="line">        List&lt;User&gt; users = jdbcTemplate.query(<span class="string">&quot;select * from tb_user&quot;</span>,<span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;&gt;(User.class));</span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="26-ç¼–å†™æµ‹è¯•ç±»"><a class="markdownIt-Anchor" href="#26-ç¼–å†™æµ‹è¯•ç±»"></a> 2.6ã€ç¼–å†™æµ‹è¯•ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">JDBCDaoTest</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JDBCDao dao;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;User&gt; users = dao.findAll();</span><br><span class="line">        System.out.println(users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="27-è¿è¡Œæµ‹è¯•"><a class="markdownIt-Anchor" href="#27-è¿è¡Œæµ‹è¯•"></a> 2.7ã€è¿è¡Œæµ‹è¯•</h4><p>æ­£å¸¸è¾“å‡ºå…¨è¡¨ä¿¡æ¯ã€‚SpringBootæ•´åˆJDBCå…¥é—¨æ¡ˆä¾‹å®Œæˆã€‚</p><h1 id="3-æ•´åˆmybaits"><a class="markdownIt-Anchor" href="#3-æ•´åˆmybaits"></a> 3ã€æ•´åˆMybaits</h1><h4 id="31-ç¼–å†™pom"><a class="markdownIt-Anchor" href="#31-ç¼–å†™pom"></a> 3.1ã€ç¼–å†™pom</h4><p>pomæ–‡ä»¶ä¸­æ·»åŠ myabtisæ•´åˆSpringbootçš„åŒ…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="32-ç¼–å†™é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#32-ç¼–å†™é…ç½®æ–‡ä»¶"></a> 3.2ã€ç¼–å†™é…ç½®æ–‡ä»¶</h4><p>åœ¨application.ymlæ–‡ä»¶ä¸­é…ç½®mybatis</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="comment"># æ‰«æå®ä½“ç±»å¹¶å–åˆ«å</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.springbootlianxi.pojo</span></span><br><span class="line">  <span class="comment"># æŒ‡å®šé…ç½®æ–‡ä»¶çš„ä½ç½®</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br></pre></td></tr></table></figure><h4 id="33-åˆ›å»ºmapperæ¥å£"><a class="markdownIt-Anchor" href="#33-åˆ›å»ºmapperæ¥å£"></a> 3.3ã€åˆ›å»ºmapperæ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@Mapper // ä¸æ¨èä½¿ç”¨@Mapperæ³¨è§£æ‰«æmapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">mybatisMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="34-åˆ›å»ºmapperé…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#34-åˆ›å»ºmapperé…ç½®æ–‡ä»¶"></a> 3.4ã€åˆ›å»ºmapperé…ç½®æ–‡ä»¶</h4><p>åœ¨resoureç›®å½•çš„mapperç›®å½•ä¸‹åˆ›å»ºmepperæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.springbootlianxi.mapper.mybatisMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span> </span><br><span class="line">        select * from tb_user;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="35-åˆ›å»ºå®ä½“ç±»"><a class="markdownIt-Anchor" href="#35-åˆ›å»ºå®ä½“ç±»"></a> 3.5ã€åˆ›å»ºå®ä½“ç±»</h4><p>å®ä½“ç±»Userå¯¹è±¡ä¾æ—§ä½¿ç”¨ä¸Šé¢åˆ›å»ºå¥½çš„</p><h4 id="36-åˆ›å»ºæµ‹è¯•ç±»æµ‹è¯•"><a class="markdownIt-Anchor" href="#36-åˆ›å»ºæµ‹è¯•ç±»æµ‹è¯•"></a> 3.6ã€åˆ›å»ºæµ‹è¯•ç±»ï¼Œæµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">mybatisMapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> mybatisMapper mapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;User&gt; all = mapper.findAll();</span><br><span class="line">        System.out.println(all);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="37-è¿è¡Œæµ‹è¯•"><a class="markdownIt-Anchor" href="#37-è¿è¡Œæµ‹è¯•"></a> 3.7ã€è¿è¡Œæµ‹è¯•</h4><p>æ­£å¸¸è¾“å‡ºå…¨è¡¨ä¿¡æ¯ã€‚SpringBootæ•´åˆMybatiså…¥é—¨æ¡ˆä¾‹å®Œæˆã€‚</p><h1 id="4-æ•´åˆtk-mybatis"><a class="markdownIt-Anchor" href="#4-æ•´åˆtk-mybatis"></a> 4ã€æ•´åˆtk-Mybatis</h1><h4 id="41-ç¼–å†™pom"><a class="markdownIt-Anchor" href="#41-ç¼–å†™pom"></a> 4.1ã€ç¼–å†™pom</h4><p>pomæ–‡ä»¶ä¸­æ·»åŠ tk-mybatisæ•´åˆspringbotoçš„åŒ…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">        <span class="comment">&lt;!--    mybatisæ•´åˆSpringbootåŒ…--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;version&gt;2.2.0&lt;/version&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--    é€šç”¨mapperåŒ…ï¼Œç”±äºé—´æ¥ä¾èµ–ï¼ŒmybatisåŒ…å¯ä»¥ä¸ç”¨å¼•å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>tk.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="42-åˆ›å»ºå®ä½“ç±»"><a class="markdownIt-Anchor" href="#42-åˆ›å»ºå®ä½“ç±»"></a> 4.2ã€åˆ›å»ºå®ä½“ç±»</h4><p><strong>æ³¨æ„ï¼š</strong></p><ul><li><strong>é»˜è®¤æ•°æ®åº“ä¸­çš„è¡¨å=å®ä½“ç±»ç±»åï¼Œåˆ—å=å±æ€§å</strong></li><li>è¡¨åä¸ä¸€è‡´ï¼Œå¯ä»¥ä½¿ç”¨JPAçš„æ³¨è§£**@Table(name=â€œxxxâ€)**æŒ‡å®š</li><li>åˆ—åä¸ä¸€è‡´ï¼Œå¯ä»¥ä½¿ç”¨JPAçš„æ³¨è§£**@Column(name=â€œxxxâ€)**æŒ‡å®š</li><li>å®ä½“ç±»çš„å±æ€§ä¸ä¸æ•°æ®åº“ä¸­çš„åˆ—åæ˜ å°„ï¼Œå¯ä»¥ä½¿ç”¨**@Transient**æ³¨è§£æ ‡è¯†</li><li>å®ä½“ç±»éœ€è¦å®ç°<strong>Serializableæ¥å£</strong></li><li>ä¸»é”®æ ‡è¯†éœ€è¦ä½¿ç”¨**@Id<strong>æ³¨è§£+</strong>@GeneratedValue(strategy=GenerationType.IDENTITY)**æ ‡è¯†ï¼Œè¡¨æ˜è¯¥å±æ€§ä¸ºæ•°æ®åº“ä¸­idåˆ—å¹¶ä¸”è‡ªå¢ç­–ç•¥ï¼ˆIDENTITYè¡¨ç¤ºè‡ªå¢ç­–ç•¥ï¼‰</li><li>tkMybatisæ˜¯æ”¯æŒä¸‹åˆ’çº¿ä¸é©¼å³°çš„è½¬æ¢çš„</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Table(name=&quot;tb_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Column(name=&quot;user_name&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Integer sex;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    <span class="keyword">private</span> Date created;</span><br><span class="line">    <span class="keyword">private</span> Date updated;</span><br><span class="line">    <span class="keyword">private</span> String note;</span><br><span class="line">  Â·Â·Â·<span class="comment">// setter And getter </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="43-åˆ›å»ºtkçš„mapperæ¥å£"><a class="markdownIt-Anchor" href="#43-åˆ›å»ºtkçš„mapperæ¥å£"></a> 4.3ã€åˆ›å»ºtkçš„Mapperæ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.springbootlianxi.pojo.User;</span><br><span class="line"><span class="keyword">import</span> tk.mybatis.mapper.common.Mapper;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">// @Mapper ä¸æ¨èä½¿ç”¨è¯¥æ³¨è§£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">tkMapper</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;User&gt; &#123; <span class="comment">//éœ€è¦ç»§æ‰¿tkåŒ…ä¸­çš„Mapperæ¥å£,Mapperæ¥å£ä¸­å®šä¹‰äº†ç®€å•çš„å¢åˆ æ”¹æŸ¥æ–¹æ³•ï¼Œæ‰€ä»¥ç®€å•çš„sqlä¸éœ€è¦é…ç½®æ˜ å°„æ–‡ä»¶ï¼Œè§†sqlå¤æ‚åº¦å†³å®šæ˜¯å¦éœ€è¦æ˜ å°„æ–‡ä»¶</span></span><br><span class="line">  <span class="comment">// ç®€å•çš„å¢åˆ æ”¹æŸ¥æ— éœ€å®šä¹‰æŠ½è±¡æ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä¸€æ—¦ç»§æ‰¿äº†Mapperï¼Œ<strong>ç»§æ‰¿çš„Mapperå°±æ‹¥æœ‰äº†Mapperæ‰€æœ‰çš„é€šç”¨æ–¹æ³•ï¼š</strong></p><p><strong>Select</strong> ï¼š</p><ul><li><p>æ–¹æ³•ï¼š <strong>List<T> select(T record);</strong>è¯´æ˜ï¼šæ ¹æ®å®ä½“ä¸­çš„å±æ€§å€¼è¿›è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ç­‰å·</p></li><li><p>æ–¹æ³•ï¼š <strong>T selectByPrimaryKey(Object key);</strong>               è¯´æ˜ï¼šæ ¹æ®ä¸»é”®å­—æ®µè¿›è¡ŒæŸ¥è¯¢ï¼Œæ–¹æ³•å‚æ•°å¿…é¡»åŒ…å«å®Œæ•´çš„ä¸»é”®å±æ€§ï¼Œ æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ç­‰å·</p></li><li><p>æ–¹æ³•ï¼š <strong>List<T> selectAll();</strong>                è¯´æ˜ï¼šæŸ¥è¯¢å…¨éƒ¨ç»“æœï¼Œselect(null)æ–¹æ³•èƒ½è¾¾åˆ°åŒæ ·çš„æ•ˆæœ</p></li><li><p>æ–¹æ³•ï¼š <strong>T selectOne(T record);</strong>                   è¯´æ˜ï¼šæ ¹æ®å®ä½“ä¸­çš„å±æ€§è¿›è¡ŒæŸ¥è¯¢ï¼Œåªèƒ½æœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œæœ‰å¤šä¸ªç»“æœæ˜¯æŠ›å‡ºå¼‚ å¸¸ï¼ŒæŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ç­‰å·</p></li><li><p>æ–¹æ³•ï¼š int selectCount(T record);                   è¯´æ˜ï¼šæ ¹æ®å®ä½“ä¸­çš„å±æ€§æŸ¥è¯¢æ€»æ•°ï¼ŒæŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ç­‰å·</p></li></ul><p><strong>Insert</strong> ï¼š</p><ul><li><p>æ–¹æ³•ï¼š<strong>int insert(T record);</strong>                  è¯´æ˜ï¼šä¿å­˜ä¸€ä¸ªå®ä½“ï¼Œnullçš„å±æ€§ä¹Ÿä¼šä¿å­˜ï¼Œä¸ä¼šä½¿ç”¨æ•°æ®åº“é»˜è®¤å€¼</p></li><li><p>æ–¹æ³•ï¼š <strong>int insertSelective(T record);</strong>               è¯´æ˜ï¼šä¿å­˜ä¸€ä¸ªå®ä½“ï¼Œnullçš„å±æ€§ä¸ä¼šä¿å­˜ï¼Œä¼šä½¿ç”¨æ•°æ®åº“é»˜è®¤å€¼</p></li></ul><p><strong>Update</strong> ï¼š</p><ul><li><p>æ–¹æ³•ï¼š <strong>int updateByPrimaryKey(T record);</strong>                 è¯´æ˜ï¼šæ ¹æ®ä¸»é”®æ›´æ–°å®ä½“å…¨éƒ¨å­—æ®µï¼Œnullå€¼ä¼šè¢«æ›´æ–°</p></li><li><p>æ–¹æ³•ï¼š <strong>int updateByPrimaryKeySelective(T record);</strong>                 è¯´æ˜ï¼šæ ¹æ®ä¸»é”®æ›´æ–°å±æ€§ä¸ä¸ºnullçš„å€¼</p></li></ul><p><strong>Delete</strong> ï¼š</p><ul><li><p>æ–¹æ³•ï¼š <strong>int delete(T record);</strong>                       è¯´æ˜ï¼šæ ¹æ®å®ä½“å±æ€§ä½œä¸ºæ¡ä»¶è¿›è¡Œåˆ é™¤ï¼ŒæŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ç­‰å·</p></li><li><p>æ–¹æ³•ï¼š <strong>int deleteByPrimaryKey(Object key);</strong>                  è¯´æ˜ï¼šæ ¹æ®ä¸»é”®å­—æ®µè¿›è¡Œåˆ é™¤ï¼Œæ–¹æ³•å‚æ•°å¿…é¡»åŒ…å«å®Œæ•´çš„ä¸»é”®å±æ€§</p></li></ul><p><strong>Example</strong>ï¼š</p><ul><li><p>æ–¹æ³•ï¼š <strong>List<T> selectByExample(Object example);</strong>                    è¯´æ˜ï¼šæ ¹æ®Exampleæ¡ä»¶è¿›è¡ŒæŸ¥è¯¢ é‡ç‚¹ï¼šè¿™ ä¸ªæŸ¥è¯¢æ”¯æŒé€šè¿‡ Example ç±»æŒ‡å®šæŸ¥è¯¢åˆ—ï¼Œé€šè¿‡ selectProperties æ–¹æ³•æŒ‡å®šæŸ¥è¯¢åˆ—</p></li><li><p>æ–¹æ³•ï¼š <strong>int selectCountByExample(Object example);</strong>                          è¯´æ˜ï¼šæ ¹æ®Exampleæ¡ä»¶è¿›è¡ŒæŸ¥è¯¢æ€»æ•°</p></li><li><p>æ–¹æ³•ï¼š <strong>int updateByExample(@Param(â€œrecordâ€) T record, @Param(â€œexampleâ€) Object example);</strong>             è¯´æ˜ï¼šæ ¹æ® Exampleæ¡ä»¶æ›´æ–°å®ä½“ record åŒ…å«çš„å…¨éƒ¨å±æ€§ï¼Œnullå€¼ä¼šè¢«æ›´æ–°</p></li><li><p>æ–¹æ³•ï¼š <strong>int updateByExampleSelective(@Param(â€œrecordâ€) T record, @Param(â€œexampleâ€) Object example);</strong>             è¯´ æ˜ï¼šæ ¹æ®Exampleæ¡ä»¶æ›´æ–°å®ä½“ record åŒ…å«çš„ä¸æ˜¯nullçš„å±æ€§å€¼</p></li><li><p>æ–¹æ³•ï¼š <strong>int deleteByExample(Object example);</strong>                              è¯´æ˜ï¼šæ ¹æ®Exampleæ¡ä»¶åˆ é™¤æ•°æ®</p></li><li><p>æ–¹æ³•ï¼šnew Example(xxx.class).createCriteria().andLike(â€œxxxâ€,&quot;%xxx%&quot;)      è¯´æ˜ï¼šæ ¹æ®å­—æ®µï¼Œæ·»åŠ æ¨¡ç³ŠæŸ¥è¯¢ï¼Œç¬¬ä¸€ä¸ªxxxä»£è¡¨å®ä½“ç±»åï¼Œ<strong>ç¬¬äºŒä¸ªxxxä»£è¡¨ç±»çš„å±æ€§åï¼Œè€Œä¸æ˜¯æ•°æ®åº“çš„åˆ—å</strong></p></li></ul></blockquote><h4 id="44-mapperscanæ³¨è§£"><a class="markdownIt-Anchor" href="#44-mapperscanæ³¨è§£"></a> 4.4ã€@MapperScanæ³¨è§£</h4><p>åœ¨springbootçš„å¯åŠ¨ç±»ä¸Šä½¿ç”¨tkæä¾›çš„@MapperScanæ³¨è§£æ‰«ætkMapper</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> tk.mybatis.spring.annotation.MapperScan;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.springbootlianxi.tk&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MyApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="45-æµ‹è¯•"><a class="markdownIt-Anchor" href="#45-æµ‹è¯•"></a> 4.5ã€æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">tkMapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> tkMapper mapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;User&gt; users = mapper.selectAll(); <span class="comment">//ä½¿ç”¨å†…ç½®æ–¹æ³•</span></span><br><span class="line">        System.out.println(users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="46-è¿è¡Œæµ‹è¯•"><a class="markdownIt-Anchor" href="#46-è¿è¡Œæµ‹è¯•"></a> 4.6ã€è¿è¡Œæµ‹è¯•</h4><p>æ­£å¸¸è¾“å‡ºå…¨è¡¨ä¿¡æ¯ï¼ŒSpringBootæ•´åˆtkMapperå…¥é—¨æ¡ˆä¾‹å®Œæˆã€‚</p><h1 id="5-æ•´åˆmybatis-plus-h2"><a class="markdownIt-Anchor" href="#5-æ•´åˆmybatis-plus-h2"></a> 5ã€æ•´åˆMybatis-plus + H2</h1><p><strong>h2æ•°æ®åº“å¯ä»¥æ¢æˆmysqlï¼Œèƒ½å­˜å–æ•°æ®éƒ½è¡Œã€‚</strong></p><h4 id="51-ç¼–å†™pom"><a class="markdownIt-Anchor" href="#51-ç¼–å†™pom"></a> 5.1ã€ç¼–å†™pom</h4><p>pomæ–‡ä»¶ä¸­æ·»åŠ mybatis-plus+h2ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥MybatisPlusæ•´åˆSpringBootä¾èµ–åŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.3.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥å†…å­˜æ•°æ®åº“h2ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.h2database<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.200<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--lombokæ’ä»¶--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--springbootçš„testå¯åŠ¨å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--junitåŒ…ï¼Œç”¨äºä½¿ç”¨@Runwithåˆ›å»ºspringbootçš„æµ‹è¯•è¿è¡Œå®¹å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="52-åˆ›å»ºh2é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#52-åˆ›å»ºh2é…ç½®æ–‡ä»¶"></a> 5.2ã€åˆ›å»ºh2é…ç½®æ–‡ä»¶</h4><p>åœ¨resource/dbç›®å½•ä¸‹åˆ›å»ºh2æ•°æ®åº“çš„é…ç½®æ–‡ä»¶</p><p><strong>å»ºè¡¨sqlæ–‡ä»¶schema-h2.sqlï¼š</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">user</span></span><br><span class="line">(</span><br><span class="line">id <span class="type">BIGINT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸»é”®ID&#x27;</span>,</span><br><span class="line">name <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å§“å&#x27;</span>,</span><br><span class="line">age <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¹´é¾„&#x27;</span>,</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é‚®ç®±&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>æ’å…¥æ•°æ®çš„sqlæ–‡ä»¶data-h2.sql</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span> (id, name, age, email) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;Jone&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;test1@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;Jack&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;test2@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="string">&#x27;Tom&#x27;</span>, <span class="number">28</span>, <span class="string">&#x27;test3@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="string">&#x27;Sandy&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;test4@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="string">&#x27;kaikeba1&#x27;</span>, <span class="number">331</span>, <span class="string">&#x27;test4@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">6</span>, <span class="string">&#x27;kaikeba2&#x27;</span>, <span class="number">331</span>, <span class="string">&#x27;test4@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">7</span>, <span class="string">&#x27;kaikeba3&#x27;</span>, <span class="number">331</span>, <span class="string">&#x27;test4@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">8</span>, <span class="string">&#x27;kaikeba4&#x27;</span>, <span class="number">331</span>, <span class="string">&#x27;test4@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">9</span>, <span class="string">&#x27;kaikeba5&#x27;</span>, <span class="number">331</span>, <span class="string">&#x27;test4@baomidou.com&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="53-åˆ›å»ºspringbooté…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#53-åˆ›å»ºspringbooté…ç½®æ–‡ä»¶"></a> 5.3ã€åˆ›å»ºSpringBooté…ç½®æ–‡ä»¶</h4><p>åˆ›å»ºapplication.ymlé…ç½®æ–‡ä»¶å¹¶æ•´åˆH2æ•°æ®åº“</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ•´åˆh2,ç”Ÿæˆæ•°æ®åº“</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">org.h2.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:h2:mem:test</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">test</span></span><br><span class="line">  <span class="attr">sql:</span></span><br><span class="line">    <span class="attr">init:</span></span><br><span class="line">      <span class="attr">data-locations:</span> <span class="string">classpath:db/data-h2.sql</span></span><br><span class="line">      <span class="attr">schema-locations:</span> <span class="string">classpath:db/schema-h2.sql</span></span><br></pre></td></tr></table></figure><h4 id="54-åˆ›å»ºmapperæ¥å£"><a class="markdownIt-Anchor" href="#54-åˆ›å»ºmapperæ¥å£"></a> 5.4ã€åˆ›å»ºmapperæ¥å£</h4><p>åˆ›å»ºmapperæ¥å£ï¼Œç»§æ‰¿mybatisplusçš„Mapperæ¥å£ï¼Œå¯ä½¿ç”¨å†…ç½®çš„å¢åˆ æ”¹æŸ¥æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.aliang.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TestMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚éœ€å®ç°åˆ†é¡µï¼Œéœ€è¦åˆ›å»ºmybatisplusçš„é…ç½®ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.baomidou.cloud.service.*.mapper*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusConfig</span> &#123;</span><br><span class="line">    <span class="comment">// æ—§ç‰ˆ</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PaginationInterceptor <span class="title function_">paginationInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">PaginationInterceptor</span> <span class="variable">paginationInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PaginationInterceptor</span>();</span><br><span class="line">        <span class="comment">// è®¾ç½®è¯·æ±‚çš„é¡µé¢å¤§äºæœ€å¤§é¡µåæ“ä½œï¼Œ trueè°ƒå›åˆ°é¦–é¡µï¼Œfalse ç»§ç»­è¯·æ±‚  é»˜è®¤false</span></span><br><span class="line">        <span class="comment">// paginationInterceptor.setOverflow(false);</span></span><br><span class="line">      </span><br><span class="line">        <span class="comment">// è®¾ç½®æœ€å¤§å•é¡µé™åˆ¶æ•°é‡ï¼Œé»˜è®¤ 500 æ¡ï¼Œ-1 ä¸å—é™åˆ¶</span></span><br><span class="line">        <span class="comment">// paginationInterceptor.setLimit(500);</span></span><br><span class="line">      </span><br><span class="line">        <span class="comment">// å¼€å¯ count çš„ join ä¼˜åŒ–,åªé’ˆå¯¹éƒ¨åˆ† left join</span></span><br><span class="line">        paginationInterceptor.setCountSqlParser(<span class="keyword">new</span> <span class="title class_">JsqlParserCountOptimize</span>(<span class="literal">true</span>));</span><br><span class="line">        <span class="keyword">return</span> paginationInterceptor;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æœ€æ–°ç‰ˆ</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.H2));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="55-åˆ›å»ºå®ä½“ç±»"><a class="markdownIt-Anchor" href="#55-åˆ›å»ºå®ä½“ç±»"></a> 5.5ã€åˆ›å»ºå®ä½“ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="56-mapperscanæ³¨è§£"><a class="markdownIt-Anchor" href="#56-mapperscanæ³¨è§£"></a> 5.6ã€@MapperScanæ³¨è§£</h4><p>å¯åŠ¨ç±»ï¼ŒåŠ ä¸Š@MapperScanæ³¨è§£æ‰«æmapperè·¯å¾„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.aliang.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="57-æµ‹è¯•æŸ¥è¯¢æ‰€æœ‰"><a class="markdownIt-Anchor" href="#57-æµ‹è¯•æŸ¥è¯¢æ‰€æœ‰"></a> 5.7ã€æµ‹è¯•æŸ¥è¯¢æ‰€æœ‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.aliang.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">mapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TestMapper mapper;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelect</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;User&gt; users = mapper.selectList(<span class="literal">null</span>);</span><br><span class="line">        users.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="58-è¿è¡Œæµ‹è¯•"><a class="markdownIt-Anchor" href="#58-è¿è¡Œæµ‹è¯•"></a> 5.8ã€è¿è¡Œæµ‹è¯•</h4><p>æ­£å¸¸è¾“å‡ºå…¨è¡¨ä¿¡æ¯ã€‚Springbootæ•´åˆmybatisPlus+h2å…¥é—¨æ¡ˆä¾‹å®Œæˆã€‚</p><h1 id="6-æ•´åˆthymeleaftk-mybatis"><a class="markdownIt-Anchor" href="#6-æ•´åˆthymeleaftk-mybatis"></a> 6ã€æ•´åˆthymeleaf+Tk-Mybatis</h1><p><strong>tk-mapperä¹Ÿå¯ä»¥æ›¿æ¢æˆjdbcæˆ–mybatisæˆ–mybatis-plusï¼Œèƒ½æŸ¥è¯¢æ•°æ®åº“éƒ½è¡Œã€‚</strong></p><h4 id="61-ç¼–å†™pom"><a class="markdownIt-Anchor" href="#61-ç¼–å†™pom"></a> 6.1ã€ç¼–å†™pom</h4><p>pomæ–‡ä»¶ä¸­æ·»åŠ tk-myabtisä»¥åŠthymeleafä¾èµ–åŒ…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ•´åˆspringmvcåŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ•´åˆjdbcåŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é“¾æ¥æ•°æ®åº“åŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.19<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  springbootæµ‹è¯•åŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  junitåŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    mybatisæ•´åˆSpringbootåŒ…--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;version&gt;2.2.0&lt;/version&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    é€šç”¨mapperåŒ…ï¼Œç”±äºé—´æ¥ä¾èµ–ï¼ŒmybatisåŒ…å¯ä»¥ä¸ç”¨å¼•å…¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>tk.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="62-ç¼–å†™é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#62-ç¼–å†™é…ç½®æ–‡ä»¶"></a> 6.2ã€ç¼–å†™é…ç½®æ–‡ä»¶</h4><p>åˆ›å»ºapplication.ymlï¼Œé…ç½®mysqlæ•°æ®åº“è¿æ¥ä¿¡æ¯ç­‰ä¿¡æ¯</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.springbootlianxi:</span> <span class="string">debug</span>  <span class="comment"># å¯ä»¥ä½¿ç”¨åŒ…è·¯å¾„æˆ–è€…root <span class="doctag">TODO:</span>çŸ¥è¯†ç‚¹æ ‡è®°ï¼šéœ€è¦åœ¨levelçš„å€¼ä¹‹åæ ¹æ®åŒ…åæŒ‡å®šæ—¥å¿—çº§åˆ«</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot?serverTimezone=GMT</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">111111</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment"># <span class="doctag">TODO:</span>æ•´åˆMyabtis æ³¨æ„ï¼šmybatisä¸èƒ½å®ç° ä¸‹åˆ’çº¿ è½¬ é©¼å³°</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="comment"># æ‰«æå®ä½“ç±»å¹¶å–åˆ«å</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.springbootlianxi.pojo</span></span><br><span class="line">  <span class="comment"># æŒ‡å®šé…ç½®æ–‡ä»¶çš„ä½ç½®</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><h4 id="63-åˆ›å»ºå®ä½“ç±»"><a class="markdownIt-Anchor" href="#63-åˆ›å»ºå®ä½“ç±»"></a> 6.3ã€åˆ›å»ºå®ä½“ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Table(name=&quot;tb_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span> <span class="comment">//<span class="doctag">TODO:</span> IDENTITYè¡¨ç¤ºä¸»é”®çš„ç­–ç•¥ä¸ºè‡ªå¢</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//<span class="doctag">TODO:</span>æ•°æ®åº“ä¸­ä½¿ç”¨çš„æ˜¯ä¸‹åˆ’çº¿å‘½åï¼Œ</span></span><br><span class="line">    <span class="comment">//<span class="doctag">TODO:</span> è€Œjavaä¸­ä½¿ç”¨é©¼å³°å‘½åï¼Œmybatisä¸æ”¯æŒä¸¤ç§æ ¼å¼çš„è½¬æ¢æ˜ å°„</span></span><br><span class="line">    <span class="meta">@Column(name=&quot;user_name&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Integer sex;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    <span class="keyword">private</span> Date created;</span><br><span class="line">    <span class="keyword">private</span> Date updated;</span><br><span class="line">    <span class="keyword">private</span> String note;</span><br><span class="line">  ...setter And getter</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="64-åˆ›å»ºtk-mapper"><a class="markdownIt-Anchor" href="#64-åˆ›å»ºtk-mapper"></a> 6.4ã€åˆ›å»ºtk-mapper</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.springbootlianxi.pojo.User;</span><br><span class="line"><span class="keyword">import</span> tk.mybatis.mapper.common.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">tkMapper</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;User&gt; &#123; <span class="comment">// éœ€è¦ç»§æ‰¿tkåŒ…ä¸­çš„Mapperæ¥å£ï¼Œmapperæ¥å£å†…ç½®å¢åˆ æ”¹æŸ¥</span></span><br><span class="line">    <span class="comment">// ç®€å•çš„å¢åˆ æ”¹æŸ¥ï¼Œä¸éœ€è¦åˆ›å»ºæŠ½è±¡æ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="65-åˆ›å»ºtkservice"><a class="markdownIt-Anchor" href="#65-åˆ›å»ºtkservice"></a> 6.5ã€åˆ›å»ºtkservice</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.springbootlianxi.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.springbootlianxi.tk.tkMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> tkMapper tkMapper;</span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> tkMapper.selectAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="66-åˆ›å»ºtkcontroller"><a class="markdownIt-Anchor" href="#66-åˆ›å»ºtkcontroller"></a> 6.6ã€åˆ›å»ºtkController</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.springbootlianxi.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.springbootlianxi.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">findAll</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        List&lt;User&gt; all = userService.findAll();</span><br><span class="line">        model.addAttribute(<span class="string">&quot;list&quot;</span>,all);</span><br><span class="line">        System.out.println(all);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;list&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="67-åˆ›å»ºå‰ç«¯é¡µé¢"><a class="markdownIt-Anchor" href="#67-åˆ›å»ºå‰ç«¯é¡µé¢"></a> 6.7ã€åˆ›å»ºå‰ç«¯é¡µé¢</h4><p>åœ¨resource/templatesç›®å½•ä¸‹åˆ›å»ºlist.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span> <span class="comment">&lt;!-- å¼•å…¥thymeleafçº¦æŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.list</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>id<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¯†ç <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>æ˜µç§°<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>æ€§åˆ«<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>ç”Ÿæ—¥<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>æ³¨å†Œæ—¶é—´<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>æ›´æ–°æ—¶é—´<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¤‡æ³¨<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;l:$&#123;list&#125;&quot;</span> <span class="attr">th:object</span>=<span class="string">&quot;$&#123;l&#125;&quot;</span>&gt;</span> <span class="comment">&lt;!-- <span class="doctag">TODO:</span>thymeleafå¾ªç¯è¯­æ³•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;*&#123;id&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span> <span class="comment">&lt;!-- <span class="doctag">TODO:</span>å¾ªç¯æ—¶å¯ä»¥ä½¿ç”¨æ˜Ÿå·è¡¨è¾¾å¼ï¼Œä½†å¾ªç¯æ—¶å†…æ–‡æœ¬å¿…é¡»ä½¿ç”¨th:textè¡¨è¾¾å¼æ‰èƒ½èµ‹å€¼ï¼Œ</span></span><br><span class="line"><span class="comment">                                                                ä¾‹å¦‚ï¼š&lt;span&gt;$&#123;l.passWord&#125;&lt;/span&gt;åˆ™ä¸ºé”™è¯¯çš„æ–¹å¼</span></span><br><span class="line"><span class="comment">                                                                    &lt;span th:text=&quot;$&#123;l.passWord&#125;&#125;&quot;&gt;&lt;/span&gt;åˆ™ä¸ºæ­£ç¡®æ–¹å¼</span></span><br><span class="line"><span class="comment">                                                                    &lt;span th:text=&quot;*&#123;passWord&#125;&#125;&quot;&gt;&lt;/span&gt;ä¹Ÿä¸ºæ­£ç¡®æ–¹å¼</span></span><br><span class="line"><span class="comment">                                                                    ä»¥åŠ&lt;span th:inline=&quot;text&quot;&gt; [[$&#123;l.name&#125;]] &lt;/span&gt;ä¹Ÿä¸ºæ­£ç¡®æ–¹å¼</span></span><br><span class="line"><span class="comment">                                                                                           textè¡¨ç¤ºå¼€å¯å†…è”æ–‡æœ¬ï¼Œnoneè¡¨ç¤ºå…³é—­--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;l.userName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;*&#123;password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;l.name&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;l.age&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;l.sex==1?&#x27;ç”·&#x27;:&#x27;å¥³&#x27;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;#dates.format(l.birthday,&#x27;yyyy-MM-dd&#x27;)&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span> <span class="comment">&lt;!--<span class="doctag">TODO:</span> thymeleafä¸­æ—¥æœŸæ ¼å¼è½¬æ¢--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;#dates.format(l.created,&#x27;yyyy-MM-dd&#x27;)&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;#dates.format(l.updated,&#x27;yyyy-MM-dd&#x27;)&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;l.note&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="68-åˆ›å»ºå¯åŠ¨ç±»"><a class="markdownIt-Anchor" href="#68-åˆ›å»ºå¯åŠ¨ç±»"></a> 6.8ã€åˆ›å»ºå¯åŠ¨ç±»</h4><p>æŒ‡å®šmapperçš„æ‰«æè·¯å¾„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> tk.mybatis.spring.annotation.MapperScan;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.springbootlianxi.tk&quot;)</span> <span class="comment">//<span class="doctag">TODO:</span>   tkmapperéœ€è¦ä½¿ç”¨tkåŒ…ä¸‹çš„MapperScan</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MyApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="69-æµ‹è¯•"><a class="markdownIt-Anchor" href="#69-æµ‹è¯•"></a> 6.9ã€æµ‹è¯•</h4><p>è¿è¡Œå¯åŠ¨ç±»ï¼Œæµè§ˆå™¨è®¿é—®localhost:8080/allåï¼Œcontrollerè¿”å›æŸ¥è¯¢çš„æ•°æ®ï¼Œå‰ç«¯thymeleafé¡µé¢æ ¹æ®å¾—åˆ°çš„æ•°æ®è¿›è¡Œæ¸²æŸ“ï¼Œå®Œæˆæ•°æ®æ˜¾ç¤ºã€‚æµ‹è¯•å®Œæˆã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡ä¸»è¦ä»‹ç»Springbootå¦‚ä½•æ•´åˆå„ç±»ORMæ¡†æ¶çš„Demoï¼Œå¦‚Mybatisã€TK-Mybatisã€Mybatis-Plus</summary>
    
    
    
    <category term="Java" scheme="https://blog.kakar.top/categories/Java/"/>
    
    <category term="æ¡†æ¶æ•´åˆ" scheme="https://blog.kakar.top/categories/Java/%E6%A1%86%E6%9E%B6%E6%95%B4%E5%90%88/"/>
    
    
    <category term="SpringBoot" scheme="https://blog.kakar.top/tags/SpringBoot/"/>
    
    <category term="TK-Mybatis" scheme="https://blog.kakar.top/tags/TK-Mybatis/"/>
    
    <category term="H2" scheme="https://blog.kakar.top/tags/H2/"/>
    
    <category term="JDBC" scheme="https://blog.kakar.top/tags/JDBC/"/>
    
    <category term="Thymeleaf" scheme="https://blog.kakar.top/tags/Thymeleaf/"/>
    
    <category term="SpringMVC" scheme="https://blog.kakar.top/tags/SpringMVC/"/>
    
    <category term="Mybatis" scheme="https://blog.kakar.top/tags/Mybatis/"/>
    
    <category term="Mybatis-Plus" scheme="https://blog.kakar.top/tags/Mybatis-Plus/"/>
    
  </entry>
  
  <entry>
    <title>Javaä¸­çš„å¤šçº¿ç¨‹æ ¸å¿ƒæ¦‚å¿µ</title>
    <link href="https://blog.kakar.top/posts/5ae56610.html"/>
    <id>https://blog.kakar.top/posts/5ae56610.html</id>
    <published>2023-06-03T22:40:03.000Z</published>
    <updated>2023-06-03T22:40:03.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-çº¿ç¨‹çš„åˆ›å»ºæ–¹å¼"><a class="markdownIt-Anchor" href="#1-çº¿ç¨‹çš„åˆ›å»ºæ–¹å¼"></a> 1ã€çº¿ç¨‹çš„åˆ›å»ºæ–¹å¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Chapter_IV.Section_VI;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.FutureTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Section_VI</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">mt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MythreadImplRunnable</span> <span class="variable">mir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MythreadImplRunnable</span>();</span><br><span class="line">        <span class="type">MyThreadImplCallable</span> <span class="variable">mic</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThreadImplCallable</span>();</span><br><span class="line">        FutureTask&lt;String&gt; task = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;String&gt;(mic);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(mt,<span class="string">&quot;çº¿ç¨‹1&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(mir,<span class="string">&quot;çº¿ç¨‹2&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(task,<span class="string">&quot;çº¿ç¨‹3&quot;</span>).start();</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        <span class="keyword">if</span> (task.isDone())&#123;</span><br><span class="line">            System.out.println(task.get());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ä»»åŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;ç¬¬&quot;</span>+i+<span class="string">&quot;æ¬¡æ‰§è¡Œ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°Runnableæ¥å£åˆ›å»ºçº¿ç¨‹ä»»åŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MythreadImplRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;ç¬¬&quot;</span>+i+<span class="string">&quot;æ¬¡æ‰§è¡Œ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°Callableæ¥å£åˆ›å»ºå¸¦è¿”å›å€¼çš„çº¿ç¨‹ä»»åŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThreadImplCallable</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;String&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;ç¬¬&quot;</span>+i+<span class="string">&quot;æ¬¡æ‰§è¡Œ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;MyThreadImplCallableçº¿ç¨‹ä»»åŠ¡å·²å®Œæˆ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä¸‰ç§å®ç°æ–¹å¼ï¼Œéƒ½æ˜¯å¯ä»¥åˆ›å»ºå‡ºä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œç›¸åº”çš„ä»»åŠ¡ä½†ä¹Ÿæœ‰ä¸åŒç‚¹ã€‚</p><p>ç»§æ‰¿Threadç±»ã€å®ç°Runnableæ¥å£ã€å®ç°Callableæ¥å£è¿™ä¸‰ç§æ–¹æ³•çš„åŒºåˆ«åœ¨äºï¼šç”±äºJavaä¸­ä¸æ”¯æŒç±»ä¹‹é—´å¤šç»§æ‰¿ï¼Œå½“ä½¿ç”¨ç»§æ‰¿Threadç±»çš„æ–¹å¼åˆ›å»ºçº¿ç¨‹æ—¶ï¼Œå°±ä¼šå¯¼è‡´è¯¥ç±»æ— æ³•ç»§æ‰¿å…¶å®ƒç±»ï¼Œå»ä½¿ç”¨å…¶å®ƒç±»ä¸­çš„æ–¹æ³•ã€‚è€Œå®ç°Runnableæ¥å£çš„æ–¹å¼å°±å¯ä»¥åšåˆ°ï¼ŒJavaä¸­æ¥å£ä¹‹é—´æ”¯æŒä½¿ç”¨å¤šç»§æ‰¿ï¼Œå¦‚æœä¸€ä¸ªç±»ç»§æ‰¿äº†å¦ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥é€šè¿‡å®ç°Runnableæ¥å£ä»è€Œåšåˆ°æ—¢å¯ä»¥ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œåˆèƒ½ä½œä¸ºçº¿ç¨‹å¯¹è±¡å»ä½¿ç”¨ã€‚</p><p>Callableæ¥å£æ–¹å¼å»åˆ›å»ºçš„çº¿ç¨‹å¯¹è±¡çš„ç‰¹ç‚¹åœ¨äºï¼Œå®ƒå¯ä»¥åœ¨å­çº¿ç¨‹è¿è¡Œæ—¶æˆ–è¿è¡Œç»“æŸåï¼Œæœ‰ä¸€ä¸ªè¿”å›å€¼è¿”å›åˆ°è°ƒç”¨çº¿ç¨‹ï¼Œè°ƒç”¨çº¿ç¨‹å¯ä»¥æ ¹æ®è¿™ä¸ªè¿”å›å€¼å»åšä¸€äº›äº‹æƒ…ã€‚è¿™æ˜¯ä»¥ä¸Šä¸¤ç§æ–¹å¼éƒ½åšä¸åˆ°çš„ã€‚</p><h2 id="2-lambdaè¡¨è¾¾å¼åˆ›å»ºçº¿ç¨‹"><a class="markdownIt-Anchor" href="#2-lambdaè¡¨è¾¾å¼åˆ›å»ºçº¿ç¨‹"></a> 2ã€lambdaè¡¨è¾¾å¼åˆ›å»ºçº¿ç¨‹</h2><blockquote><p>JDK8ç‰¹æ€§ä¹‹Lambdaè¡¨è¾¾å¼å®ç°çº¿ç¨‹åˆ›å»º</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Chapter_IV.Section_VI;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.FutureTask;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Lambdaè¡¨è¾¾å¼ç®€åŒ–çº¿ç¨‹çš„åˆ›å»ºä»¥åŠä½¿ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Section_VI</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt; &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;ç¬¬&quot;</span>+i+<span class="string">&quot;æ¬¡æ‰§è¡Œ&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;çº¿ç¨‹1&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;ç¬¬&quot;</span>+i+<span class="string">&quot;æ¬¡æ‰§è¡Œ&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;çº¿ç¨‹2&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">        FutureTask&lt;String&gt; task = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;String&gt;(()-&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;ç¬¬&quot;</span>+i+<span class="string">&quot;æ¬¡æ‰§è¡Œ&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;MyThreadImplCallableçº¿ç¨‹ä»»åŠ¡å·²å®Œæˆ&quot;</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(task,<span class="string">&quot;çº¿ç¨‹3&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        <span class="keyword">if</span> (task.isDone())&#123;</span><br><span class="line">            System.out.println(task.get());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-çº¿ç¨‹çš„çŠ¶æ€"><a class="markdownIt-Anchor" href="#3-çº¿ç¨‹çš„çŠ¶æ€"></a> 3ã€çº¿ç¨‹çš„çŠ¶æ€</h2><p>çº¿ç¨‹çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸç»å†çš„ä¸åŒä½¿ç”¨æ–¹å¼ï¼Œå¯ä»¥å®šä¹‰ä¸ºçº¿ç¨‹çš„çŠ¶æ€ï¼Œå…±åˆ†ä¸ºå…­ç§çŠ¶æ€ã€‚å°±ç»ªã€è¿è¡Œã€é˜»å¡ã€ç­‰å¾…ã€è®¡æ—¶ç­‰å¾…ã€æ­»äº¡</p><p>å¯ä»¥é€šè¿‡Thread.Statè¿›å…¥æºç ä¸­æŸ¥çœ‹å¾—å‡ºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">State</span> &#123;</span><br><span class="line">       NEW, <span class="comment">//å°±ç»ª</span></span><br><span class="line">       RUNNABLE,<span class="comment">//è¿è¡Œ</span></span><br><span class="line">       BLOCKED,<span class="comment">//é˜»å¡</span></span><br><span class="line">       WAITING,<span class="comment">//ç­‰å¾…</span></span><br><span class="line">       TIMED_WAITING,<span class="comment">//è®¡æ—¶ç­‰å¾…</span></span><br><span class="line">       TERMINATED;<span class="comment">//æ­»äº¡/åœæ­¢</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ul><li>å°±ç»ªï¼šè¯¥çŠ¶æ€è¡¨ç¤ºï¼Œçº¿ç¨‹å¯¹è±¡å·²ç»è°ƒç”¨äº†start()æ–¹æ³•ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æŠ¢åˆ°cpuæ—¶é—´ç‰‡</li><li>è¿è¡Œï¼šçº¿ç¨‹æŠ¢åˆ°äº†cpuæ—¶é—´ç‰‡ï¼Œè¿›å…¥cpuä¸­è¿è¡Œ</li><li>é˜»å¡ï¼šç”±äºæŸäº›åŸå› ï¼Œå¯¼è‡´çº¿ç¨‹æ— æ³•ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œçº¿ç¨‹å°±ä¼šè¢«æ”¾ç½®åˆ°ç­‰å¾…åŒºï¼Œè¿™ç§æƒ…å†µå¤§è‡´æœ‰ï¼šçº¿ç¨‹å¾€ä¸‹æ‰§è¡Œæ—¶é‡åˆ°äº†synchronizedä»£ç å—è€Œæ²¡æœ‰è·å¾—é”</li><li>ç­‰å¾…ï¼šè°ƒç”¨äº†wait()æ–¹æ³•</li><li>è®¡æ—¶ç­‰å¾…ï¼šè°ƒç”¨äº†sleep()æ–¹æ³•æ—¶</li><li>æ­»äº¡ï¼šçº¿ç¨‹çš„ä»»åŠ¡å®Œæˆæˆ–è€…è¿›è¡Œäº†return ;  æ“ä½œã€‚</li></ul><h2 id="4-çº¿ç¨‹çš„åç§°è®¾ç½®æ–¹å¼"><a class="markdownIt-Anchor" href="#4-çº¿ç¨‹çš„åç§°è®¾ç½®æ–¹å¼"></a> 4ã€çº¿ç¨‹çš„åç§°è®¾ç½®æ–¹å¼</h2><p>é€šè¿‡æŸ¥çœ‹Threadç±»çš„æ„é€ æ–¹æ³•APIï¼Œå¯ä»¥äº†è§£åˆ°åœ¨ä½¿ç”¨new Thread()åˆ›å»ºçº¿ç¨‹å¯¹è±¡æ—¶ï¼Œè¯¥æ–¹æ³•æœ‰å¤šä¸ªé‡è½½å¯ä¾›é€‰æ‹©ï¼Œå½“æˆ‘ä»¬éœ€è¦ç»™ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡æŒ‡å®šåç§°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨public Thread(Runnable target,String name)æ„é€ æ–¹æ³•ï¼Œtargetä¸ºçº¿ç¨‹ä»»åŠ¡å¯¹è±¡ï¼Œnameå°±æ˜¯çº¿ç¨‹åç§°ï¼Œå¯ä»¥ä»»æ„æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºçº¿ç¨‹çš„åç§°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹ä»»åŠ¡&quot;</span>);</span><br><span class="line">        &#125;,<span class="string">&quot;çº¿ç¨‹1&quot;</span>).start();</span><br></pre></td></tr></table></figure><h2 id="5-çº¿ç¨‹çš„ä¼‘çœ "><a class="markdownIt-Anchor" href="#5-çº¿ç¨‹çš„ä¼‘çœ "></a> 5ã€çº¿ç¨‹çš„ä¼‘çœ </h2><p>çº¿ç¨‹çš„ä¼‘çœ æ–¹æ³•ä¸ºé™æ€æ–¹æ³•ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªï¼š</p><ul><li>Thread.sleep(long millis) å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹æš‚åœæ‰§è¡ŒæŒ‡å®šçš„æ¯«ç§’æ•°</li><li>Thread.sleeo(long millis,int nanos) å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹æš‚åœæ‰§è¡ŒæŒ‡å®šçš„æ¯«ç§’æ•°ï¼ŒåŠ ä¸ŠæŒ‡å®šçš„çº³ç§’æ•°</li></ul><h2 id="6-çº¿ç¨‹çš„é˜»å¡"><a class="markdownIt-Anchor" href="#6-çº¿ç¨‹çš„é˜»å¡"></a> 6ã€çº¿ç¨‹çš„é˜»å¡</h2><p>å½“å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œé‡åˆ°äº†åŒä¸€ä¸ªåŒæ­¥ä»£ç å—æ—¶ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªçº¿ç¨‹è·å¾—äº†è¯¥ä»£ç å—çš„é”ï¼Œé‚£ä¹ˆï¼Œå…¶å®ƒçº¿ç¨‹å°±ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œä¸€èµ·ç­‰å¾…å æœ‰é”çš„çº¿ç¨‹é‡Šæ”¾é”ã€‚</p><p>é˜»å¡ä¸€èˆ¬å‘ç”Ÿåœ¨çº¿ç¨‹é˜»å¡äºé”ã€‚</p><h2 id="7-çº¿ç¨‹çš„ä¸­æ–­"><a class="markdownIt-Anchor" href="#7-çº¿ç¨‹çš„ä¸­æ–­"></a> 7ã€çº¿ç¨‹çš„ä¸­æ–­</h2><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨Thread.interrupted()<span class="comment">;æ–¹æ³•æ—¶ï¼Œä¼šè®©å½“å‰çº¿ç¨‹ä¸­æ–­è¿›å…¥é˜»å¡çŠ¶æ€ã€‚</span></span><br></pre></td></tr></table></figure><p>å¯¹äºå¤„äºsleepï¼Œjoinç­‰æ“ä½œçš„çº¿ç¨‹ï¼Œå¦‚æœè¢«è°ƒç”¨interrupt()åï¼Œä¼šæŠ›å‡ºInterruptedExceptionå¼‚å¸¸ã€‚</p><p>ä¸å¯ä¸­æ–­çš„æ“ä½œï¼ŒåŒ…æ‹¬è¿›å…¥synchronizedæ®µä»¥åŠLock.lock()ï¼ŒinputSteam.read()ç­‰ï¼Œè°ƒç”¨interrupt()å¯¹äºè¿™å‡ ä¸ªé—®é¢˜æ— æ•ˆï¼Œå› ä¸ºå®ƒä»¬éƒ½ä¸æŠ›å‡ºä¸­æ–­å¼‚å¸¸ã€‚å¦‚æœæ‹¿ä¸åˆ°èµ„æºï¼Œå®ƒä»¬ä¼šæ— é™æœŸé˜»å¡ä¸‹å»ã€‚</p><p>å¯¹äºLock.lock()ï¼Œå¯ä»¥æ”¹ç”¨Lock.lockInterruptibly()ï¼Œå¯è¢«ä¸­æ–­çš„åŠ é”æ“ä½œï¼Œå®ƒå¯ä»¥æŠ›å‡ºä¸­æ–­å¼‚å¸¸ã€‚ç­‰åŒäºç­‰å¾…æ—¶é—´æ— é™é•¿çš„Lock.tryLock(long time, TimeUnit unit)ã€‚</p><p>å¯¹äºinputStreamç­‰èµ„æºï¼Œæœ‰äº›(å®ç°äº†interruptibleChannelæ¥å£)å¯ä»¥é€šè¿‡close()æ–¹æ³•å°†èµ„æºå…³é—­ï¼Œå¯¹åº”çš„é˜»å¡ä¹Ÿä¼šè¢«æ”¾å¼€ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œçº¿ç¨‹é€€å‡ºå¯ä»¥ä½¿ç”¨whileå¾ªç¯åˆ¤æ–­å…±äº«å˜é‡æ¡ä»¶çš„æ–¹å¼ï¼Œå½“çº¿ç¨‹å†…æœ‰é˜»å¡æ“ä½œæ—¶ï¼Œå¯èƒ½å¯¼è‡´çº¿ç¨‹æ— æ³•è¿è¡Œåˆ°æ¡ä»¶åˆ¤æ–­çš„åœ°æ–¹è€Œå¯¼è‡´ä¸€ç›´é˜»å¡ä¸‹å»ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¸­æ–­æ¥å¸®åŠ©çº¿ç¨‹è„±ç¦»é˜»å¡ã€‚å› æ­¤æ¯”è¾ƒä¼˜é›…çš„é€€å‡ºçº¿ç¨‹æ–¹å¼æ˜¯ç»“åˆå…±äº«å˜é‡å’Œä¸­æ–­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">thread = <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * åœ¨è¿™é‡Œä¸ºä¸€ä¸ªå¾ªç¯ï¼Œæ¡ä»¶æ˜¯åˆ¤æ–­çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—ä½æ˜¯å¦ä¸­æ–­</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">while</span> (flag&amp;&amp;(!Thread.currentThread().isInterrupted())) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Log.i(<span class="string">&quot;tag&quot;</span>,<span class="string">&quot;çº¿ç¨‹è¿è¡Œä¸­&quot;</span>+Thread.currentThread().getId());</span><br><span class="line">                <span class="comment">// æ¯æ‰§è¡Œä¸€æ¬¡æš‚åœ40æ¯«ç§’</span></span><br><span class="line">                <span class="comment">//å½“sleepæ–¹æ³•æŠ›å‡ºInterruptedException  ä¸­æ–­çŠ¶æ€ä¹Ÿä¼šè¢«æ¸…æ‰</span></span><br><span class="line">                Thread.sleep(<span class="number">40</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                <span class="comment">//å¦‚æœæŠ›å‡ºå¼‚å¸¸åˆ™å†æ¬¡è®¾ç½®ä¸­æ–­è¯·æ±‚</span></span><br><span class="line">                Thread.currentThread().interrupt();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">thread.start();</span><br></pre></td></tr></table></figure><h2 id="8-å®ˆæŠ¤çº¿ç¨‹"><a class="markdownIt-Anchor" href="#8-å®ˆæŠ¤çº¿ç¨‹"></a> 8ã€å®ˆæŠ¤çº¿ç¨‹</h2><p>å®ˆæŠ¤çº¿ç¨‹æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿ç¨‹ï¼Œå°±å’Œå®ƒçš„åå­—ä¸€æ ·ï¼Œå®ƒæ˜¯ç³»ç»Ÿçš„å®ˆæŠ¤è€…ï¼Œåœ¨åå°é»˜é»˜å®Œæˆä¸€äº›ç³»ç»Ÿæ€§çš„æœåŠ¡ï¼Œæ¯”å¦‚åƒåœ¾å›æ”¶çº¿ç¨‹ï¼ŒJITçº¿ç¨‹å°±å¯ä»¥ç†è§£ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚<br />ä¸å®ˆæŠ¤çº¿ç¨‹ç›¸å¯¹çš„æ˜¯ç”¨æˆ·çº¿ç¨‹ï¼Œç”¨æˆ·çº¿ç¨‹å¯ä»¥è®¤ä¸ºæ˜¯ç³»ç»Ÿçš„å·¥ä½œçº¿ç¨‹ï¼Œå®ƒä¼šå®Œæˆè¿™ä¸ªç¨‹åºè¦å®Œæˆçš„ä¸šåŠ¡å‘˜æ“ä½œã€‚å¦‚æœç”¨æˆ·çº¿ç¨‹å…¨éƒ¨ç»“æŸï¼Œåˆ™æ„å‘³ç€è¿™ä¸ªç¨‹åºæ— äº‹å¯åšã€‚å®ˆæŠ¤çº¿ç¨‹è¦å®ˆæŠ¤çš„å¯¹è±¡å·²ç»ä¸å­˜åœ¨äº†ï¼Œé‚£ä¹ˆæ•´ä¸ªåº”ç”¨ç¨‹åºå°±åº”è¯¥ç»“æŸã€‚å› æ­¤ï¼Œå½“ä¸€ä¸ªJavaåº”ç”¨å†…åªæœ‰å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼ŒJavaè™šæ‹Ÿæœºè‡ªç„¶é€€å‡ºã€‚<br />å¯ä»¥é€šè¿‡Thread.setDaemonè®¾ç½®å®ˆæŠ¤çº¿ç¨‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DaemonDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">daemonThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;i am alive&quot;</span>);</span><br><span class="line">                        Thread.sleep(<span class="number">500</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;finally block&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        daemonThread.setDaemon(<span class="literal">true</span>);</span><br><span class="line">        daemonThread.start();</span><br><span class="line">        <span class="comment">//ç¡®ä¿mainçº¿ç¨‹ç»“æŸå‰èƒ½ç»™daemonThreadèƒ½å¤Ÿåˆ†åˆ°æ—¶é—´ç‰‡</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">800</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>daemonThread.setDaemon(true)è®¾ç½®daemonThreadä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚<br />æ³¨æ„ï¼šå®ˆæŠ¤çº¿ç¨‹å¿…é¡»åœ¨startä¹‹å‰è®¾ç½®ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p><h2 id="9-ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ–¹å¼"><a class="markdownIt-Anchor" href="#9-ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ–¹å¼"></a> 9ã€ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ–¹å¼</h2><p>ä¿è¯çº¿ç¨‹å®‰å…¨ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ï¼š</p><ul><li>åŒæ­¥ä»£ç å—ï¼šä½¿ç”¨synchronizedå…³é”®å­—ä¿®é¥°ä¸€ä¸ªä»£ç å—ï¼Œå‚æ•°ä¼ å…¥éœ€è¦é”å®šçš„èŒƒå›´ï¼ˆç±»ï¼Œå¯¹è±¡ï¼‰ã€‚ä¸€ä¸ªçº¿ç¨‹è®¿é—®ä¸€ä¸ªå¯¹è±¡ä¸­çš„synchronized(this)åŒæ­¥ä»£ç å—æ—¶ï¼Œå…¶ä»–è¯•å›¾è®¿é—®è¯¥å¯¹è±¡çš„çº¿ç¨‹å°†è¢«é˜»å¡ã€‚ä»è€Œä¿è¯äº†çº¿ç¨‹çš„å®‰å…¨ã€‚å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®å¯¹è±¡çš„ä¸€ä¸ªsynchronized(this)åŒæ­¥ä»£ç å—æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä»ç„¶å¯ä»¥è®¿é—®è¯¥å¯¹è±¡ä¸­çš„ésynchronized(this)åŒæ­¥ä»£ç å—ã€‚</li><li>åŒæ­¥æ–¹æ³•ï¼šä½¿ç”¨synchronizedå…³é”®å­—ä¿®é¥°çš„æ–¹æ³•ä¸ºåŒæ­¥æ–¹æ³•ï¼Œå®ƒé”å®šçš„èŒƒå›´æ˜¯è¯¥å¯¹è±¡ã€‚å¦‚æœè¯¥æ–¹æ³•åŒæ—¶è¿˜æ˜¯é™æ€æ–¹æ³•ï¼Œé‚£ä¹ˆé”å®šçš„å°±æ˜¯è¿™ä¸ªç±»ã€‚</li><li>æ˜¾ç¤ºé”Lockï¼šæ¯”è¾ƒå¸¸ç”¨çš„ä¸ºLockç±»ä¸‹çš„ReentrantLock( )ç±»ï¼Œå®ƒé€šè¿‡åœ¨éœ€è¦è¿›è¡ŒåŒæ­¥çš„ä½ç½®è°ƒç”¨lock( )æ–¹æ³•è¿›è¡ŒåŠ é”ï¼Œåœ¨åŒæ­¥ä½ç½®çš„æœ«å°¾è¿›è¡Œunlock( )è¿›è¡Œé‡Šæ”¾é”ï¼Œä»è€Œä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</li></ul><h2 id="10-æ­»é”"><a class="markdownIt-Anchor" href="#10-æ­»é”"></a> 10ã€æ­»é”</h2><p>çº¿ç¨‹æ­»é”æè¿°çš„æ˜¯è¿™æ ·ä¸€ç§æƒ…å†µï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶è¢«é˜»å¡ï¼Œå®ƒä»¬ä¸­çš„ä¸€ä¸ªæˆ–è€…å…¨éƒ¨éƒ½æ˜¯ç­‰å¾…æŸä¸ªèµ„æºè¢«é‡Šæ”¾ï¼Œç”±äºçº¿ç¨‹è¢«æ— é™æœŸçš„é˜»å¡ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¸å¯èƒ½æ­£å¸¸ç»ˆæ­¢ï¼Œè¿™æ ·çš„æƒ…å†µï¼Œå°±ç§°ä¸ºçº¿ç¨‹æ­»é”ã€‚</p><p>æ­»é”ä¸¾ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Chapter_IV.Section_VI;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Section_VI_II</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ­»é”æ¼”ç¤º ä¸ é¿å…æ­»é”æ¼”ç¤º</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">resource1</span> <span class="variable">r1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">resource1</span>();</span><br><span class="line">        <span class="type">resource2</span> <span class="variable">r2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">resource2</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (r1)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;è·å–äº†r1,ç­‰å¾…è·å–r2&quot;</span>);</span><br><span class="line">                r1.print();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">synchronized</span> (r2)&#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName()+<span class="string">&quot;è·å–äº†r2&quot;</span>);</span><br><span class="line">                    r2.print();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;çº¿ç¨‹1&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (r2)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;è·å–äº†r2,ç­‰å¾…è·å–r1&quot;</span>);</span><br><span class="line">                r2.print();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">synchronized</span> (r1)&#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName()+<span class="string">&quot;è·å–äº†r1&quot;</span>);</span><br><span class="line">                    r1.print();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;çº¿ç¨‹2&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">resource1</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ­¤æ—¶èµ„æºr1è¢«&quot;</span>+Thread.currentThread().getName()+<span class="string">&quot;å ç”¨äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">resource2</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ­¤æ—¶èµ„æºr2è¢«&quot;</span>+Thread.currentThread().getName()+<span class="string">&quot;å ç”¨äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>äº§ç”Ÿæ­»é”çš„æ¡ä»¶ï¼š</p><ul><li>äº’æ–¥æ¡ä»¶ï¼Œè¯¥èµ„æºä»»æ„ä¸€ä¸ªæ—¶åˆ»åªç”±ä¸€ä¸ªçº¿ç¨‹å ç”¨ã€‚</li><li>è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªçº¿ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li><li>ä¸å‰¥å¤ºæ¡ä»¶ï¼šçº¿ç¨‹å·²è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹å¼ºè¡ŒæŠ¢å¤ºï¼Œåªæœ‰è‡ªå·±ä½¿ç”¨å®Œæ¯•æ‰é‡Šæ”¾èµ„æºã€‚</li><li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šè‹¥å¹²è¿›ç¨‹ä¹‹é—´å½¢æˆäº†ä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»</li></ul><p>é€šè¿‡ä»¥ä¸Šçš„æ­»é”æ¡ä»¶å¾—å‡ºï¼Œé¿å…æ­»é”çš„æ–¹æ³•ï¼š</p><ul><li>ç ´ç¯äº’æ–¥æ¡ä»¶ï¼šè¿™ä¸ªæ¡ä»¶æˆ‘ä»¬æ²¡æœ‰åŠæ³•ç ´åï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨é”ï¼Œå°±æ˜¯æƒ³è®©å®ƒä»¬äº’æ–¥çš„ï¼ˆä¸´ç•Œèµ„æºéœ€è¦äº’æ–¥è®¿é—®ï¼‰</li><li>ç ´åè¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€æ¬¡æ€§ç”³è¯·å…¨éƒ¨èµ„æº</li><li>ç ´åä¸å‰¥å¤ºæ¡ä»¶ï¼šå ç”¨éƒ¨åˆ†èµ„æºçš„çº¿ç¨‹è¿›ä¸€æ­¥ç”³è¯·å…¶ä»–èµ„æºæ—¶ï¼Œå¦‚æœç”³è¯·ä¸åˆ°ï¼Œå¯ä»¥ä¸»åŠ¨é‡Šæ”¾å®ƒå æœ‰çš„èµ„æºã€‚</li><li>ç ´åå¾ªç¯æ¡ä»¶ï¼šé é¡ºåºç”³è¯·èµ„æºäº†é¢„é˜²ï¼ŒæŒ‰æŸä¸€é¡ºåºç”³è¯·èµ„æºï¼Œé‡Šæ”¾èµ„æºåˆ™ååºé‡Šæ”¾ï¼Œç ´åå¾ªç¯ç­‰å¾…çš„æ¡ä»¶ã€‚</li></ul><h2 id="11-å¤šçº¿ç¨‹çš„é€šä¿¡"><a class="markdownIt-Anchor" href="#11-å¤šçº¿ç¨‹çš„é€šä¿¡"></a> 11ã€å¤šçº¿ç¨‹çš„é€šä¿¡</h2><p>çº¿ç¨‹çš„é€šä¿¡ä¸»è¦ä½¿ç”¨çš„æ–¹æ³•ï¼šwait() ä¸ notify() botifyAll()</p><p>wait( ) : çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œå¹¶è®©å‡ºæ—¶é—´ç‰‡ã€‚</p><p>notify( ) : å”¤é†’ä»»æ„ä¸€ä¸ªçº¿ç¨‹</p><p>notifyAll( )ï¼šå”¤é†’å…¨éƒ¨é˜»å¡é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ï¼Œè°æŠ¢åˆ°æ—¶é—´ç‰‡å°±è°å°±æ‰§è¡Œã€‚</p><p>wait()ï¼Œnotify()ï¼ŒnotifyAll()ä¸‰ä¸ªæ–¹æ³•çš„è°ƒç”¨è€…å¿…é¡»æ˜¯åŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•ä¸­çš„åŒæ­¥ç›‘è§†å™¨ã€‚</p><p>å¦åˆ™ï¼Œä¼šå‡ºç°IllegalMonitorStateExceptionå¼‚å¸¸</p><p>wait()ä¸sleep()çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>waitæ˜¯Objectç±»ä¸­çš„æ–¹æ³•ï¼Œsleepæ˜¯Threadç±»ä¸­çš„æ–¹æ³•</li><li>waitåªèƒ½åœ¨åŒæ­¥ä»£ç å—ä¸­ä½¿ç”¨ï¼Œsleepå¯ä»¥åœ¨ä»»æ„åœ°æ–¹ä½¿ç”¨</li><li>waitæ“ä½œä¼šé‡Šæ”¾é”ï¼Œsleepæ“ä½œä¸ä¼šé‡Šæ”¾é”</li></ul><h2 id="12-ç»å…¸é—®é¢˜ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜"><a class="markdownIt-Anchor" href="#12-ç»å…¸é—®é¢˜ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜"></a> 12ã€ç»å…¸é—®é¢˜ï¼šç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜</h2><p><strong>Synchronized å’Œ Lockçš„åŒºåˆ«</strong></p><p>1ã€Synchronized æ˜¯å†…ç½®çš„javaå…³é”®å­—ï¼ŒLockæ˜¯ä¸€ä¸ªç±»</p><p>2ã€Synchronized æ— æ³•åˆ¤æ–­é”çš„çŠ¶æ€ï¼ŒLockå¯ä»¥åˆ¤æ–­æ˜¯å¦è·å–äº†é”</p><p>3ã€Synchronized ä¼šè‡ªåŠ¨é‡Šæ”¾é”ï¼ŒLockå¿…é¡»è¦æ‰‹åŠ¨é‡Šæ”¾é”ï¼Œå¦åˆ™ä¼šå‡ºç°æ­»é”ã€‚</p><p>4ã€Synchronized æ—¶ï¼Œçº¿ç¨‹1è·å–äº†é”ï¼Œçº¿ç¨‹2ä¼šç­‰å¾…ï¼Œå¦‚æœçº¿ç¨‹1å‡ºç°äº†é˜»å¡ï¼Œé‚£ä¹ˆçº¿ç¨‹2ä¾ç„¶è¿˜åœ¨ç»§ç»­ç­‰å¾…ï¼ŒLocké”å°±ä¸ä¸€å®šä¼šç­‰å¾…ä¸‹å»ã€‚</p><p>5ã€Synchronized å¯é‡å…¥é”ï¼Œä¸å¯ä»¥ä¸­æ–­ä¸”éå…¬å¹³ã€‚lockå¯é‡å…¥é”ï¼Œå¯ä»¥åˆ¤æ–­é”ï¼ˆæœ‰ä¸€ä¸ªtryLock( )æ–¹æ³•ï¼Œå¯ä»¥å°è¯•è·å–é”ï¼‰ï¼Œéå…¬å¹³ï¼ˆå¯ä»¥è‡ªå·±è®¾ç½®ä¸ºå…¬å¹³ï¼‰ã€‚</p><p>6ã€é€‚åˆå°‘é‡çš„ä»£ç åŒæ­¥é—®é¢˜ï¼ŒLocké€‚åˆå¤§é‡çš„åŒæ­¥ä»£ç ã€‚</p><p><strong>javaå®ç°ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜ï¼ˆä¼šå‡ºç°è™šå‡å”¤é†’ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SynchronizedVersion</span> &#123;</span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">resource</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">resource</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">                    r.increment();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;çº¿ç¨‹A&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">                    r.decrement();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;çº¿ç¨‹B&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//èµ„æºç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">resource</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯¹numberè¿›è¡Œ+1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">increment</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœèµ„æºä¸ä¸º0 è¯´æ˜å·²ç»åŠ è¿‡äº†ï¼Œå½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">if</span> (number==<span class="number">1</span>)&#123;</span><br><span class="line">            wait();</span><br><span class="line">        &#125;</span><br><span class="line">        number ++;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+number);</span><br><span class="line">        <span class="built_in">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¯¹numberè¿›è¡Œ-1</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">decrement</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">if</span> (number==<span class="number">0</span>)</span><br><span class="line">            wait();</span><br><span class="line">        number --;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+number);</span><br><span class="line">        <span class="built_in">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç ä¸­ï¼Œå¦‚æœä»…æœ‰ä¸¤ä¸ªçº¿ç¨‹æ—¶ï¼Œç¨‹åºæ­£å¸¸è¿è¡Œã€‚å½“çº¿ç¨‹æ•°é‡å¤§äº2æ—¶ï¼Œå°±ä¼šå‡ºç°è™šå‡å”¤é†’çš„é—®é¢˜ã€‚</p><p>åœ¨ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (number==<span class="number">1</span>)&#123;</span><br><span class="line">    wait();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸­ï¼Œå¦‚æœåŒæ—¶å‡ºç°ä¸¤ä¸ªçº¿ç¨‹è¿›å…¥ifä½“å†…ï¼Œè¿›è¡Œwaitæ“ä½œæ—¶ï¼Œæ­¤æ—¶å¦‚æœå…¶ä¸­ä¸€ä¸ªçº¿ç¨‹è¢«å”¤é†’åï¼Œå®ƒå¹¶ä¸ä¼šå»åˆ¤æ–­æ­¤æ—¶çš„numberæ˜¯å¦ä¾ç„¶æ˜¯ç­‰äº1çš„ï¼Œè€Œæ˜¯ç›´æ¥è¿›è¡ŒåŠ 1æ“ä½œï¼Œæ¥ç€ï¼Œæœ‰æ„æ€çš„äº‹æƒ…å°±æ¥äº†ï¼Œè¯¥çº¿ç¨‹è¿è¡Œå®Œäº†ä¹‹åï¼Œå¦‚æœæŠŠåŒä¸ºé˜»å¡çš„å¦ä¸€ä¸ªçº¿ç¨‹å”¤é†’äº†ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¾ç„¶ä¸ä¼šè¿›è¡Œnumber==1çš„åˆ¤æ–­ï¼Œè€Œè¿›è¡Œäº†number++ï¼Œé‚£ä¹ˆï¼Œä»£ç å¤šçº¿ç¨‹ä¸­çš„è¿è¡Œå°±å‡ºç°äº†é—®é¢˜ã€‚è¯¥é—®é¢˜æˆä¸ºè™šå‡å”¤é†’ï¼Œé‚£ä¹ˆæ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p><p>é€šè¿‡æŸ¥çœ‹jdkæ–‡æ¡£ï¼Œwaitæ–¹æ³•çš„æè¿°ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>( obj )&#123;</span><br><span class="line"><span class="keyword">while</span>(æ¡ä»¶)&#123;</span><br><span class="line">obj.wait([æ¯«ç§’æ•°])</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¨èä½¿ç”¨whileå°†waitæ–¹æ³•åŒ…èµ·æ¥ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨çº¿ç¨‹è¢«å”¤é†’æ—¶ï¼Œå¦‚æœä¸æ»¡è¶³æ¡ä»¶ï¼Œå°±ä¾ç„¶æ‰§è¡Œwaitæ“ä½œï¼Œè§£å†³äº†è™šå‡å”¤é†’çš„é—®é¢˜ã€‚</p><p><strong>æ­£ç¡®çš„å®ç°æ–¹æ³•ï¼Œifåˆ¤æ–­æ”¹æˆwhileåˆ¤æ–­ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SynchronizedVersion</span> &#123;</span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">resource</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">resource</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">                    r.increment();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;çº¿ç¨‹A&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">                    r.decrement();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;çº¿ç¨‹B&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">                    r.increment();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;çº¿ç¨‹C&quot;</span>).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">                    r.decrement();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;çº¿ç¨‹D&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//èµ„æºç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">resource</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯¹numberè¿›è¡Œ+1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">increment</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœèµ„æºä¸ä¸º0 è¯´æ˜å·²ç»åŠ è¿‡äº†ï¼Œå½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">while</span> (number==<span class="number">1</span>)&#123;</span><br><span class="line">            wait();</span><br><span class="line">        &#125;</span><br><span class="line">        number ++;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+number);</span><br><span class="line">        <span class="built_in">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¯¹numberè¿›è¡Œ-1</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">decrement</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">while</span> (number==<span class="number">0</span>)</span><br><span class="line">            wait();</span><br><span class="line">        number --;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+number);</span><br><span class="line">        <span class="built_in">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>JUCç‰ˆå®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Condition;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JUCVersion</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">resource1</span> <span class="variable">r1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">resource1</span>();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)r1.increment();&#125;,<span class="string">&quot;çº¿ç¨‹A&quot;</span>).start();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)r1.decrement();&#125;,<span class="string">&quot;çº¿ç¨‹B&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">resource1</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Lock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">    <span class="comment">//ä½¿ç”¨Lockå¯¹è±¡ï¼Œåˆ›å»ºç›‘è§†å™¨</span></span><br><span class="line">    <span class="type">Condition</span> <span class="variable">condition</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯¹numberè¿›è¡Œ+1</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">increment</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//åŠ é”</span></span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœèµ„æºä¸ä¸º0 è¯´æ˜å·²ç»åŠ è¿‡äº†ï¼Œå½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€</span></span><br><span class="line">            <span class="keyword">while</span> (number==<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="comment">//å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…,è°ƒç”¨Condition.await()å°†åœ¨ç­‰å¾…ä¹‹å‰ä»¥åŸå­æ–¹å¼é‡Šæ”¾é”ï¼Œå¹¶åœ¨ç­‰å¾…è¿”å›ä¹‹å‰é‡æ–°è·å–é”ã€‚</span></span><br><span class="line">                condition.await();</span><br><span class="line">            &#125;</span><br><span class="line">            number ++;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+number);</span><br><span class="line">            <span class="comment">//å”¤é†’å…¨éƒ¨ç­‰å¾…çº¿ç¨‹</span></span><br><span class="line">            condition.signalAll();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//é‡Šæ”¾é”</span></span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯¹numberè¿›è¡Œ-1</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">decrement</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//åŠ é”</span></span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœèµ„æºä¸ä¸º0 è¯´æ˜å·²ç»åŠ è¿‡äº†ï¼Œå½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€</span></span><br><span class="line">            <span class="keyword">while</span> (number==<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="comment">//å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…</span></span><br><span class="line">                condition.await();</span><br><span class="line">            &#125;</span><br><span class="line">            number --;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;-&gt;&quot;</span>+number);</span><br><span class="line">            <span class="comment">//å”¤é†’å…¨éƒ¨ç­‰å¾…çº¿ç¨‹</span></span><br><span class="line">            condition.signalAll();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//é‡Šæ”¾é”</span></span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>JUCæ‹“å±•ç‰ˆï¼ŒæŒ‡å®šå¤šä¸ªçº¿ç¨‹æŒ‰é¡ºåºæ‰§è¡Œ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Condition;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JUCPlusVersion</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">resource2</span> <span class="variable">r2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">resource2</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123; <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) r2.showA(); &#125;, <span class="string">&quot;çº¿ç¨‹A&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123; <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) r2.showB(); &#125;, <span class="string">&quot;çº¿ç¨‹B&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123; <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) r2.showC(); &#125;, <span class="string">&quot;çº¿ç¨‹C&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">resource2</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Lock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">    <span class="comment">//ä½¿ç”¨Lockå¯¹è±¡ï¼Œåˆ›å»ºç›‘è§†å™¨</span></span><br><span class="line">    <span class="type">Condition</span> <span class="variable">condition1</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line">    <span class="type">Condition</span> <span class="variable">condition2</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line">    <span class="type">Condition</span> <span class="variable">condition3</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showA</span><span class="params">()</span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span>(number != <span class="number">1</span>)&#123;</span><br><span class="line">                <span class="comment">//condition1è¿›å…¥ç­‰å¾…</span></span><br><span class="line">                condition1.await();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;=&gt;&quot;</span>+number);</span><br><span class="line">            number = <span class="number">2</span>;</span><br><span class="line">            <span class="comment">//å”¤é†’condition2</span></span><br><span class="line">            condition2.signal();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showB</span><span class="params">()</span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span>(number != <span class="number">2</span>)&#123;</span><br><span class="line">                <span class="comment">//condition2è¿›å…¥ç­‰å¾…</span></span><br><span class="line">                condition2.await();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;=&gt;&quot;</span>+number);</span><br><span class="line">            number = <span class="number">3</span>;</span><br><span class="line">            <span class="comment">//å”¤é†’condition3</span></span><br><span class="line">            condition3.signal();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showC</span><span class="params">()</span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span>(number != <span class="number">3</span>)&#123;</span><br><span class="line">                <span class="comment">//condition3è¿›å…¥ç­‰å¾…</span></span><br><span class="line">                condition3.await();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;=&gt;&quot;</span>+number);</span><br><span class="line">            number = <span class="number">1</span>;</span><br><span class="line">            <span class="comment">//å”¤é†’condition1</span></span><br><span class="line">            condition1.signal();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="13-çº¿ç¨‹æ± æŠ€æœ¯å¾…è¡¥å……"><a class="markdownIt-Anchor" href="#13-çº¿ç¨‹æ± æŠ€æœ¯å¾…è¡¥å……"></a> 13ã€çº¿ç¨‹æ± æŠ€æœ¯ï¼ˆå¾…è¡¥å……ï¼‰</h2><p>çº¿ç¨‹è¿‡å¤šä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€ï¼Œå…¶ä¸­åŒ…æ‹¬åˆ›å»ºé”€æ¯çº¿ç¨‹çš„å¼€é”€ã€è°ƒåº¦çº¿ç¨‹çš„å¼€é”€ç­‰ç­‰ï¼ŒåŒæ—¶ä¹Ÿé™ä½äº†è®¡ç®—æœºçš„æ•´ä½“æ€§èƒ½ã€‚çº¿ç¨‹æ± ç»´æŠ¤å¤šä¸ªçº¿ç¨‹ï¼Œç­‰å¾…ç›‘ç£ç®¡ç†è€…åˆ†é…å¯å¹¶å‘æ‰§è¡Œçš„ä»»åŠ¡ã€‚è¿™ç§åšæ³•ï¼Œä¸€æ–¹é¢é¿å…äº†å¤„ç†ä»»åŠ¡æ—¶åˆ›å»ºé”€æ¯çº¿ç¨‹å¼€é”€çš„ä»£ä»·ï¼Œå¦ä¸€æ–¹é¢é¿å…äº†çº¿ç¨‹æ•°é‡è†¨èƒ€å¯¼è‡´çš„è¿‡åˆ†è°ƒåº¦é—®é¢˜ï¼Œä¿è¯äº†å¯¹å†…æ ¸çš„å……åˆ†åˆ©ç”¨ã€‚</p><p>javaä¸­å¸¸ç”¨çš„çº¿ç¨‹æ± æœ‰ï¼š</p><p><code>Executors.newFixedThreadPool(nThreads)</code>ï¼šåˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œå¯æ§åˆ¶çº¿ç¨‹æœ€å¤§å¹¶å‘æ•°ï¼Œè¶…å‡ºçš„çº¿ç¨‹ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚</p><p><code>Executors.newCachedThreadPool()</code>ï¼šåˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± é•¿åº¦è¶…è¿‡å¤„ç†éœ€è¦ï¼Œå¯çµæ´»å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè‹¥æ— å¯å›æ”¶ï¼Œåˆ™æ–°å»ºçº¿ç¨‹ã€‚</p><p><code>Executors.newSingleThreadExecutor()</code>ï¼šåˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± ï¼Œå®ƒåªä¼šç”¨å”¯ä¸€çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œ ä¿è¯æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§æŒ‡å®šé¡ºåº(FIFO, LIFO, ä¼˜å…ˆçº§)æ‰§è¡Œã€‚</p><p><code>Executors.newScheduledThreadPool(nThreads)</code>ï¼šåˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œæ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡ä¸»è¦è®²è¿°Javaä¸­å¤šçº¿ç¨‹çš„ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œä»¥åŠæœ‰å…³äºå¤šçº¿ç¨‹çš„ç»å…¸é—®é¢˜-ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…</summary>
    
    
    
    <category term="Java" scheme="https://blog.kakar.top/categories/Java/"/>
    
    <category term="å¤šçº¿ç¨‹" scheme="https://blog.kakar.top/categories/Java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
    
    <category term="çº¿ç¨‹" scheme="https://blog.kakar.top/tags/%E7%BA%BF%E7%A8%8B/"/>
    
    <category term="Thread" scheme="https://blog.kakar.top/tags/Thread/"/>
    
  </entry>
  
  <entry>
    <title>Markdownè¯­æ³•ä¸å¤–æŒ‚æ ‡ç­¾å†™æ³•æ±‡æ€»</title>
    <link href="https://blog.kakar.top/posts/2013454d.html"/>
    <id>https://blog.kakar.top/posts/2013454d.html</id>
    <published>2023-06-03T22:19:03.000Z</published>
    <updated>2023-06-03T23:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1markdownè¯­æ³•è‡ªå¸¦æ ¼å¼"><a class="markdownIt-Anchor" href="#1markdownè¯­æ³•è‡ªå¸¦æ ¼å¼"></a> 1.Markdownè¯­æ³•è‡ªå¸¦æ ¼å¼</h1><div class="note info flat"><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/u014061630/article/details/81359144">Markdownè¯­æ³•å›¾æ–‡å…¨é¢è¯¦è§£(10åˆ†é’Ÿå­¦ä¼š)</a></p></div><div class="note warning flat"><p>æ³¨æ„ï¼šæ­¤é¡µé¢å¶å°”ä¼šå­˜åœ¨CSSå†²çªé—®é¢˜!</p></div><h2 id="11-ä»£ç å—"><a class="markdownIt-Anchor" href="#11-ä»£ç å—"></a> 1.1 ä»£ç å—</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">\```shell</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">VSCodeç»ˆç«¯</span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cmderç»ˆç«¯</span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br><span class="line">\```</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">VSCodeç»ˆç«¯</span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cmderç»ˆç«¯</span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="12-å¤šçº§æ ‡é¢˜"><a class="markdownIt-Anchor" href="#12-å¤šçº§æ ‡é¢˜"></a> 1.2 å¤šçº§æ ‡é¢˜</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># H1</span></span><br><span class="line"><span class="section">## H2</span></span><br><span class="line"><span class="section">### H3</span></span><br><span class="line"><span class="section">#### H4</span></span><br><span class="line"><span class="section">##### H5</span></span><br><span class="line"><span class="section">###### H6</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>è§æœ¬æ–‡ç« æ ‡é¢˜!</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="13-æ–‡å­—æ ·å¼"><a class="markdownIt-Anchor" href="#13-æ–‡å­—æ ·å¼"></a> 1.3 æ–‡å­—æ ·å¼</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">u</span>&gt;</span></span>ä¸‹åˆ’çº¿æ¼”ç¤º<span class="language-xml"><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">æ–‡å­—<span class="strong">**åŠ ç²—**</span>æ¼”ç¤º</span><br><span class="line"></span><br><span class="line">æ–‡å­—<span class="emphasis">*æ–œä½“*</span>æ¼”ç¤º</span><br><span class="line"></span><br><span class="line">æ–‡æœ¬<span class="code">`é«˜äº®`</span>æ¼”ç¤º</span><br><span class="line"></span><br><span class="line">æ–‡æœ¬~~åˆ é™¤~~çº¿æ¼”ç¤º</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span> = <span class="string">5</span>&gt;</span></span>5å·å­—<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">&quot;é»‘ä½“&quot;</span>&gt;</span></span>é»‘ä½“<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">blue</span>&gt;</span></span>è“è‰²<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">MistyRose</span>&gt;</span></span>è¿™é‡Œçš„èƒŒæ™¯è‰²æ˜¯ï¼šMistyRosenï¼Œæ­¤å¤„è¾“å…¥ä»»æ„æƒ³è¾“å…¥çš„å†…å®¹<span class="language-xml"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p><u>ä¸‹åˆ’çº¿æ¼”ç¤º</u></p><p>æ–‡å­—<strong>åŠ ç²—</strong>æ¼”ç¤º</p><p>æ–‡å­—<em>æ–œä½“</em>æ¼”ç¤º</p><p>æ–‡æœ¬<code>é«˜äº®</code>æ¼”ç¤º</p><p>æ–‡æœ¬<s>åˆ é™¤</s>çº¿æ¼”ç¤º</p><p><font size = 5>5å·å­—</font><br /><font face="é»‘ä½“">é»‘ä½“</font><br /><font color=blue>è“è‰²</font></p><table><tr><td bgcolor=MistyRose>è¿™é‡Œçš„èƒŒæ™¯è‰²æ˜¯ï¼šMistyRosenï¼Œæ­¤å¤„è¾“å…¥ä»»æ„æƒ³è¾“å…¥çš„å†…å®¹</td></tr></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="note info flat"><p>ä¸Šè¿°è¦ç‚¹å¯å‚è€ƒ:<a href="https://blog.csdn.net/qq_43732429/article/details/108034518">ã€Markdownè¯­æ³•ã€‘å­—ä½“é¢œè‰²å¤§å°åŠæ–‡å­—åº•è‰²è®¾ç½®</a></p></div><h2 id="14-å¼•ç”¨"><a class="markdownIt-Anchor" href="#14-å¼•ç”¨"></a> 1.4 å¼•ç”¨</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt;  Java</span></span><br><span class="line"><span class="quote">&gt; äºŒçº§å¼•ç”¨æ¼”ç¤º</span></span><br><span class="line"><span class="quote">&gt; MySQL</span></span><br><span class="line"><span class="quote">&gt; &gt;å¤–é”®</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;äº‹åŠ¡</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;<span class="strong">**è¡Œçº§é”**</span>(å¼•ç”¨å†…éƒ¨ä¸€æ ·å¯ä»¥ç”¨æ ¼å¼)</span></span><br><span class="line"><span class="quote">&gt; </span></span><br><span class="line"><span class="quote">&gt; ....</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><blockquote><p>Java<br />äºŒçº§å¼•ç”¨æ¼”ç¤º<br />MySQL</p><blockquote><p>å¤–é”®</p><p>äº‹åŠ¡</p><p><strong>è¡Œçº§é”</strong>(å¼•ç”¨å†…éƒ¨ä¸€æ ·å¯ä»¥ç”¨æ ¼å¼)</p></blockquote><p>â€¦</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="15-åˆ†å‰²çº¿"><a class="markdownIt-Anchor" href="#15-åˆ†å‰²çº¿"></a> 1.5 åˆ†å‰²çº¿</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><hr /><hr /><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="16-åˆ—è¡¨-è·Ÿç©ºæ ¼éƒ½å¯ä»¥"><a class="markdownIt-Anchor" href="#16-åˆ—è¡¨-è·Ÿç©ºæ ¼éƒ½å¯ä»¥"></a> 1.6 åˆ—è¡¨(*,+,-è·Ÿç©ºæ ¼éƒ½å¯ä»¥)</h2><h3 id="161-æ— åºåˆ—è¡¨"><a class="markdownIt-Anchor" href="#161-æ— åºåˆ—è¡¨"></a> 1.6.1 æ— åºåˆ—è¡¨</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> Java</span><br><span class="line"><span class="bullet">*</span> Python</span><br><span class="line"><span class="bullet">*</span> ...</span><br><span class="line"></span><br><span class="line"><span class="bullet">+</span> Java</span><br><span class="line"><span class="bullet">+</span> Python</span><br><span class="line"><span class="bullet">+</span> ...</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> Java</span><br><span class="line"><span class="bullet">-</span> Python</span><br><span class="line"><span class="bullet">-</span> ...</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ul><li>Java</li><li>Python</li><li>â€¦</li></ul><ul><li>Java</li><li>Python</li><li>â€¦</li></ul><ul><li>Java</li><li>Python</li><li>â€¦</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="162-æœ‰åºåˆ—è¡¨"><a class="markdownIt-Anchor" href="#162-æœ‰åºåˆ—è¡¨"></a> 1.6.2 æœ‰åºåˆ—è¡¨</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># æ³¨æ„åé¢æœ‰ç©ºæ ¼</span></span><br><span class="line"><span class="bullet">1.</span> </span><br><span class="line"><span class="bullet">2.</span> </span><br><span class="line"><span class="bullet">3.</span> </span><br><span class="line"><span class="bullet">4.</span> </span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li></li><li></li><li></li><li></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="17-å›¾ç‰‡"><a class="markdownIt-Anchor" href="#17-å›¾ç‰‡"></a> 1.7 å›¾ç‰‡</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># æœ¬åœ°å›¾ç‰‡</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/assets/pusheencode.webp&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ç¤ºä¾‹å›¾ç‰‡&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:50%;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="section"># åœ¨çº¿å›¾ç‰‡</span></span><br><span class="line">![<span class="string">code</span>](<span class="link">https://cdn.jsdelivr.net/gh/aliang/markdown_pic/img/code.png</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>æœ¬åœ°å›¾ç‰‡:<br /><img src="/assets/pusheencode.webp" alt="ç¤ºä¾‹å›¾ç‰‡" style="zoom:50%;" /><br />åœ¨çº¿å›¾ç‰‡:<br /><img src="https://cdn.jsdelivr.net/gh/aliang/markdown_pic/img/code.png" alt="code" /></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="18-è¡¨æ ¼"><a class="markdownIt-Anchor" href="#18-è¡¨æ ¼"></a> 1.8 è¡¨æ ¼</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| é¡¹ç›®æ ‡å· | èµ„é‡‘     | å¤‡æ³¨ |</span><br><span class="line">| -------- | -------- | ---- |</span><br><span class="line">| 1        | 100ï¼Œ000 | æ—    |</span><br><span class="line">| 2        | 200ï¼Œ000 | æ—    |</span><br><span class="line">| 3        | 300,600  | é‡è¦ |</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><table><thead><tr><th>é¡¹ç›®æ ‡å·</th><th>èµ„é‡‘</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>1</td><td>100ï¼Œ000</td><td>æ— </td></tr><tr><td>2</td><td>200ï¼Œ000</td><td>æ— </td></tr><tr><td>3</td><td>300,600</td><td>é‡è¦</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="19-å…¬å¼"><a class="markdownIt-Anchor" href="#19-å…¬å¼"></a> 1.9 å…¬å¼</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\Gamma(z)=\int<span class="emphasis">_0^\infty t^&#123;z-1&#125;e^&#123;-t&#125;dt.</span></span><br><span class="line"><span class="emphasis">$$</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Î“</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>âˆ«</mo><mn>0</mn><mi mathvariant="normal">âˆ</mi></msubsup><msup><mi>t</mi><mrow><mi>z</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><msup><mi>e</mi><mrow><mo>âˆ’</mo><mi>t</mi></mrow></msup><mi>d</mi><mi>t</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">\Gamma(z)=\int_0^\infty t^{z-1}e^{-t}dt.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Î“</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.326242em;vertical-align:-0.9119499999999999em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.414292em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span style="top:-3.8129000000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">âˆ</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119499999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.843556em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mathdefault mtight">t</span></span></span></span></span></span></span></span></span><span class="mord mathdefault">d</span><span class="mord mathdefault">t</span><span class="mord">.</span></span></span></span></span></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="2butterflyå¤–æŒ‚æ ‡ç­¾"><a class="markdownIt-Anchor" href="#2butterflyå¤–æŒ‚æ ‡ç­¾"></a> 2.Butterflyå¤–æŒ‚æ ‡ç­¾</h1><div class="note info flat"><p>è¿™éƒ¨åˆ†å‚è€ƒå®‰çŸ¥é±¼:<a href="https://anzhiy.cn/posts/7d58.html">åŸºäºButterflyçš„å¤–æŒ‚æ ‡ç­¾å¼•å…¥</a></p></div><h2 id="21-è¡Œå†…æ–‡æœ¬æ ·å¼-text"><a class="markdownIt-Anchor" href="#21-è¡Œå†…æ–‡æœ¬æ ·å¼-text"></a> 2.1 è¡Œå†…æ–‡æœ¬æ ·å¼ text</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% u æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% emp æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% wavy æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% del æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% kbd æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% psw æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> å¸¦ &#123;% u ä¸‹åˆ’çº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">2.</span> å¸¦ &#123;% emp ç€é‡å· %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">3.</span> å¸¦ &#123;% wavy æ³¢æµªçº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">4.</span> å¸¦ &#123;% del åˆ é™¤çº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">5.</span> é”®ç›˜æ ·å¼çš„æ–‡æœ¬ &#123;% kbd command %&#125; + &#123;% kbd D %&#125;</span><br><span class="line"><span class="bullet">6.</span> å¯†ç æ ·å¼çš„æ–‡æœ¬ï¼š&#123;% psw è¿™é‡Œæ²¡æœ‰éªŒè¯ç  %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><ol><li>å¸¦ <u>ä¸‹åˆ’çº¿</u> çš„æ–‡æœ¬</li><li>å¸¦ <emp>ç€é‡å·</emp> çš„æ–‡æœ¬</li><li>å¸¦ <wavy>æ³¢æµªçº¿</wavy> çš„æ–‡æœ¬</li><li>å¸¦ <del>åˆ é™¤çº¿</del> çš„æ–‡æœ¬</li><li>é”®ç›˜æ ·å¼çš„æ–‡æœ¬ <kbd>command</kbd> + <kbd>D</kbd></li><li>å¯†ç æ ·å¼çš„æ–‡æœ¬ï¼š<psw>è¿™é‡Œæ²¡æœ‰éªŒè¯ç </psw></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="22-è¡Œå†…æ–‡æœ¬-span"><a class="markdownIt-Anchor" href="#22-è¡Œå†…æ–‡æœ¬-span"></a> 2.2 è¡Œå†…æ–‡æœ¬ span</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% span æ ·å¼å‚æ•°(å‚æ•°ä»¥ç©ºæ ¼åˆ’åˆ†), æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>å­—ä½“</code>: logo, code</li><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>å¤§å°</code>: small, h4, h3, h2, h1, large, huge, ultra</li><li><code>å¯¹é½æ–¹å‘</code>: left, center, right</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> å½©è‰²æ–‡å­—</span><br><span class="line">åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š&#123;% span red, çº¢è‰² %&#125;ã€&#123;% span yellow, é»„è‰² %&#125;ã€&#123;% span green, ç»¿è‰² %&#125;ã€&#123;% span cyan, é’è‰² %&#125;ã€&#123;% span blue, è“è‰² %&#125;ã€&#123;% span gray, ç°è‰² %&#125;ã€‚</span><br><span class="line"><span class="bullet">-</span> è¶…å¤§å·æ–‡å­—</span><br><span class="line">æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</span><br><span class="line">&#123;% span center logo large, Volantis %&#125;</span><br><span class="line">&#123;% span center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><ul><li>å½©è‰²æ–‡å­—<br />åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š<span class='p red'>çº¢è‰²</span>ã€<span class='p yellow'>é»„è‰²</span>ã€<span class='p green'>ç»¿è‰²</span>ã€<span class='p cyan'>é’è‰²</span>ã€<span class='p blue'>è“è‰²</span>ã€<span class='p gray'>ç°è‰²</span>ã€‚</li><li>è¶…å¤§å·æ–‡å­—<br />æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚<br /><span class='p center logo large'>Volantis</span><br /><span class='p center small'>A Wonderful Theme for Hexo</span></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="23-æ®µè½æ–‡æœ¬-p"><a class="markdownIt-Anchor" href="#23-æ®µè½æ–‡æœ¬-p"></a> 2.3 æ®µè½æ–‡æœ¬ p</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% p æ ·å¼å‚æ•°(å‚æ•°ä»¥ç©ºæ ¼åˆ’åˆ†), æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>å­—ä½“</code>: logo, code</li><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>å¤§å°</code>: small, h4, h3, h2, h1, large, huge, ultra</li><li><code>å¯¹é½æ–¹å‘</code>: left, center, right</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> å½©è‰²æ–‡å­—</span><br><span class="line">åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š&#123;% p red, çº¢è‰² %&#125;ã€&#123;% p yellow, é»„è‰² %&#125;ã€&#123;% p green, ç»¿è‰² %&#125;ã€&#123;% p cyan, é’è‰² %&#125;ã€&#123;% p blue, è“è‰² %&#125;ã€&#123;% p gray, ç°è‰² %&#125;ã€‚</span><br><span class="line"><span class="bullet">-</span> è¶…å¤§å·æ–‡å­—</span><br><span class="line">æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</span><br><span class="line">&#123;% p center logo large, Volantis %&#125;</span><br><span class="line">&#123;% p center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><ul><li>å½©è‰²æ–‡å­—<br />åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š<p class='p red'>çº¢è‰²</p>ã€<p class='p yellow'>é»„è‰²</p>ã€<p class='p green'>ç»¿è‰²</p>ã€<p class='p cyan'>é’è‰²</p>ã€<p class='p blue'>è“è‰²</p>ã€<p class='p gray'>ç°è‰²</p>ã€‚</li><li>è¶…å¤§å·æ–‡å­—<br />æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</li></ul><p class='p center logo large'>Volantis</p><p class='p center small'>A Wonderful Theme for Hexo</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="24-å¼•ç”¨note"><a class="markdownIt-Anchor" href="#24-å¼•ç”¨note"></a> 2.4 å¼•ç”¨note</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">é€šç”¨é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">è¯­æ³•æ ¼å¼</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -5">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">note:</span><br><span class="line">  # Note tag style values:</span><br><span class="line">  #  - simple    bs-callout old alert style. Default.</span><br><span class="line">  #  - modern    bs-callout new (v2-v3) alert style.</span><br><span class="line">  #  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span><br><span class="line">  #  - disabled  disable all CSS styles import of note tag.</span><br><span class="line">  style: simple</span><br><span class="line">  icons: false</span><br><span class="line">  border<span class="emphasis">_radius: 3</span></span><br><span class="line"><span class="emphasis">  # Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line"><span class="emphasis">  # Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line"><span class="emphasis">  light_</span>bg<span class="emphasis">_offset: 0</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># è‡ªå¸¦icon</span></span><br><span class="line">&#123;% note [class] [no-icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"><span class="section"># å¤–éƒ¨icon</span></span><br><span class="line">&#123;% note [color] [icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.è‡ªå¸¦icon</p><table><thead><tr><th>å‚æ•°</th><th style="text-align:center">ç”¨æ³•</th></tr></thead><tbody><tr><td>class</td><td style="text-align:center">ã€å¯é€‰ã€‘æ ‡è¯†ï¼Œä¸åŒçš„æ ‡è¯†æœ‰ä¸åŒçš„é…è‰² ï¼ˆ default / primary / success / info / warning / danger ï¼‰</td></tr><tr><td>no-icon</td><td style="text-align:center">ã€å¯é€‰ã€‘ä¸æ˜¾ç¤º icon</td></tr><tr><td>style</td><td style="text-align:center">ã€å¯é€‰ã€‘å¯ä»¥è¦†ç›–é…ç½®ä¸­çš„ style ï¼ˆsimple/modern/flat/disabledï¼‰</td></tr></tbody></table><p>2.å¤–éƒ¨icon</p><table><thead><tr><th>å‚æ•°</th><th style="text-align:center">ç”¨æ³•</th></tr></thead><tbody><tr><td>class</td><td style="text-align:center">ã€å¯é€‰ã€‘æ ‡è¯†ï¼Œä¸åŒçš„æ ‡è¯†æœ‰ä¸åŒçš„é…è‰² ï¼ˆ default / blue / pink / red / purple / orange / green ï¼‰</td></tr><tr><td>no-icon</td><td style="text-align:center">ã€å¯é€‰ã€‘å¯é…ç½®è‡ªå®šä¹‰ icon (åªæ”¯æŒ fontawesome å›¾æ ‡, ä¹Ÿå¯ä»¥é…ç½® no-icon )</td></tr><tr><td>style</td><td style="text-align:center">ã€å¯é€‰ã€‘å¯ä»¥è¦†ç›–é…ç½®ä¸­çš„ style ï¼ˆsimple/modern/flat/disabledï¼‰</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><details class="folding-tag" blue><summary> 1.è‡ªå¸¦icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note simple %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note modern %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default modern %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary modern %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success modern %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info modern %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning modern %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger modern %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note flat %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default flat %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note disabled %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default disabled %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary disabled %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success disabled %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info disabled %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning disabled %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger disabled %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default no-icon %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success no-icon %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info no-icon %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning no-icon %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger no-icon %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> 2.å¤–éƒ¨icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue no-icon %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink no-icon %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red no-icon %&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange no-icon %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple no-icon %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green no-icon %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -5"><details class="folding-tag" blue><summary> 1.è‡ªå¸¦icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><div class="note simple"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default simple"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary simple"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success simple"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info simple"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning simple"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger simple"><p>danger æç¤ºå—æ ‡ç­¾</p></div>2.`modern`æ ·å¼<div class="note modern"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default modern"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary modern"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success modern"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info modern"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning modern"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger modern"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>3.<code>flat</code>æ ·å¼</p><div class="note flat"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default flat"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary flat"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success flat"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info flat"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning flat"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger flat"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>4.<code>disabled</code>æ ·å¼</p><div class="note disabled"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default disabled"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary disabled"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success disabled"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info disabled"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning disabled"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger disabled"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>5.<code>no-icon</code>æ ·å¼</p><div class="note no-icon flat"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default no-icon flat"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary no-icon flat"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success no-icon flat"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info no-icon flat"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning no-icon flat"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger no-icon flat"><p>danger æç¤ºå—æ ‡ç­¾</p></div>              </div>            </details><details class="folding-tag" blue><summary> 2.å¤–éƒ¨icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><div class="note icon-padding simple"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding simple"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding simple"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding simple"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding simple"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>2.<code>modern</code>æ ·å¼</p><div class="note icon-padding modern"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding modern"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding modern"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>3.<code>flat</code>æ ·å¼</p><div class="note icon-padding flat"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>4.<code>disabled</code>æ ·å¼</p><div class="note icon-padding disabled"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding disabled"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding disabled"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding disabled"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding disabled"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding disabled"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>5.<code>no-icon</code>æ ·å¼</p><div class="note no-icon flat"><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue no-icon flat"><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink no-icon flat"><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red no-icon flat"><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange no-icon flat"><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple no-icon flat"><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green no-icon flat"><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="25-ä¸Šæ ‡æ ‡ç­¾-tip"><a class="markdownIt-Anchor" href="#25-ä¸Šæ ‡æ ‡ç­¾-tip"></a> 2.5 ä¸Šæ ‡æ ‡ç­¾ tip</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [å‚æ•°ï¼Œå¯é€‰] %&#125;æ–‡æœ¬å†…å®¹&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>æ ·å¼</code>: success,error,warning,bolt,ban,home,sync,cogs,key,bell</li><li><code>è‡ªå®šä¹‰å›¾æ ‡</code>: æ”¯æŒfontawesomeã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip %&#125;default&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip info %&#125;info&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip success %&#125;success&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip error %&#125;error&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip warning %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bolt %&#125;bolt&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban %&#125;ban&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip home %&#125;home&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip sync %&#125;sync&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip cogs %&#125;cogs&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip key %&#125;key&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bell %&#125;bell&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip fa-atom %&#125;è‡ªå®šä¹‰font awesomeå›¾æ ‡&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="tip "><p>default</p></div><div class="tip info"><p>info</p></div><div class="tip success"><p>success</p></div><div class="tip error"><p>error</p></div><div class="tip warning"><p>warning</p></div><div class="tip bolt"><p>bolt</p></div><div class="tip ban"><p>ban</p></div><div class="tip home"><p>home</p></div><div class="tip sync"><p>sync</p></div><div class="tip cogs"><p>cogs</p></div><div class="tip key"><p>key</p></div><div class="tip bell"><p>bell</p></div><div class="tip fa-atom"><p>è‡ªå®šä¹‰font awesomeå›¾æ ‡</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="26-åŠ¨æ€æ ‡ç­¾-anima"><a class="markdownIt-Anchor" href="#26-åŠ¨æ€æ ‡ç­¾-anima"></a> 2.6 åŠ¨æ€æ ‡ç­¾ anima</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [å‚æ•°ï¼Œå¯é€‰] %&#125;æ–‡æœ¬å†…å®¹&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><div class="note info flat"><ol><li>å°†æ‰€éœ€çš„CSSç±»æ·»åŠ åˆ°å›¾æ ‡ï¼ˆæˆ–DOMä¸­çš„ä»»ä½•å…ƒç´ ï¼‰ã€‚</li><li>å¯¹äºçˆ¶çº§æ‚¬åœæ ·å¼ï¼Œéœ€è¦ç»™ç›®æ ‡å…ƒç´ æ·»åŠ æŒ‡å®šCSSç±»ï¼ŒåŒæ—¶è¿˜è¦ç»™ç›®æ ‡å…ƒç´ çš„çˆ¶çº§å…ƒç´ æ·»åŠ CSSç±»<code>faa-parent animated-hover</code>ã€‚ï¼ˆè¯¦æƒ…è§ç¤ºä¾‹åŠç¤ºä¾‹æºç ï¼‰<br />You can regulate the speed of the animation by adding the CSS class or . faa-fastfaa-slow</li><li>å¯ä»¥é€šè¿‡ç»™ç›®æ ‡å…ƒç´ æ·»åŠ CSSç±»<code>faa-fast</code>æˆ–<code>faa-slow</code>æ¥æ§åˆ¶åŠ¨ç”»å¿«æ…¢ã€‚</li></ol></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.On DOM loadï¼ˆå½“é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>2.è°ƒæ•´åŠ¨ç”»é€Ÿåº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated faa-fast %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated faa-slow %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>3.On hoverï¼ˆå½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated-hover %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated-hover %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>4.On parent hoverï¼ˆå½“é¼ æ ‡æ‚¬åœåœ¨çˆ¶çº§å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-horizontal&quot;</span>&gt;</span></span>warning<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-flash&quot;</span>&gt;</span></span>ban<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.On DOM loadï¼ˆå½“é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><div class="tip warning faa-horizontal animated"><p>warning</p></div><div class="tip ban faa-flash animated"><p>ban</p></div>2.è°ƒæ•´åŠ¨ç”»é€Ÿåº¦<div class="tip warning faa-horizontal animated faa-fast"><p>warning</p></div><div class="tip ban faa-flash animated faa-slow"><p>ban</p></div>3.On hoverï¼ˆå½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰<div class="tip warning faa-horizontal animated-hover"><p>warning</p></div><div class="tip ban faa-flash animated-hover"><p>ban</p></div>4.On parent hoverï¼ˆå½“é¼ æ ‡æ‚¬åœåœ¨çˆ¶çº§å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰<div class="tip warning faa-parent animated-hover"><p class="faa-horizontal">warning</p></div><div class="tip ban faa-parent animated-hover"><p class="faa-flash">ban</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="27-å¤é€‰åˆ—è¡¨-checkbox"><a class="markdownIt-Anchor" href="#27-å¤é€‰åˆ—è¡¨-checkbox"></a> 2.7 å¤é€‰åˆ—è¡¨ checkbox</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox æ ·å¼å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ–‡æœ¬ï¼ˆæ”¯æŒç®€å•mdï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>æ ·å¼</code>: plus, minus, times</li><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>é€‰ä¸­çŠ¶æ€</code>: checked</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox çº¯æ–‡æœ¬æµ‹è¯• %&#125;</span><br><span class="line">&#123;% checkbox checked, æ”¯æŒç®€å•çš„ [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) è¯­æ³• %&#125;</span><br><span class="line">&#123;% checkbox red, æ”¯æŒè‡ªå®šä¹‰é¢œè‰² %&#125;</span><br><span class="line">&#123;% checkbox green checked, ç»¿è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox yellow checked, é»„è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox cyan checked, é’è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox blue checked, è“è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox plus green checked, å¢åŠ  %&#125;</span><br><span class="line">&#123;% checkbox minus yellow checked, å‡å°‘ %&#125;</span><br><span class="line">&#123;% checkbox times red checked, å‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class='checkbox'><input type="checkbox" />            <p>çº¯æ–‡æœ¬æµ‹è¯•</p>            </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>æ”¯æŒç®€å•çš„ <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> è¯­æ³•</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>æ”¯æŒè‡ªå®šä¹‰é¢œè‰²</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>ç»¿è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox yellow checked'><input type="checkbox" checked="checked"/>            <p>é»„è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox cyan checked'><input type="checkbox" checked="checked"/>            <p>é’è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>è“è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox plus green checked'><input type="checkbox" checked="checked"/>            <p>å¢åŠ </p>            </div><div class='checkbox minus yellow checked'><input type="checkbox" checked="checked"/>            <p>å‡å°‘</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>å‰</p>            </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="28-å•é€‰åˆ—è¡¨-radio"><a class="markdownIt-Anchor" href="#28-å•é€‰åˆ—è¡¨-radio"></a> 2.8 å•é€‰åˆ—è¡¨ radio</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio æ ·å¼å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ–‡æœ¬ï¼ˆæ”¯æŒç®€å•mdï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>é€‰ä¸­çŠ¶æ€</code>: checked</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio çº¯æ–‡æœ¬æµ‹è¯• %&#125;</span><br><span class="line">&#123;% radio checked, æ”¯æŒç®€å•çš„ [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) è¯­æ³• %&#125;</span><br><span class="line">&#123;% radio red, æ”¯æŒè‡ªå®šä¹‰é¢œè‰² %&#125;</span><br><span class="line">&#123;% radio green, ç»¿è‰² %&#125;</span><br><span class="line">&#123;% radio yellow, é»„è‰² %&#125;</span><br><span class="line">&#123;% radio cyan, é’è‰² %&#125;</span><br><span class="line">&#123;% radio blue, è“è‰² %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class='checkbox'><input type="radio" />            <p>çº¯æ–‡æœ¬æµ‹è¯•</p>            </div><div class='checkbox checked'><input type="radio" checked="checked"/>            <p>æ”¯æŒç®€å•çš„ <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> è¯­æ³•</p>            </div><div class='checkbox red'><input type="radio" />            <p>æ”¯æŒè‡ªå®šä¹‰é¢œè‰²</p>            </div><div class='checkbox green'><input type="radio" />            <p>ç»¿è‰²</p>            </div><div class='checkbox yellow'><input type="radio" />            <p>é»„è‰²</p>            </div><div class='checkbox cyan'><input type="radio" />            <p>é’è‰²</p>            </div><div class='checkbox blue'><input type="radio" />            <p>è“è‰²</p>            </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="29-æ—¶é—´è½´-timeline"><a class="markdownIt-Anchor" href="#29-æ—¶é—´è½´-timeline"></a> 2.9 æ—¶é—´è½´ timeline</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline æ—¶é—´çº¿æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰[,color] %&#125;</span><br><span class="line">&lt;!-- timeline æ—¶é—´èŠ‚ç‚¹ï¼ˆæ ‡é¢˜ï¼‰ --&gt;</span><br><span class="line">æ­£æ–‡å†…å®¹</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline æ—¶é—´èŠ‚ç‚¹ï¼ˆæ ‡é¢˜ï¼‰ --&gt;</span><br><span class="line">æ­£æ–‡å†…å®¹</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>title</code>:æ ‡é¢˜/æ—¶é—´çº¿</li><li><code>color</code>:<code>timeline</code>é¢œè‰²:default(ç•™ç©º) / blue / pink / red / purple / orange / green</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline æ—¶é—´è½´æ ·å¼,blue %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-07-24 [<span class="string">2.6.6 -&gt; 3.0</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> å¦‚æœæœ‰ <span class="code">`hexo-lazyload-image`</span> æ’ä»¶ï¼Œéœ€è¦åˆ é™¤å¹¶é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œè®¾ç½® <span class="code">`lazyload.isSPA: true`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> 2.x ç‰ˆæœ¬çš„ css å’Œ js ä¸é€‚ç”¨äº 3.x ç‰ˆæœ¬ï¼Œå¦‚æœä½¿ç”¨äº† <span class="code">`use_cdn: true`</span> åˆ™éœ€è¦åˆ é™¤ã€‚</span><br><span class="line"><span class="bullet">3.</span> 2.x ç‰ˆæœ¬çš„ fancybox æ ‡ç­¾åœ¨ 3.x ç‰ˆæœ¬ä¸­è¢«é‡å‘½åä¸º gallery ã€‚</span><br><span class="line"><span class="bullet">4.</span> 2.x ç‰ˆæœ¬çš„ç½®é¡¶ <span class="code">`top: true`</span> æ”¹ä¸ºäº† <span class="code">`pin: true`</span>ï¼Œå¹¶ä¸”åŒæ ·é€‚ç”¨äº <span class="code">`layout: page`</span> çš„é¡µé¢ã€‚</span><br><span class="line"><span class="bullet">5.</span> å¦‚æœä½¿ç”¨äº† <span class="code">`hexo-offline`</span> æ’ä»¶ï¼Œå»ºè®®å¸è½½ï¼Œ3.0 ç‰ˆæœ¬é»˜è®¤å¼€å¯äº† pjax æœåŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-05-15 [<span class="string">2.6.3 -&gt; 2.6.6</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6</span>) --&gt;</span><br><span class="line"></span><br><span class="line">ä¸éœ€è¦é¢å¤–å¤„ç†ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-04-20 [<span class="string">2.6.2 -&gt; 2.6.3</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> å…¨å±€æœç´¢ <span class="code">`seotitle`</span> å¹¶æ›¿æ¢ä¸º <span class="code">`seo_title`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> group ç»„ä»¶çš„ç´¢å¼•è§„åˆ™æœ‰å˜ï¼Œä½¿ç”¨ group ç»„ä»¶çš„æ–‡ç« å†…ï¼Œ<span class="code">`group: group_name`</span> å¯¹åº”çš„ç»„ä»¶åå¿…é¡»æ˜¯ <span class="code">`group_name`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> group ç»„ä»¶çš„åˆ—è¡¨åä¼˜å…ˆæ˜¾ç¤ºæ–‡ç« çš„ <span class="code">`short_title`</span> å…¶æ¬¡æ˜¯ <span class="code">`title`</span>ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>æ—¶é—´è½´æ ·å¼</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-07-24 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases">2.6.6 -&gt; 3.0</a></p></div></div><div class='timeline-item-content'><ol><li>å¦‚æœæœ‰ <code>hexo-lazyload-image</code> æ’ä»¶ï¼Œéœ€è¦åˆ é™¤å¹¶é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œè®¾ç½® <code>lazyload.isSPA: true</code>ã€‚</li><li>2.x ç‰ˆæœ¬çš„ css å’Œ js ä¸é€‚ç”¨äº 3.x ç‰ˆæœ¬ï¼Œå¦‚æœä½¿ç”¨äº† <code>use_cdn: true</code> åˆ™éœ€è¦åˆ é™¤ã€‚</li><li>2.x ç‰ˆæœ¬çš„ fancybox æ ‡ç­¾åœ¨ 3.x ç‰ˆæœ¬ä¸­è¢«é‡å‘½åä¸º gallery ã€‚</li><li>2.x ç‰ˆæœ¬çš„ç½®é¡¶ <code>top: true</code> æ”¹ä¸ºäº† <code>pin: true</code>ï¼Œå¹¶ä¸”åŒæ ·é€‚ç”¨äº <code>layout: page</code> çš„é¡µé¢ã€‚</li><li>å¦‚æœä½¿ç”¨äº† <code>hexo-offline</code> æ’ä»¶ï¼Œå»ºè®®å¸è½½ï¼Œ3.0 ç‰ˆæœ¬é»˜è®¤å¼€å¯äº† pjax æœåŠ¡ã€‚</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-05-15 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6">2.6.3 -&gt; 2.6.6</a></p></div></div><div class='timeline-item-content'><p>ä¸éœ€è¦é¢å¤–å¤„ç†ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-04-20 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3">2.6.2 -&gt; 2.6.3</a></p></div></div><div class='timeline-item-content'><ol><li>å…¨å±€æœç´¢ <code>seotitle</code> å¹¶æ›¿æ¢ä¸º <code>seo_title</code>ã€‚</li><li>group ç»„ä»¶çš„ç´¢å¼•è§„åˆ™æœ‰å˜ï¼Œä½¿ç”¨ group ç»„ä»¶çš„æ–‡ç« å†…ï¼Œ<code>group: group_name</code> å¯¹åº”çš„ç»„ä»¶åå¿…é¡»æ˜¯ <code>group_name</code>ã€‚</li><li>group ç»„ä»¶çš„åˆ—è¡¨åä¼˜å…ˆæ˜¾ç¤ºæ–‡ç« çš„ <code>short_title</code> å…¶æ¬¡æ˜¯ <code>title</code>ã€‚</li></ol></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="210-é“¾æ¥å¡ç‰‡-link"><a class="markdownIt-Anchor" href="#210-é“¾æ¥å¡ç‰‡-link"></a> 2.10 é“¾æ¥å¡ç‰‡ link</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡é“¾æ¥ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link ç³–æœå±‹æ•™ç¨‹è´´, https://akilar.top/posts/615e2dec/, https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class="tag link"><a class="link-card" title="ç³–æœå±‹æ•™ç¨‹è´´" href="https://akilar.top/posts/615e2dec/"><div class="left"><img src="https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico"/></div><div class="right"><p class="text">ç³–æœå±‹æ•™ç¨‹è´´</p><p class="url">https://akilar.top/posts/615e2dec/</p></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="211-æŒ‰é’®-btns"><a class="markdownIt-Anchor" href="#211-æŒ‰é’®-btns"></a> 2.11 æŒ‰é’® btns</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns æ ·å¼å‚æ•° %&#125;</span><br><span class="line">&#123;% cell æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡æˆ–è€…å›¾æ ‡ %&#125;</span><br><span class="line">&#123;% cell æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡æˆ–è€…å›¾æ ‡ %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li>åœ†è§’æ ·å¼ï¼šrounded, circle</li><li>å¢åŠ æ–‡å­—æ ·å¼ï¼šå¯ä»¥åœ¨å®¹å™¨å†…å¢åŠ  <code>&lt;b&gt;</code>æ ‡é¢˜<code>&lt;/b&gt;</code>å’Œ<code>&lt;p&gt;</code>æè¿°æ–‡å­—<code>&lt;/p&gt;</code></li><li>å¸ƒå±€æ–¹å¼ï¼š<br />é»˜è®¤ä¸ºè‡ªåŠ¨å®½åº¦ï¼Œé€‚åˆè§†é‡å†…åªæœ‰ä¸€ä¸¤ä¸ªçš„æƒ…å†µã€‚</li></ol><table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>wide</td><td>å®½ä¸€ç‚¹çš„æŒ‰é’®</td></tr><tr><td>fill</td><td>å¡«å……å¸ƒå±€ï¼Œè‡ªåŠ¨é“ºæ»¡è‡³å°‘ä¸€è¡Œï¼Œå¤šäº†ä¼šæ¢è¡Œ</td></tr><tr><td>center</td><td>å±…ä¸­ï¼ŒæŒ‰é’®ä¹‹é—´æ˜¯å›ºå®šé—´è·</td></tr><tr><td>around</td><td>å±…ä¸­åˆ†æ•£</td></tr><tr><td>grid2</td><td>ç­‰å®½æœ€å¤š2åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td>grid3</td><td>ç­‰å®½æœ€å¤š3åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td>grid4</td><td>ç­‰å®½æœ€å¤š4åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td>grid5</td><td>ç­‰å®½æœ€å¤š5åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.å¦‚æœéœ€è¦æ˜¾ç¤ºç±»ä¼¼ã€Œå›¢é˜Ÿæˆå‘˜ã€ä¹‹ç±»çš„ä¸€ç»„å«æœ‰å¤´åƒçš„é“¾æ¥</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns circle grid5 %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><p>2.æˆ–è€…å«æœ‰å›¾æ ‡çš„æŒ‰é’®</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns rounded grid5 %&#125;</span><br><span class="line">&#123;% cell ä¸‹è½½æºç , /, fas fa-download %&#125;</span><br><span class="line">&#123;% cell æŸ¥çœ‹æ–‡æ¡£, /, fas fa-book-open %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><p>3.åœ†å½¢å›¾æ ‡ + æ ‡é¢˜ + æè¿° + å›¾ç‰‡ + ç½‘æ ¼5åˆ— + å±…ä¸­</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns circle center grid5 %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>å¿ƒç‡ç®¡å®¶<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p red, ä¸“ä¸šç‰ˆ %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/aliang/cdn-assets/qrcode/heartmate_pro.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>å¿ƒç‡ç®¡å®¶<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p green, å…è´¹ç‰ˆ %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/aliang/cdn-assets/qrcode/heartmate_lite.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.å¦‚æœéœ€è¦æ˜¾ç¤ºç±»ä¼¼ã€Œå›¢é˜Ÿæˆå‘˜ã€ä¹‹ç±»çš„ä¸€ç»„å«æœ‰å¤´åƒçš„é“¾æ¥</p><div class="btns circle grid5">            <a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a>          </div>2.æˆ–è€…å«æœ‰å›¾æ ‡çš„æŒ‰é’®<div class="btns rounded grid5">            <a class="button" href='/' title='ä¸‹è½½æºç '><i class='fas fa-download'></i>ä¸‹è½½æºç </a><a class="button" href='/' title='æŸ¥çœ‹æ–‡æ¡£'><i class='fas fa-book-open'></i>æŸ¥çœ‹æ–‡æ¡£</a>          </div>3.åœ†å½¢å›¾æ ‡ + æ ‡é¢˜ + æè¿° + å›¾ç‰‡ + ç½‘æ ¼5åˆ— + å±…ä¸­<div class="btns circle center grid5">            <a href='https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1'>  <i class='fab fa-apple'></i>  <b>å¿ƒç‡ç®¡å®¶</b>  <p class='p red'>ä¸“ä¸šç‰ˆ</p>  <img src='https://cdn.jsdelivr.net/gh/aliang/cdn-assets/qrcode/heartmate_pro.png'></a><a href='https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1'>  <i class='fab fa-apple'></i>  <b>å¿ƒç‡ç®¡å®¶</b>  <p class='p green'>å…è´¹ç‰ˆ</p>  <img src='https://cdn.jsdelivr.net/gh/aliang/cdn-assets/qrcode/heartmate_lite.png'></a>          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="212-githubå¡ç‰‡-ghcard"><a class="markdownIt-Anchor" href="#212-githubå¡ç‰‡-ghcard"></a> 2.12 githubå¡ç‰‡ ghcard</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% ghcard ç”¨æˆ·å, å…¶å®ƒå‚æ•°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line">&#123;% ghcard ç”¨æˆ·å/ä»“åº“, å…¶å®ƒå‚æ•°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>ä½¿ç”¨<code>,</code>åˆ†å‰²å„ä¸ªå‚æ•°ã€‚å†™æ³•ä¸ºï¼š<code>å‚æ•°å=å‚æ•°å€¼</code><br />ä»¥ä¸‹åªå†™å‡ ä¸ªå¸¸ç”¨å‚æ•°å€¼ã€‚</p><table><thead><tr><th><strong>å‚æ•°å</strong></th><th>å–å€¼</th><th>é‡Šä¹‰</th></tr></thead><tbody><tr><td>hide</td><td>stars,commits,prs,issues,contribs</td><td>éšè—æŒ‡å®šç»Ÿè®¡</td></tr><tr><td>count_private</td><td>true</td><td>å°†ç§äººé¡¹ç›®è´¡çŒ®æ·»åŠ åˆ°æ€»æäº¤è®¡æ•°ä¸­</td></tr><tr><td>show_icons</td><td>true</td><td>æ˜¾ç¤ºå›¾æ ‡</td></tr><tr><td>theme</td><td>æŸ¥é˜…:<a href="https://github.com/anuraghazra/github-readme-stats/blob/master/themes/README.md">Available Themes</a></td><td>ä¸»é¢˜</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.ç”¨æˆ·ä¿¡æ¯å¡ç‰‡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| &#123;% ghcard aliang %&#125; | &#123;% ghcard aliang, theme=vue %&#125; |</span><br><span class="line">| -- | -- |</span><br><span class="line">| &#123;% ghcard aliang, theme=buefy %&#125; | &#123;% ghcard aliang, theme=solarized-light %&#125; |</span><br><span class="line">| &#123;% ghcard aliang, theme=onedark %&#125; | &#123;% ghcard aliang, theme=solarized-dark %&#125; |</span><br><span class="line">| &#123;% ghcard aliang, theme=algolia %&#125; | &#123;% ghcard aliang, theme=calm %&#125; |</span><br></pre></td></tr></table></figure><p>2.ä»“åº“ä¿¡æ¯å¡ç‰‡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=vue %&#125; |</span><br><span class="line">| -- | -- |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=buefy %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=solarized-light %&#125; |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=onedark %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=solarized-dark %&#125; |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=algolia %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=calm %&#125; |</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.ç”¨æˆ·ä¿¡æ¯å¡ç‰‡</p><table><thead><tr><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/aliang"><img src="https://github-readme-stats.vercel.app/api/?username=aliang&show_owner=true"/></a></th><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/aliang"><img src="https://github-readme-stats.vercel.app/api/?username=aliang&theme=vue&show_owner=true"/></a></th></tr></thead><tbody><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/aliang"><img src="https://github-readme-stats.vercel.app/api/?username=aliang&theme=buefy&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/aliang"><img src="https://github-readme-stats.vercel.app/api/?username=aliang&theme=solarized-light&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/aliang"><img src="https://github-readme-stats.vercel.app/api/?username=aliang&theme=onedark&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/aliang"><img src="https://github-readme-stats.vercel.app/api/?username=aliang&theme=solarized-dark&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/aliang"><img src="https://github-readme-stats.vercel.app/api/?username=aliang&theme=algolia&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/aliang"><img src="https://github-readme-stats.vercel.app/api/?username=aliang&theme=calm&show_owner=true"/></a></td></tr></tbody></table><p>2.ä»“åº“ä¿¡æ¯å¡ç‰‡</p><table><thead><tr><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&show_owner=true"/></a></th><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=vue&show_owner=true"/></a></th></tr></thead><tbody><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=buefy&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=solarized-light&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=onedark&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=solarized-dark&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=algolia&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=calm&show_owner=true"/></a></td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="213-githubå¾½æ ‡-ghbdage"><a class="markdownIt-Anchor" href="#213-githubå¾½æ ‡-ghbdage"></a> 2.13 githubå¾½æ ‡ ghbdage</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage [right],[left],[logo]||[color],[link],[title]||[option] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>left</code>ï¼šå¾½æ ‡å·¦è¾¹çš„ä¿¡æ¯ï¼Œå¿…é€‰å‚æ•°ã€‚</li><li><code>right</code>: å¾½æ ‡å³è¾¹çš„ä¿¡æ¯ï¼Œå¿…é€‰å‚æ•°ï¼Œ</li><li><code>logo</code>ï¼šå¾½æ ‡å›¾æ ‡ï¼Œå›¾æ ‡åç§°è¯¦è§<a href="https://simpleicons.org/">simpleicons</a>ï¼Œå¯é€‰å‚æ•°ã€‚</li><li><code>color</code>ï¼šå¾½æ ‡å³è¾¹çš„é¢œè‰²ï¼Œå¯é€‰å‚æ•°ã€‚</li><li><code>link</code>ï¼šæŒ‡å‘çš„é“¾æ¥ï¼Œå¯é€‰å‚æ•°ã€‚</li><li><code>title</code>ï¼šå¾½æ ‡çš„é¢å¤–ä¿¡æ¯ï¼Œå¯é€‰å‚æ•°ã€‚ä¸»è¦ç”¨äºä¼˜åŒ–SEOï¼Œä½†<code>object</code>æ ‡ç­¾ä¸ä¼šåƒ<code>a</code>æ ‡ç­¾ä¸€æ ·åœ¨é¼ æ ‡æ‚¬åœæ˜¾ç¤º<code>title</code>ä¿¡æ¯ã€‚</li><li><code>option</code>ï¼šè‡ªå®šä¹‰å‚æ•°ï¼Œæ”¯æŒ<a href="https://shields.io/">shields.io</a>çš„å…¨éƒ¨APIå‚æ•°æ”¯æŒï¼Œå…·ä½“å‚æ•°å¯ä»¥å‚çœ‹ä¸Šæ–‡ä¸­çš„æ‹“å±•å†™æ³•ç¤ºä¾‹ã€‚å½¢å¼ä¸º<code>name1=value2&amp;name2=value2</code>ã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.åŸºæœ¬å‚æ•°,å®šä¹‰å¾½æ ‡å·¦å³æ–‡å­—å’Œå›¾æ ‡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage Theme,Butterfly %&#125;</span><br><span class="line">&#123;% bdage Frame,Hexo,hexo %&#125;</span><br></pre></td></tr></table></figure><p>2.ä¿¡æ¯å‚æ•°ï¼Œå®šä¹‰å¾½æ ‡å³ä¾§å†…å®¹èƒŒæ™¯è‰²ï¼ŒæŒ‡å‘é“¾æ¥</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage CDN,JsDelivr,jsDelivr||abcdef,https://metroui.org.ua/index.html,æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ %&#125;</span><br><span class="line">//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ï¼Œä»ç„¶éœ€è¦å†™ä¸ªé€—å·,ç”¨ä½œåˆ†å‰²</span><br><span class="line">&#123;% bdage Source,GitHub,GitHub||,https://github.com/ %&#125;</span><br></pre></td></tr></table></figure><p>3.æ‹“å±•å‚æ•°ï¼Œæ”¯æŒshieldsçš„APIçš„å…¨éƒ¨å‚æ•°å†…å®¹</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage Hosted,Vercel,Vercel||brightgreen,https://vercel.com/,æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œé»˜è®¤çº¿è·¯æ‰˜ç®¡äºVercel||style=social&amp;logoWidth=20 %&#125;</span><br><span class="line">//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ç»„ï¼Œä»ç„¶éœ€è¦å†™åŒç«–çº¿||ç”¨ä½œåˆ†å‰²</span><br><span class="line">&#123;% bdage Hosted,Vercel,Vercel||||style=social&amp;logoWidth=20&amp;logoColor=violet %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.åŸºæœ¬å‚æ•°,å®šä¹‰å¾½æ ‡å·¦å³æ–‡å­—å’Œå›¾æ ‡</p><p><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Butterfly-Theme-orange?logo=&color=orange&link=&"></object><br /><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Hexo-Frame-orange?logo=hexo&color=orange&link=&"></object></p><p>2.ä¿¡æ¯å‚æ•°ï¼Œå®šä¹‰å¾½æ ‡å³ä¾§å†…å®¹èƒŒæ™¯è‰²ï¼ŒæŒ‡å‘é“¾æ¥</p><p><object class="ghbdage" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ" standby="loading..." data="https://img.shields.io/badge/JsDelivr-CDN-orange?logo=jsDelivr&color=abcdef&link=https://metroui.org.ua/index.html&"></object><br />//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ï¼Œä»ç„¶éœ€è¦å†™ä¸ªé€—å·,ç”¨ä½œåˆ†å‰²<br /><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/GitHub-Source-orange?logo=GitHub&color=orange&link=https://github.com/&"></object></p><p>3.æ‹“å±•å‚æ•°ï¼Œæ”¯æŒshieldsçš„APIçš„å…¨éƒ¨å‚æ•°å†…å®¹</p><p><object class="ghbdage" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œé»˜è®¤çº¿è·¯æ‰˜ç®¡äºVercel" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=brightgreen&link=https://vercel.com/&style=social&logoWidth=20"></object><br />//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ç»„ï¼Œä»ç„¶éœ€è¦å†™åŒç«–çº¿||ç”¨ä½œåˆ†å‰²<br /><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=orange&link=&style=social&logoWidth=20&logoColor=violet"></object></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="214-ç½‘ç«™å¡ç‰‡-sites"><a class="markdownIt-Anchor" href="#214-ç½‘ç«™å¡ç‰‡-sites"></a> 2.14 ç½‘ç«™å¡ç‰‡ sites</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site æ ‡é¢˜, url=é“¾æ¥, screenshot=æˆªå›¾é“¾æ¥, avatar=å¤´åƒé“¾æ¥ï¼ˆå¯é€‰ï¼‰, description=æè¿°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line">&#123;% site æ ‡é¢˜, url=é“¾æ¥, screenshot=æˆªå›¾é“¾æ¥, avatar=å¤´åƒé“¾æ¥ï¼ˆå¯é€‰ï¼‰, description=æè¿°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site xaoxuu, url=https://xaoxuu.com, screenshot=https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg, avatar=https://cdn.jsdelivr.net/gh/aliang/cdn-assets/avatar/avatar.png, description=ç®€çº¦é£æ ¼ %&#125;</span><br><span class="line">&#123;% site inkss, url=https://inkss.cn, screenshot=https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg, avatar=https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site MHuiG, url=https://blog.mhuig.top, screenshot=https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png, avatar=https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site Colsrch, url=https://colsrch.top, screenshot=https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png, avatar=https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site Linhk1606, url=https://linhk1606.github.io, screenshot=https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png, avatar=https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class="site-card-group"><a class="site-card" href="https://aliang.com"><div class="img"><img src="https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/aliang/cdn-assets/avatar/avatar.png"/><span class="title">aliang</span><span class="desc">ç®€çº¦é£æ ¼</span></div></a><a class="site-card" href="https://inkss.cn"><div class="img"><img src="https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg"/><span class="title">inkss</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://blog.mhuig.top"><div class="img"><img src="https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png"/><span class="title">MHuiG</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://colsrch.top"><div class="img"><img src="https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg"/><span class="title">Colsrch</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://linhk1606.github.io"><div class="img"><img src="https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png"/></div><div class="info"><img src="https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png"/><span class="title">Linhk1606</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="215-è¡Œå†…å›¾ç‰‡-inlineimage"><a class="markdownIt-Anchor" href="#215-è¡Œå†…å›¾ç‰‡-inlineimage"></a> 2.15 è¡Œå†…å›¾ç‰‡ inlineimage</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% inlineimage å›¾ç‰‡é“¾æ¥, height=é«˜åº¦ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>é«˜åº¦</code>ï¼šheight=20px</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯ &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif %&#125; ä¸€æ®µè¯ã€‚</span><br><span class="line"></span><br><span class="line">è¿™åˆæ˜¯ &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif, height=40px %&#125; ä¸€æ®µè¯ã€‚</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>è¿™æ˜¯ <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif" style="height:1.5em"/> ä¸€æ®µè¯ã€‚</p><p>è¿™åˆæ˜¯ <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif" style="height:40px;"/> ä¸€æ®µè¯ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="216-å•å¼ å›¾ç‰‡-image"><a class="markdownIt-Anchor" href="#216-å•å¼ å›¾ç‰‡-image"></a> 2.16 å•å¼ å›¾ç‰‡ image</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image é“¾æ¥, width=å®½åº¦ï¼ˆå¯é€‰ï¼‰, height=é«˜åº¦ï¼ˆå¯é€‰ï¼‰, alt=æè¿°ï¼ˆå¯é€‰ï¼‰, bg=å ä½é¢œè‰²ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li>å›¾ç‰‡å®½åº¦é«˜åº¦ï¼šwidth=300px, height=32px</li><li>å›¾ç‰‡æè¿°ï¼šalt=å›¾ç‰‡æè¿°ï¼ˆbutterflyéœ€è¦åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å¼€å¯å›¾ç‰‡æè¿°ï¼‰</li><li>å ä½èƒŒæ™¯è‰²ï¼šbg=#f2f2f2</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.æ·»åŠ æè¿°ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, alt=æ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚ %&#125;</span><br></pre></td></tr></table></figure><p>2.æŒ‡å®šå®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px %&#125;</span><br></pre></td></tr></table></figure><p>3.æŒ‡å®šå®½åº¦å¹¶æ·»åŠ æè¿°ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px, alt=æ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚ %&#125;</span><br></pre></td></tr></table></figure><p>4.è®¾ç½®å ä½èƒŒæ™¯è‰²ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px, bg=#1D0C04, alt=ä¼˜åŒ–ä¸åŒå®½åº¦æµè§ˆçš„è§‚æ„Ÿ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.æ·»åŠ æè¿°ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="æ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚"/></div><span class="image-caption">æ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚</span></div>2..æŒ‡å®šå®½åº¦<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" style="width:400px;"/></div></div>3.æŒ‡å®šå®½åº¦å¹¶æ·»åŠ æè¿°ï¼š<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="æ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚" style="width:400px;"/></div><span class="image-caption">æ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚</span></div>4.è®¾ç½®å ä½èƒŒæ™¯è‰²ï¼š<div class="img-wrap"><div class="img-bg" style="background:#1D0C04"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="ä¼˜åŒ–ä¸åŒå®½åº¦æµè§ˆçš„è§‚æ„Ÿ" style="width:400px;"/></div><span class="image-caption">ä¼˜åŒ–ä¸åŒå®½åº¦æµè§ˆçš„è§‚æ„Ÿ</span></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="217-éŸ³é¢‘-audio"><a class="markdownIt-Anchor" href="#217-éŸ³é¢‘-audio"></a> 2.17 éŸ³é¢‘ audio</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% audio éŸ³é¢‘é“¾æ¥ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% audio https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class="audio"><audio controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3' type='audio/mp3'>Your browser does not support the audio tag.</audio></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="218-è§†é¢‘-video"><a class="markdownIt-Anchor" href="#218-è§†é¢‘-video"></a> 2.18 è§†é¢‘ video</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video è§†é¢‘é“¾æ¥ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>å¯¹é½æ–¹å‘</code>ï¼šleft, center, right</li><li><code>åˆ—æ•°</code>ï¼šé€—å·åé¢ç›´æ¥å†™åˆ—æ•°ï¼Œæ”¯æŒ 1 ï½ 4 åˆ—ã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.100%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341 %&#125;</span></span><br></pre></td></tr></table></figure><p>2.50%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 2 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341 %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341 %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341 %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><p>3.25%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 4 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341 %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341 %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341 %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341 %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341 %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.100%å®½åº¦</p><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341' type='video/mp4'>Your browser does not support the video tag.</video></div>2.50%å®½åº¦<div class="videos" col='2'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341' type='video/mp4'>Your browser does not support the video tag.</video></div></div>3.25%å®½åº¦<div class="videos" col='4'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341' type='video/mp4'>Your browser does not support the video tag.</video></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="219-ç›¸å†Œ-gallery"><a class="markdownIt-Anchor" href="#219-ç›¸å†Œ-gallery"></a> 2.19 ç›¸å†Œ gallery</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>2.gallery ç›¸å†Œ</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">markdown åœ–ç‰‡æ ¼å¼</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ul><li>gallerygroup ç›¸å†Œå›¾åº“</li></ul><table><thead><tr><th>å‚æ•°å</th><th>é‡Šä¹‰</th></tr></thead><tbody><tr><td>name</td><td>å›¾åº“åå­—</td></tr><tr><td>description</td><td>å›¾åº“æè¿°</td></tr><tr><td>link</td><td>é“¾æ¥åˆ°å¯¹åº”ç›¸å†Œçš„åœ°å€</td></tr><tr><td>img-url</td><td>å›¾åº“å°é¢</td></tr></tbody></table><ul><li><p>gallery ç›¸å†Œ</p><p>åŒºåˆ«äºæ—§ç‰ˆçš„Galleryç›¸å†Œ,æ–°çš„Galleryç›¸å†Œä¼šè‡ªåŠ¨æ ¹æ®å›¾ç‰‡é•¿åº¦è¿›è¡Œæ’ç‰ˆï¼Œä¹¦å†™ä¹Ÿæ›´åŠ æ–¹ä¾¿ï¼Œä¸markdownæ ¼å¼ä¸€æ ·ã€‚å¯æ ¹æ®éœ€è¦æ’å…¥åˆ°ç›¸åº”çš„mdã€‚æ— éœ€å†è‡ªå·±é…ç½®é•¿å®½ã€‚<strong>å»ºè®®åœ¨ç²˜è´´æ—¶æ•…æ„ä½¿ç”¨é•¿çŸ­ã€å¤§å°ã€æ¨ªç«–ä¸ä¸€çš„å›¾ç‰‡</strong>ï¼Œä¼šæœ‰æ›´å¥½çš„æ•ˆæœã€‚ï¼ˆå°ºå¯¸å®Œå…¨ç›¸åŒçš„å›¾ç‰‡åªä¼šå¹³é“ºè¾“å‡ºï¼Œæ•ˆæœå¾ˆç³Ÿç³•ï¼‰</p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup MC åœ¨Rikkaã®å…­èŠ±æœåŠ¡å™¨é‡Œç•™ä¸‹çš„è¶³è¿¹ &#x27;/gallery/MC/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/%&#125;</span><br><span class="line">&#123;% galleryGroup Gundam å“¦å’§å“‡gundamå“’ï¼ &#x27;/gallery/Gundam/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/ %&#125;</span><br><span class="line">&#123;% galleryGroup I-am-Akilar æŸç§æ„ä¹‰ä¸Šä¹Ÿç®—è‡ªæ‹å§ &#x27;/gallery/I-am-Akilar/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/ %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>2.gallery ç›¸å†Œ</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK</span>)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">MC</div>  <p>åœ¨Rikkaã®å…­èŠ±æœåŠ¡å™¨é‡Œç•™ä¸‹çš„è¶³è¿¹</p>  <a href='/gallery/MC/'></a>  </figcaption>  </figure>  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907110508327' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">Gundam</div>  <p>å“¦å’§å“‡gundamå“’ï¼</p>  <a href='/gallery/Gundam/'></a>  </figcaption>  </figure>  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907113116651' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">I-am-Akilar</div>  <p>æŸç§æ„ä¹‰ä¸Šä¹Ÿç®—è‡ªæ‹å§</p>  <a href='/gallery/I-am-Akilar/'></a>  </figcaption>  </figure></div>2.gallery ç›¸å†Œ<div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN" alt="" /><br /><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK" alt="" /></p>          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="220-æŠ˜å æ¡†-folding"><a class="markdownIt-Anchor" href="#220-æŠ˜å æ¡†-folding"></a> 2.20 æŠ˜å æ¡† folding</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ ‡é¢˜ %&#125;</span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E</span>)</span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><!-- tab å‚æ•°é…ç½® --><ol><li><p><code>é¢œè‰²</code>ï¼šblue, cyan, green, yellow, red</p></li><li><p><code>çŠ¶æ€</code>ï¼šçŠ¶æ€å¡«å†™ open ä»£è¡¨é»˜è®¤æ‰“å¼€ã€‚</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding æŸ¥çœ‹å›¾ç‰‡æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E</span>)</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding cyan open, æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† %&#125;</span><br><span class="line"></span><br><span class="line">è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†ã€‚</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding green, æŸ¥çœ‹ä»£ç æµ‹è¯• %&#125;</span><br><span class="line">å‡è£…è¿™é‡Œæœ‰ä»£ç å—ï¼ˆä»£ç å—æ²¡æ³•åµŒå¥—ä»£ç å—ï¼‰</span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding yellow, æŸ¥çœ‹åˆ—è¡¨æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> haha</span><br><span class="line"><span class="bullet">-</span> hehe</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding red, æŸ¥çœ‹åµŒå¥—æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding blue, æŸ¥çœ‹åµŒå¥—æµ‹è¯•2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding æŸ¥çœ‹åµŒå¥—æµ‹è¯•3 %&#125;</span><br><span class="line"></span><br><span class="line">hahaha <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png&#x27;</span> <span class="attr">style</span>=<span class="string">&#x27;height:24px&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><details class="folding-tag" ><summary> æŸ¥çœ‹å›¾ç‰‡æµ‹è¯• </summary>              <div class='content'>              <p><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg" alt="" /></p>              </div>            </details><details class="folding-tag" cyan open><summary> æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† </summary>              <div class='content'>              <p>è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†ã€‚</p>              </div>            </details><details class="folding-tag" green><summary> æŸ¥çœ‹ä»£ç æµ‹è¯• </summary>              <div class='content'>              <p>å‡è£…è¿™é‡Œæœ‰ä»£ç å—ï¼ˆä»£ç å—æ²¡æ³•åµŒå¥—ä»£ç å—ï¼‰</p>              </div>            </details><details class="folding-tag" yellow><summary> æŸ¥çœ‹åˆ—è¡¨æµ‹è¯• </summary>              <div class='content'>              <ul><li>haha</li><li>hehe</li></ul>              </div>            </details><details class="folding-tag" red><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯• </summary>              <div class='content'>              <details class="folding-tag" blue><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯•2 </summary>              <div class='content'>              <details class="folding-tag" ><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯•3 </summary>              <div class='content'>              <p>hahaha <span><img src='https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png' style='height:24px'></span></p>              </div>            </details>              </div>            </details>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="221-åˆ†æ -tab"><a class="markdownIt-Anchor" href="#221-åˆ†æ -tab"></a> 2.21 åˆ†æ  tab</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><p>Unique name :</p><ul><li><p>é€‰é¡¹å¡å—æ ‡ç­¾çš„å”¯ä¸€åç§°ï¼Œä¸å¸¦é€—å·ã€‚</p></li><li><p>å°†åœ¨#idä¸­ç”¨ä½œæ¯ä¸ªæ ‡ç­¾åŠå…¶ç´¢å¼•å·çš„å‰ç¼€ã€‚</p></li><li><p>å¦‚æœåç§°ä¸­åŒ…å«ç©ºæ ¼ï¼Œåˆ™å¯¹äºç”Ÿæˆ#idï¼Œæ‰€æœ‰ç©ºæ ¼å°†ç”±ç ´æŠ˜å·ä»£æ›¿ã€‚</p></li><li><p>ä»…å½“å‰å¸–å­/é¡µé¢çš„URLå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼</p></li></ul></li><li><p>[index]:</p><ul><li><p>æ´»åŠ¨é€‰é¡¹å¡çš„ç´¢å¼•å·ã€‚</p></li><li><p>å¦‚æœæœªæŒ‡å®šï¼Œå°†é€‰æ‹©ç¬¬ä¸€ä¸ªæ ‡ç­¾ï¼ˆ1ï¼‰ã€‚</p></li><li><p>å¦‚æœindexä¸º-1ï¼Œåˆ™ä¸ä¼šé€‰æ‹©ä»»ä½•é€‰é¡¹å¡ã€‚</p></li><li><p>å¯é€‰å‚æ•°ã€‚</p></li></ul></li><li><p>[Tab caption]:</p><ul><li><p>å½“å‰é€‰é¡¹å¡çš„æ ‡é¢˜ã€‚</p></li><li><p>å¦‚æœæœªæŒ‡å®šæ ‡é¢˜ï¼Œåˆ™å¸¦æœ‰åˆ¶è¡¨ç¬¦ç´¢å¼•åç¼€çš„å”¯ä¸€åç§°å°†ç”¨ä½œåˆ¶è¡¨ç¬¦çš„æ ‡é¢˜ã€‚</p></li><li><p>å¦‚æœæœªæŒ‡å®šæ ‡é¢˜ï¼Œä½†æŒ‡å®šäº†å›¾æ ‡ï¼Œåˆ™æ ‡é¢˜å°†ä¸ºç©ºã€‚</p></li><li><p>å¯é€‰å‚æ•°ã€‚</p></li></ul></li><li><p>[@icon]:</p><ul><li><p>FontAwesomeå›¾æ ‡åç§°ï¼ˆå…¨åï¼Œçœ‹èµ·æ¥åƒâ€œ fas fa-fontâ€ï¼‰</p></li><li><p>å¯ä»¥æŒ‡å®šå¸¦ç©ºæ ¼æˆ–ä¸å¸¦ç©ºæ ¼ï¼›</p></li><li><p>ä¾‹å¦‚â€™Tab caption @iconâ€™ å’Œ â€˜Tab caption@iconâ€™.</p></li><li><p>å¯é€‰å‚æ•°ã€‚</p></li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.Demo 1 - é¢„è®¾é€‰æ‹©ç¬¬ä¸€ä¸ªã€é»˜è®¤ã€‘</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>2.Demo 2 - é¢„è®¾é€‰æ‹©tabs</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test2, 3 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>3.Demo 3 - æ²¡æœ‰é¢„è®¾å€¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test3, -1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>4.Demo 4 - è‡ªå®šä¹‰Tabå + åªæœ‰icon + iconå’ŒTabå</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab ç¬¬ä¸€ä¸ªTab --&gt;</span><br><span class="line"><span class="strong">**tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"><span class="strong">**åªæœ‰å›¾æ ‡ æ²¡æœ‰Tabåå­—**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab ç‚¸å¼¹@fas fa-bomb --&gt;</span><br><span class="line"><span class="strong">**åå­—+icon**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.Demo 1 - é¢„è®¾é€‰æ‹©ç¬¬ä¸€ä¸ªã€é»˜è®¤ã€‘</p><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">test1 1</button></li><li class="tab"><button type="button" data-href="#test1-2">test1 2</button></li><li class="tab"><button type="button" data-href="#test1-3">test1 3</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>2.Demo 2 - é¢„è®¾é€‰æ‹©tabs</p><div class="tabs" id="test2"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test2-1">test2 1</button></li><li class="tab"><button type="button" data-href="#test2-2">test2 2</button></li><li class="tab active"><button type="button" data-href="#test2-3">test2 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test2-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test2-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content active" id="test2-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>3.Demo 3 - æ²¡æœ‰é¢„è®¾å€¼</p><div class="tabs" id="test3"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test3-1">test3 1</button></li><li class="tab"><button type="button" data-href="#test3-2">test3 2</button></li><li class="tab"><button type="button" data-href="#test3-3">test3 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test3-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>4.Demo 4 - è‡ªå®šä¹‰Tabå + åªæœ‰icon + iconå’ŒTabå</p><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">ç¬¬ä¸€ä¸ªTab</button></li><li class="tab"><button type="button" data-href="#test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test4-3"><i class="fas fa-bomb"></i>ç‚¸å¼¹</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p><strong>åªæœ‰å›¾æ ‡ æ²¡æœ‰Tabåå­—</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p><strong>åå­—+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="222-è¯—è¯æ ‡ç­¾-poem"><a class="markdownIt-Anchor" href="#222-è¯—è¯æ ‡ç­¾-poem"></a> 2.22 è¯—è¯æ ‡ç­¾ poem</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><ol><li><code>title</code>ï¼šè¯—è¯æ ‡é¢˜</li><li><code>author</code>ï¼šä½œè€…ï¼Œå¯ä»¥ä¸å†™</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% poem æ°´è°ƒæ­Œå¤´,è‹è½¼ %&#125;</span><br><span class="line">ä¸™è¾°ä¸­ç§‹ï¼Œæ¬¢é¥®è¾¾æ—¦ï¼Œå¤§é†‰ï¼Œä½œæ­¤ç¯‡ï¼Œå…¼æ€€å­ç”±ã€‚</span><br><span class="line">æ˜æœˆå‡ æ—¶æœ‰ï¼ŸæŠŠé…’é—®é’å¤©ã€‚</span><br><span class="line">ä¸çŸ¥å¤©ä¸Šå®«é˜™ï¼Œä»Šå¤•æ˜¯ä½•å¹´ï¼Ÿ</span><br><span class="line">æˆ‘æ¬²ä¹˜é£å½’å»ï¼Œåˆæç¼æ¥¼ç‰å®‡ï¼Œé«˜å¤„ä¸èƒœå¯’ã€‚</span><br><span class="line">èµ·èˆå¼„æ¸…å½±ï¼Œä½•ä¼¼åœ¨äººé—´ï¼Ÿ</span><br><span class="line"></span><br><span class="line">è½¬æœ±é˜ï¼Œä½ç»®æˆ·ï¼Œç…§æ— çœ ã€‚</span><br><span class="line">ä¸åº”æœ‰æ¨ï¼Œä½•äº‹é•¿å‘åˆ«æ—¶åœ†ï¼Ÿ</span><br><span class="line">äººæœ‰æ‚²æ¬¢ç¦»åˆï¼Œæœˆæœ‰é˜´æ™´åœ†ç¼ºï¼Œæ­¤äº‹å¤éš¾å…¨ã€‚</span><br><span class="line">ä½†æ„¿äººé•¿ä¹…ï¼Œåƒé‡Œå…±å©µå¨Ÿã€‚</span><br><span class="line">&#123;% endpoem %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class='poem'><div class='poem-title'>æ°´è°ƒæ­Œå¤´</div><div class='poem-author'>è‹è½¼</div><p>ä¸™è¾°ä¸­ç§‹ï¼Œæ¬¢é¥®è¾¾æ—¦ï¼Œå¤§é†‰ï¼Œä½œæ­¤ç¯‡ï¼Œå…¼æ€€å­ç”±ã€‚<br />æ˜æœˆå‡ æ—¶æœ‰ï¼ŸæŠŠé…’é—®é’å¤©ã€‚<br />ä¸çŸ¥å¤©ä¸Šå®«é˜™ï¼Œä»Šå¤•æ˜¯ä½•å¹´ï¼Ÿ<br />æˆ‘æ¬²ä¹˜é£å½’å»ï¼Œåˆæç¼æ¥¼ç‰å®‡ï¼Œé«˜å¤„ä¸èƒœå¯’ã€‚<br />èµ·èˆå¼„æ¸…å½±ï¼Œä½•ä¼¼åœ¨äººé—´ï¼Ÿ</p><p>è½¬æœ±é˜ï¼Œä½ç»®æˆ·ï¼Œç…§æ— çœ ã€‚<br />ä¸åº”æœ‰æ¨ï¼Œä½•äº‹é•¿å‘åˆ«æ—¶åœ†ï¼Ÿ<br />äººæœ‰æ‚²æ¬¢ç¦»åˆï¼Œæœˆæœ‰é˜´æ™´åœ†ç¼ºï¼Œæ­¤äº‹å¤éš¾å…¨ã€‚<br />ä½†æ„¿äººé•¿ä¹…ï¼Œåƒé‡Œå…±å©µå¨Ÿã€‚</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="223-é˜¿é‡Œå›¾æ ‡-icon"><a class="markdownIt-Anchor" href="#223-é˜¿é‡Œå›¾æ ‡-icon"></a> 2.23 é˜¿é‡Œå›¾æ ‡ icon</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon [icon-xxxx],[font-size] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>icon-xxxx</code>ï¼šè¡¨ç¤ºå›¾æ ‡<code>font-class</code>,å¯ä»¥åœ¨è‡ªå·±çš„é˜¿é‡ŒçŸ¢é‡å›¾æ ‡åº“é¡¹ç›®çš„<code>font-class</code>å¼•ç”¨æ–¹æ¡ˆå†…æŸ¥è¯¢å¹¶å¤åˆ¶ã€‚</li><li><code>font-size</code>ï¼šè¡¨ç¤ºå›¾æ ‡å¤§å°ï¼Œç›´æ¥å¡«å†™æ•°å­—å³å¯ï¼Œå•ä½ä¸º<code>em</code>ã€‚å›¾æ ‡å¤§å°é»˜è®¤å€¼ä¸º<code>1em</code>ã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon icon-rat<span class="emphasis">_zi %&#125;&#123;% icon icon-rat,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-ox_</span>chou,3 %&#125;&#123;% icon icon-ox,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-tiger<span class="emphasis">_yin,5 %&#125;&#123;% icon icon-tiger,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rabbit_</span>mao,1 %&#125;&#123;% icon icon-rabbit,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dragon<span class="emphasis">_chen,3 %&#125;&#123;% icon icon-dragon,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-snake_</span>si,5 %&#125;&#123;% icon icon-snake,6 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-horse<span class="emphasis">_wu %&#125;&#123;% icon icon-horse,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-goat_</span>wei,3 %&#125;&#123;% icon icon-goat,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-monkey<span class="emphasis">_shen,5 %&#125;&#123;% icon icon-monkey,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rooster_</span>you %&#125;&#123;% icon icon-rooster,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dog<span class="emphasis">_xu,3 %&#125;&#123;% icon icon-dog,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-boar_</span>hai,5 %&#125;&#123;% icon icon-boar,6 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rat_zi"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rat"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-ox_chou"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-ox"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-tiger_yin"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-tiger"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rabbit_mao"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rabbit"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dragon_chen"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dragon"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-snake_si"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-snake"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-horse_wu"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-horse"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-goat_wei"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-goat"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-monkey_shen"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-monkey"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rooster_you"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rooster"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dog_xu"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dog"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-boar_hai"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-boar"></use></svg></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="224-ç‰¹æ•ˆæ ‡ç­¾wow"><a class="markdownIt-Anchor" href="#224-ç‰¹æ•ˆæ ‡ç­¾wow"></a> 2.24 ç‰¹æ•ˆæ ‡ç­¾wow</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow [animete],[duration],[delay],[offset],[iteration] %&#125;</span><br><span class="line">å†…å®¹</span><br><span class="line">&#123;% endwow %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>animate</code>: åŠ¨ç”»æ ·å¼ï¼Œæ•ˆæœè¯¦è§<a href="https://animate.style/">animate.csså‚è€ƒæ–‡æ¡£</a></li><li><code>duration</code>: é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»æŒç»­æ—¶é—´ï¼Œå•ä½å¯ä»¥æ˜¯<code>ms</code>ä¹Ÿå¯ä»¥æ˜¯<code>s</code>ã€‚ä¾‹å¦‚<code>3s</code>ï¼Œ<code>700ms</code>ã€‚</li><li><code>delay</code>: é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»å¼€å§‹çš„å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½å¯ä»¥æ˜¯<code>ms</code>ä¹Ÿå¯ä»¥æ˜¯<code>s</code>ã€‚ä¾‹å¦‚<code>3s</code>ï¼Œ<code>700ms</code>ã€‚</li><li><code>offset</code>: é€‰å¡«é¡¹ï¼Œå¼€å§‹åŠ¨ç”»çš„è·ç¦»ï¼ˆç›¸å¯¹æµè§ˆå™¨åº•éƒ¨ï¼‰</li><li><code>iteration</code>: é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»é‡å¤çš„æ¬¡æ•°</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.flipåŠ¨ç”»æ•ˆæœã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ï¼Œç¦»åº•éƒ¨`100`è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤`10`æ¬¡</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>2.zoomInåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5sï¼Œç¦»åº•éƒ¨100è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤10æ¬¡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ï¼Œç¦»åº•éƒ¨`100`è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤`10`æ¬¡</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>3.slideInRightåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5s</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__slideInRight,5s,5s %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note orange &#x27;fas fa-car&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`slideInRight`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ã€‚</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>4.heartBeatåŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶5sï¼Œé‡å¤10æ¬¡ã€‚æ­¤å¤„æ³¨æ„ä¸ç”¨çš„å‚æ•°ä½ç½®è¦ç•™ç©ºï¼Œç”¨é€—å·é—´éš”ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__heartBeat,,5s,,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note red &#x27;fas fa-battery-half&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`heartBeat`åŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶`5s`ï¼Œé‡å¤`10`æ¬¡ã€‚</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.flipåŠ¨ç”»æ•ˆæœã€‚</p><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ï¼Œç¦»åº•éƒ¨<code>100</code>è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤<code>10</code>æ¬¡</p></div></div><p>2.zoomInåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5sï¼Œç¦»åº•éƒ¨100è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤10æ¬¡</p><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ï¼Œç¦»åº•éƒ¨<code>100</code>è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤<code>10</code>æ¬¡</p></div></div><p>3.slideInRightåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5s</p><div class='wow animate__slideInRight' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='' ><div class="note orange icon-padding modern"><i class="note-icon fas fa-car"></i><p><code>slideInRight</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ã€‚</p></div></div><p>4.heartBeatåŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶5sï¼Œé‡å¤10æ¬¡ã€‚æ­¤å¤„æ³¨æ„ä¸ç”¨çš„å‚æ•°ä½ç½®è¦ç•™ç©ºï¼Œç”¨é€—å·é—´éš”ã€‚</p><div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='10' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><code>heartBeat</code>åŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶<code>5s</code>ï¼Œé‡å¤<code>10</code>æ¬¡ã€‚</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="225-è¿›åº¦æ¡-progress"><a class="markdownIt-Anchor" href="#225-è¿›åº¦æ¡-progress"></a> 2.25  è¿›åº¦æ¡ progress</h2><div class="note info flat"><p>è¿›åº¦æ¡æ ‡ç­¾å‚è€ƒ<a href="https://rongbuqiu.com/jdt.html">æ²‚ä½°å­œçŒ«-ç»™HEXOæ–‡ç« æ·»åŠ å½©è‰²è¿›åº¦æ¡</a>ã€‚<br />æºæ ·å¼æå–è‡ª<a href="https://zwying0814.gitbook.io/cuteen/">Cuteen</a>ä¸»é¢˜ã€‚</p></div><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress [width] [color] [text] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>width</code>: 0åˆ°100çš„é˜¿æ‹‰ä¼¯æ•°å­—</li><li><code>color</code>: é¢œè‰²ï¼Œå–å€¼æœ‰red,yellow,green,cyan,blue,gray</li><li><code>text</code>:è¿›åº¦æ¡ä¸Šçš„æ–‡å­—å†…å®¹</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress 10 red è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 30 yellow è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 50 green è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 70 cyan è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 90 blue è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 100 gray è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-red"  style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-yellow"  style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-green"  style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-cyan"  style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-blue"  style="width: 90%" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-gray"  style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="226-æ³¨é‡Š-notation"><a class="markdownIt-Anchor" href="#226-æ³¨é‡Š-notation"></a> 2.26 æ³¨é‡Š notation</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% nota [label] , [text] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><p><code>label</code>: æ³¨é‡Šè¯æ±‡</p></li><li><p><code>text</code>: æ‚¬åœæ˜¾ç¤ºçš„æ³¨è§£å†…å®¹</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% nota æŠŠé¼ æ ‡ç§»åŠ¨åˆ°æˆ‘ä¸Šé¢è¯•è¯• ,å¯ä»¥çœ‹åˆ°æ³¨è§£å†…å®¹å‡ºç°åœ¨é¡¶æ  %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p><span class='nota' data-nota='å¯ä»¥çœ‹åˆ°æ³¨è§£å†…å®¹å‡ºç°åœ¨é¡¶æ '>æŠŠé¼ æ ‡ç§»åŠ¨åˆ°æˆ‘ä¸Šé¢è¯•è¯•</span></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="227-æ°”æ³¡æ³¨é‡Š-bubble"><a class="markdownIt-Anchor" href="#227-æ°”æ³¡æ³¨é‡Š-bubble"></a> 2.27 æ°”æ³¡æ³¨é‡Š bubble</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bubble [content] , [notation] ,[background-color] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>content</code>: æ³¨é‡Šè¯æ±‡</li><li><code>notation</code>: æ‚¬åœæ˜¾ç¤ºçš„æ³¨è§£å†…å®¹</li><li><code>background-color</code>: å¯é€‰ï¼Œæ°”æ³¡èƒŒæ™¯è‰²ã€‚é»˜è®¤ä¸ºâ€œ#71a4e3â€</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ€è¿‘æˆ‘å­¦åˆ°äº†ä¸å°‘æ–°ç©æ„å„¿ï¼ˆè™½ç„¶å¯¹å¾ˆå¤šå¤§ä½¬æ¥è¯´è¿™äº›å·²ç»æ˜¯æ—§æŠ€æœ¯äº†ï¼‰ï¼Œæ¯”å¦‚CSSçš„&#123;% bubble å…„å¼Ÿç›¸é‚»é€‰æ‹©å™¨,&quot;ä¾‹å¦‚ h1 + p &#123;margin-top:50px;&#125;&quot; %&#125;ï¼Œ&#123;% bubble flexå¸ƒå±€,&quot;Flex æ˜¯ Flexible Box çš„ç¼©å†™ï¼Œæ„ä¸º&quot;å¼¹æ€§å¸ƒå±€&quot;ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§&quot;,&quot;#ec5830&quot; %&#125;ï¼Œ&#123;% bubble transformå˜æ¢,&quot;transform å±æ€§å‘å…ƒç´ åº”ç”¨ 2D æˆ– 3D è½¬æ¢ã€‚è¯¥å±æ€§å…è®¸æˆ‘ä»¬å¯¹å…ƒç´ è¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€ç§»åŠ¨æˆ–å€¾æ–œã€‚&quot;,&quot;#1db675&quot; %&#125;ï¼Œanimationçš„&#123;% bubble è´å¡å°”é€Ÿåº¦æ›²çº¿,&quot;è´å¡å°”æ›²çº¿(BÃ©zier curve)ï¼Œåˆç§°è´å…¹æ›²çº¿æˆ–è´æµåŸƒæ›²çº¿ï¼Œæ˜¯åº”ç”¨äºäºŒç»´å›¾å½¢åº”ç”¨ç¨‹åºçš„æ•°å­¦æ›²çº¿ã€‚ä¸€èˆ¬çš„çŸ¢é‡å›¾å½¢è½¯ä»¶é€šè¿‡å®ƒæ¥ç²¾ç¡®ç”»å‡ºæ›²çº¿ï¼Œè´å…¹æ›²çº¿ç”±çº¿æ®µä¸èŠ‚ç‚¹ç»„æˆï¼ŒèŠ‚ç‚¹æ˜¯å¯æ‹–åŠ¨çš„æ”¯ç‚¹ï¼Œçº¿æ®µåƒå¯ä¼¸ç¼©çš„çš®ç­‹&quot;,&quot;#de4489&quot; %&#125;å†™æ³•ï¼Œè¿˜æœ‰ä»Šå¤©åˆšçœ‹åˆ°çš„&#123;% bubble clip-path,&quot;clip-pathå±æ€§ä½¿ç”¨è£å‰ªæ–¹å¼åˆ›å»ºå…ƒç´ çš„å¯æ˜¾ç¤ºåŒºåŸŸã€‚åŒºåŸŸå†…çš„éƒ¨åˆ†æ˜¾ç¤ºï¼ŒåŒºåŸŸå¤–çš„éšè—ã€‚&quot;,&quot;#868fd7&quot; %&#125;å±æ€§ã€‚è¿™äº›å¯¹æˆ‘æ¥è¯´å¾ˆæ–°é¢–çš„æ¦‚å¿µç‹ ç‹ çš„å†²å‡»ç€æˆ‘ä»¥å‰ç§¯ç´¯èµ·æ¥çš„è®¾è®¡æ€è·¯ã€‚</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>æœ€è¿‘æˆ‘å­¦åˆ°äº†ä¸å°‘æ–°ç©æ„å„¿ï¼ˆè™½ç„¶å¯¹å¾ˆå¤šå¤§ä½¬æ¥è¯´è¿™äº›å·²ç»æ˜¯æ—§æŠ€æœ¯äº†ï¼‰ï¼Œæ¯”å¦‚CSSçš„<span class="bubble-content">å…„å¼Ÿç›¸é‚»é€‰æ‹©å™¨</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#71a4e3;">ä¾‹å¦‚ h1 + p {margin-top:50px;}</span></span>ï¼Œ<span class="bubble-content">flexå¸ƒå±€</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#ec5830;">Flex æ˜¯ Flexible Box çš„ç¼©å†™ï¼Œæ„ä¸ºå¼¹æ€§å¸ƒå±€&quot;ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§&quot;</span></span>ï¼Œ<span class="bubble-content">transformå˜æ¢</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#1db675;">transform å±æ€§å‘å…ƒç´ åº”ç”¨ 2D æˆ– 3D è½¬æ¢ã€‚è¯¥å±æ€§å…è®¸æˆ‘ä»¬å¯¹å…ƒç´ è¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€ç§»åŠ¨æˆ–å€¾æ–œã€‚</span></span>ï¼Œanimationçš„<span class="bubble-content">è´å¡å°”é€Ÿåº¦æ›²çº¿</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#de4489;">è´å¡å°”æ›²çº¿(BÃ©zier curve)ï¼Œåˆç§°è´å…¹æ›²çº¿æˆ–è´æµåŸƒæ›²çº¿ï¼Œæ˜¯åº”ç”¨äºäºŒç»´å›¾å½¢åº”ç”¨ç¨‹åºçš„æ•°å­¦æ›²çº¿ã€‚ä¸€èˆ¬çš„çŸ¢é‡å›¾å½¢è½¯ä»¶é€šè¿‡å®ƒæ¥ç²¾ç¡®ç”»å‡ºæ›²çº¿ï¼Œè´å…¹æ›²çº¿ç”±çº¿æ®µä¸èŠ‚ç‚¹ç»„æˆï¼ŒèŠ‚ç‚¹æ˜¯å¯æ‹–åŠ¨çš„æ”¯ç‚¹ï¼Œçº¿æ®µåƒå¯ä¼¸ç¼©çš„çš®ç­‹</span></span>å†™æ³•ï¼Œè¿˜æœ‰ä»Šå¤©åˆšçœ‹åˆ°çš„<span class="bubble-content">clip-path</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#868fd7;">clip-pathå±æ€§ä½¿ç”¨è£å‰ªæ–¹å¼åˆ›å»ºå…ƒç´ çš„å¯æ˜¾ç¤ºåŒºåŸŸã€‚åŒºåŸŸå†…çš„éƒ¨åˆ†æ˜¾ç¤ºï¼ŒåŒºåŸŸå¤–çš„éšè—ã€‚</span></span>å±æ€§ã€‚è¿™äº›å¯¹æˆ‘æ¥è¯´å¾ˆæ–°é¢–çš„æ¦‚å¿µç‹ ç‹ çš„å†²å‡»ç€æˆ‘ä»¥å‰ç§¯ç´¯èµ·æ¥çš„è®¾è®¡æ€è·¯ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="228-å¼•ç”¨æ–‡çŒ®-reference"><a class="markdownIt-Anchor" href="#228-å¼•ç”¨æ–‡çŒ®-reference"></a> 2.28 å¼•ç”¨æ–‡çŒ® reference</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% referto [id] , [literature] %&#125;</span><br><span class="line">&#123;% referfrom [id] , [literature] , [url] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><p>referto å¼•ç”¨ä¸Šæ ‡</p><ul><li><p><code>id</code>: ä¸Šæ ‡åºå·å†…å®¹ï¼Œéœ€ä¸referfromæ ‡ç­¾çš„idå¯¹åº”æ‰èƒ½å®ç°è·³è½¬</p></li><li><p><code>literature</code>: å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®åç§°</p></li></ul></li><li><p>referfrom å¼•ç”¨å‡ºå¤„</p><ul><li><p><code>id</code>: åºå·å†…å®¹ï¼Œéœ€ä¸refertoæ ‡ç­¾çš„idå¯¹åº”æ‰èƒ½å®ç° è·³è½¬</p></li><li><p><code>literature</code>: å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®åç§°</p></li><li><p><code>url</code>: å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®é“¾æ¥ï¼Œå¯çœç•¥</p></li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Akilarã®ç³–æœå±‹(akilar.top)æ˜¯ä¸€ä¸ªç§äººæ€§è´¨çš„åšå®¢&#123;% referto &#x27;[1]&#x27;,&#x27;Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹&#x27; %&#125;ï¼Œä»å„ç±»æ•™ç¨‹è‡³ç”Ÿæ´»ç‚¹æ»´ï¼Œæ— è¯ä¸è°ˆã€‚å»ºç¾¤çš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªé—²èŠçš„åœºæ‰€ã€‚åšå®¢é‡‡ç”¨Hexoæ¡†æ¶&#123;% referto &#x27;[2]&#x27;,&#x27;Hexoä¸­æ–‡æ–‡æ¡£&#x27; %&#125;ï¼ŒButterflyä¸»é¢˜&#123;% referto &#x27;[3]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">æœ¬é¡¹ç›®å‚è€ƒäº†Volantis&#123;% referto &#x27;[4]&#x27;,&#x27;hexo-theme-volantis æ ‡ç­¾æ’ä»¶&#x27; %&#125;çš„æ ‡ç­¾æ ·å¼ã€‚å¼•å…¥<span class="code">`[tag].js`</span>ï¼Œå¹¶é’ˆå¯¹<span class="code">`butterfly`</span>ä¸»é¢˜ä¿®æ”¹äº†ç›¸åº”çš„<span class="code">`[tag].styl`</span>ã€‚åœ¨æ­¤é¸£è°¢<span class="code">`Volantis`</span>ä¸»é¢˜ä¼—å¼€å‘è€…ã€‚</span><br><span class="line">ä¸»è¦å‚è€ƒå†…å®¹åŒ…æ‹¬å„ä¸ªvolantisçš„å†…ç½®æ ‡ç­¾æ’ä»¶æ–‡æ¡£&#123;% referto &#x27;[5]&#x27;,&#x27;Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶&#x27; %&#125;</span><br><span class="line">Butterflyä¸»é¢˜çš„å„ä¸ªè¡ç”Ÿé­”æ”¹&#123;% referto &#x27;[6]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins&#x27; %&#125;&#123;% referto &#x27;[7]&#x27;,&#x27;å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ&#x27; %&#125;&#123;% referto &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27; %&#125;&#123;% referto &#x27;[9]&#x27;,&#x27;å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% referfrom &#x27;[1]&#x27;,&#x27;Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹&#x27;,&#x27;https://jq.qq.com/?<span class="emphasis">_wv=1027&amp;k=pGLB2C0N&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[2]&#x27;,&#x27;Hexoä¸­æ–‡æ–‡æ¡£&#x27;,&#x27;https://hexo.io/zh-cn/docs/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[3]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹&#x27;,&#x27;https://butterfly.js.org/posts/21cfbf15/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[4]&#x27;,&#x27;hexo-theme-volantis æ ‡ç­¾æ’ä»¶&#x27;,&#x27;https://volantis.js.org/v5/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[5]&#x27;,&#x27;Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶&#x27;,&#x27;https://volantis.js.org/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[6]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins&#x27;,&#x27;https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[7]&#x27;,&#x27;å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ&#x27;,&#x27;https://lovelijunyi.gitee.io/posts/c898.html&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27;,&#x27;https://github.com/l-lin/font-awesome-animation&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[9]&#x27;,&#x27;å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£&#x27;,&#x27;https://www.antmoe.com/posts/3b43914f/&#x27; %&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>Akilarã®ç³–æœå±‹(akilar.top)æ˜¯ä¸€ä¸ªç§äººæ€§è´¨çš„åšå®¢<span class="hidden-anchor" id="referto_[1]"></span><sup class="reference"><a href="#referfrom_[1]">[1]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>ï¼Œä»å„ç±»æ•™ç¨‹è‡³ç”Ÿæ´»ç‚¹æ»´ï¼Œæ— è¯ä¸è°ˆã€‚å»ºç¾¤çš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªé—²èŠçš„åœºæ‰€ã€‚åšå®¢é‡‡ç”¨Hexoæ¡†æ¶<span class="hidden-anchor" id="referto_[2]"></span><sup class="reference"><a href="#referfrom_[2]">[2]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Hexoä¸­æ–‡æ–‡æ¡£</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>ï¼ŒButterflyä¸»é¢˜<span class="hidden-anchor" id="referto_[3]"></span><sup class="reference"><a href="#referfrom_[3]">[3]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span></p><p>æœ¬é¡¹ç›®å‚è€ƒäº†Volantis<span class="hidden-anchor" id="referto_[4]"></span><sup class="reference"><a href="#referfrom_[4]">[4]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">hexo-theme-volantis æ ‡ç­¾æ’ä»¶</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>çš„æ ‡ç­¾æ ·å¼ã€‚å¼•å…¥<code>[tag].js</code>ï¼Œå¹¶é’ˆå¯¹<code>butterfly</code>ä¸»é¢˜ä¿®æ”¹äº†ç›¸åº”çš„<code>[tag].styl</code>ã€‚åœ¨æ­¤é¸£è°¢<code>Volantis</code>ä¸»é¢˜ä¼—å¼€å‘è€…ã€‚<br />ä¸»è¦å‚è€ƒå†…å®¹åŒ…æ‹¬å„ä¸ªvolantisçš„å†…ç½®æ ‡ç­¾æ’ä»¶æ–‡æ¡£<span class="hidden-anchor" id="referto_[5]"></span><sup class="reference"><a href="#referfrom_[5]">[5]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><br />Butterflyä¸»é¢˜çš„å„ä¸ªè¡ç”Ÿé­”æ”¹<span class="hidden-anchor" id="referto_[6]"></span><sup class="reference"><a href="#referfrom_[6]">[6]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[7]"></span><sup class="reference"><a href="#referfrom_[7]">[7]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[8]"></span><sup class="reference"><a href="#referfrom_[8]">[8]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">l-lin-font-awesome-animation</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[9]"></span><sup class="reference"><a href="#referfrom_[9]">[9]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span></p><div class="reference-source"><span class="hidden-anchor" id="referfrom_[1]"></span><a class="reference-anchor" href="#referto_[1]">[1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://jq.qq.com/?_wv=1027&k=pGLB2C0N">Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[2]"></span><a class="reference-anchor" href="#referto_[2]">[2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://hexo.io/zh-cn/docs/">Hexoä¸­æ–‡æ–‡æ¡£</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[3]"></span><a class="reference-anchor" href="#referto_[3]">[3]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/21cfbf15/">Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[4]"></span><a class="reference-anchor" href="#referto_[4]">[4]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/v5/tag-plugins/">hexo-theme-volantis æ ‡ç­¾æ’ä»¶</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[5]"></span><a class="reference-anchor" href="#referto_[5]">[5]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/tag-plugins/">Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[6]"></span><a class="reference-anchor" href="#referto_[6]">[6]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89">Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[7]"></span><a class="reference-anchor" href="#referto_[7]">[7]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://lovelijunyi.gitee.io/posts/c898.html">å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[8]"></span><a class="reference-anchor" href="#referto_[8]">[8]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://github.com/l-lin/font-awesome-animation">l-lin-font-awesome-animation</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[9]"></span><a class="reference-anchor" href="#referto_[9]">[9]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://www.antmoe.com/posts/3b43914f/">å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£</a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="229-pdfå±•ç¤º"><a class="markdownIt-Anchor" href="#229-pdfå±•ç¤º"></a> 2.29 PDFå±•ç¤º</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% pdf æ–‡ä»¶è·¯å¾„ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>æ–‡ä»¶è·¯å¾„</code>: å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„æˆ–è€…æ˜¯åœ¨çº¿é“¾æ¥</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 1.æœ¬åœ°æ–‡ä»¶:åœ¨mdæ–‡ä»¶è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œå…¶å†…æ”¾pdfæ–‡ä»¶åä¸ºxxx.pdfçš„æ–‡ä»¶</span></span><br><span class="line">&#123;% pdf xxx.pdf %&#125;</span><br><span class="line"><span class="section"># 2.åœ¨çº¿é“¾æ¥</span></span><br><span class="line">&#123;% pdf https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/å°ä½œæ–‡è®²ä¹‰.pdf %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>2.åœ¨çº¿é“¾æ¥(è¦æ”¾åˆ°æœ€å¤–å±‚æ‰èƒ½èµ·ä½œç”¨)</p><pre><code>&lt;div class=&quot;row&quot;&gt;&lt;embed src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/å°ä½œæ–‡è®²ä¹‰.pdf&quot; width=&quot;100%&quot; height=&quot;550&quot; type=&quot;application/pdf&quot;&gt;&lt;/div&gt;</code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="230-hexo-tag-map-æ’ä»¶"><a class="markdownIt-Anchor" href="#230-hexo-tag-map-æ’ä»¶"></a> 2.30 Hexo-tag-map æ’ä»¶</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% + æ ‡ç­¾å€¼ + ç»åº¦ + çº¬åº¦ + æ–‡æœ¬ + ç¼©æ”¾ç­‰çº§ + å®½ + é«˜ + é»˜è®¤å›¾å±‚ + %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><table><thead><tr><th style="text-align:center">åœ°å›¾å</th><th style="text-align:center">æ ‡ç­¾å€¼ &lt;å¿…å¡«&gt;</th><th style="text-align:center">å®½ (é»˜è®¤ 100%) / é«˜ (é»˜è®¤ 360px)</th><th style="text-align:center">ç¼©æ”¾ç­‰çº§ (é»˜è®¤ 14)</th><th style="text-align:center">å®½ (é»˜è®¤ 100%) / é«˜ (é»˜è®¤ 360px)</th><th style="text-align:center">é»˜è®¤å›¾å±‚ (é»˜è®¤ 1)</th></tr></thead><tbody><tr><td style="text-align:center">æ··åˆåœ°å›¾</td><td style="text-align:center">map</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 3~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~7</td></tr><tr><td style="text-align:center">è°·æ­Œåœ°å›¾</td><td style="text-align:center">googleMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~20</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~3</td></tr><tr><td style="text-align:center">é«˜å¾·åœ°å›¾</td><td style="text-align:center">gaodeMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 3~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~3</td></tr><tr><td style="text-align:center">ç™¾åº¦åœ°å›¾</td><td style="text-align:center">baiduMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 4~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~2</td></tr><tr><td style="text-align:center">Geoq åœ°å›¾</td><td style="text-align:center">geoqMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~5</td></tr><tr><td style="text-align:center">openstreet åœ°å›¾</td><td style="text-align:center">openstreetMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">ä¸æ”¯æŒæ­¤å‚æ•°</td></tr></tbody></table><ol><li>å‚æ•°ä¹‹é—´ï¼Œç”¨è‹±æ–‡é€—å·ç›¸éš”</li><li>å‚æ•°å¿…é¡»æŒ‰ä¸Šè¿°äº‹ä¾‹é¡ºåºè¾“å…¥ï¼Œä¸å¾—ä¸ºç©º</li><li>åŒä¸€ä¸ªé¡µé¢ï¼ŒåŒä¸€ç»„ç»çº¬åº¦å€¼ï¼Œåªèƒ½æ’å…¥ä¸€ä¸ªç›¸åŒæ ‡ç­¾å€¼çš„åœ°å›¾ (è‹¥æœ‰éœ€è¦ï¼Œå¯ä»¥å°†ç¬¬äºŒä¸ªåœ°å›¾ä¸Šï¼Œç»åº¦æˆ–çº¬åº¦æœ«å°¾åˆ é™¤ä¸€ä¸¤ä¸ªæ•°)</li><li>å‚æ•°å–å€¼å¿…é¡»åœ¨ä¸Šè¿°èŒƒå›´å†…</li><li>é»˜è®¤å›¾å±‚ï¼šå³åœ°å›¾å åŠ å±‚çš„å€¼ï¼Œé»˜è®¤å¸¸è§„åœ°å›¾è¿˜æ˜¯å«æ˜Ÿåœ°å›¾ï¼Œå¯æŒ‰åœ°å›¾æ˜¾ç¤ºé¡ºåºå–å€¼</li><li>ç¼©æ”¾ç­‰çº§ï¼Œæ•°å­—è¶Šå¤§ï¼Œåœ°å›¾æ¯”ä¾‹å°ºè¶Šå°ï¼Œæ˜¾ç¤ºçš„è¶Šç²¾ç»†</li><li>é™¤æ ‡ç­¾å€¼å¤–ï¼Œå…¶ä»–å‚æ•°é€‰å¡«ï¼Œä½† æ¯ä¸ªå‚æ•°çš„å·¦è¾¹çš„å‚æ•°å¿…å¡«</li><li>è°·æ­Œåœ°å›¾éœ€è¦å¤–ç½‘æ‰èƒ½åŠ è½½æŸ¥çœ‹</li></ol><p>åæ ‡è·å–ï¼š<a href="https://lbs.amap.com/tools/picker">é«˜å¾·åœ°å›¾åæ ‡æ‹¾å–ç³»ç»Ÿ</a> ã€<a href="https://api.map.baidu.com/lbsapi/getpoint/index.html">ç™¾åº¦åœ°å›¾åæ ‡æ‹¾å–ç³»ç»Ÿ</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% map 120.101101,30.239119 %&#125;</span><br><span class="line">&#123;% googleMap 120.101101,30.239119, è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼ %&#125;</span><br><span class="line">&#123;% geoqMap 120.101101,30.239119, è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼, 13, 90%, 320px, 3 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div class="map-box"><div id="map-120.101101-30.239119" style="max-width:100%; height:360px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div></div><script type="text/javascript">var normalm=L.tileLayer.chinaProvider('GaoDe.Normal.Map',{maxZoom:20,minZoom:1,attribution:'Amap'});var imgm=L.tileLayer.chinaProvider('GaoDe.Satellite.Map',{maxZoom:20,minZoom:1,attribution:'Amap'});var imga=L.tileLayer.chinaProvider('GaoDe.Satellite.Annotion',{maxZoom:20,minZoom:1,attribution:'Amap'});var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:20,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'});routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:21,minZoom:1});var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'}),routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:21,minZoom:1,attribution:'Google Maps'});var normalm1=L.tileLayer.chinaProvider('Geoq.Normal.Map',{maxZoom:21,minZoom:1,attribution:'GeoQ'});var normal=L.layerGroup([normalm]),image=L.layerGroup([imgm,imga]);var baseLayers={"é«˜å¾·åœ°å›¾":normal,"æ™ºå›¾åœ°å›¾":normalm1,"è°·æ­Œåœ°å›¾":normalMap,"é«˜å¾·å«æ˜Ÿåœ°å›¾":imgm,"è°·æ­Œå«æ˜Ÿåœ°å›¾":satelliteMap,"é«˜å¾·å«æ˜Ÿæ ‡æ³¨":image,"è°·æ­Œå«æ˜Ÿæ ‡æ³¨":routeMap};var mymap=L.map('map-120.101101-30.239119',{center:[30.239119,120.101101],zoom:14,layers:[normal],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'æ”¾å¤§',zoomOutTitle:'ç¼©å°'}).addTo(mymap);</script><br><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div id="googleMap-120.101101-30.239119" style="max-width:100%; height:360px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div><script type="text/javascript">var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:22,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:22,minZoom:1,attribution:'Google Maps'}),routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:22,minZoom:1,attribution:'Google Maps'});var baseLayers={"è°·æ­Œåœ°å›¾":normalMap,"è°·æ­Œå«æ˜Ÿå›¾":satelliteMap,"è°·æ­Œå«æ˜Ÿæ ‡æ³¨": routeMap};var overlayLayers={};var mymap=L.map("googleMap-120.101101-30.239119",{center:[30.239119,120.101101],zoom:14,layers:[normalMap],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'æ”¾å¤§',zoomOutTitle:'ç¼©å°'}).addTo(mymap);var marker = L.marker(['30.239119','120.101101']).addTo(mymap);marker.bindPopup("è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼").openPopup();</script><br><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="https://cdn.jsdelivr.net/npm/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div id="geoqMap-120.101101-30.239119" style="max-width:90%; height:320px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div><script type="text/javascript">var normalm1=L.tileLayer.chinaProvider('Geoq.Normal.Map',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm2=L.tileLayer.chinaProvider('Geoq.Normal.PurplishBlue',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm3=L.tileLayer.chinaProvider('Geoq.Normal.Gray',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm4=L.tileLayer.chinaProvider('Geoq.Normal.Warm',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm5=L.tileLayer.chinaProvider('Geoq.Theme.Hydro',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normal=L.layerGroup([normalm1,normalm2,normalm3,normalm4,normalm5]);var baseLayers={"æ™ºå›¾åœ°å›¾":normalm1,"åˆå¤œè“":normalm2,"ç°è‰²":normalm3,"æš–è‰²":normalm4,"æ°´ç³»":normalm5};var mymap=L.map("geoqMap-120.101101-30.239119",{center:[30.239119,120.101101],zoom:13,layers:[normalm3],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'æ”¾å¤§',zoomOutTitle:'ç¼©å°'}).addTo(mymap);var marker = L.marker(['30.239119','120.101101']).addTo(mymap);marker.bindPopup("è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼").openPopup();</script><br><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="231-éšè—å—"><a class="markdownIt-Anchor" href="#231-éšè—å—"></a> 2.31 éšè—å—</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li>contentï¼šè¦éšè—çš„å†…å®¹</li><li>displayï¼šå±•ç¤ºå‰æŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—ï¼ˆå¯é€‰ï¼‰</li><li>bgï¼šæŒ‰é’®çš„èƒŒæ™¯é¢œè‰²ï¼ˆå¯é€‰ï¼‰</li><li>colorï¼šæŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—çš„é¢œè‰²ï¼ˆå¯é€‰ï¼‰</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock ç‚¹æˆ‘é¢„è§ˆ, blue %&#125;</span><br><span class="line">è¿™é‡Œæœ‰å¼ å›¾ç‰‡ï¼š</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://s1.vika.cn/space/2022/10/30/b35fce448bc9404a8d65c3ce1e6e46eb&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;image (1)&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:67%;&quot;</span> /&gt;</span></span></span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="hide-block"><button type="button" class="hide-button" style="background-color:  blue;">ç‚¹æˆ‘é¢„è§ˆ    </button><div class="hide-content"><p>è¿™é‡Œæœ‰å¼ å›¾ç‰‡ï¼š<br /><img src="https://s1.vika.cn/space/2022/10/30/b35fce448bc9404a8d65c3ce1e6e46eb" alt="image (1)" style="zoom:67%;" /></p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»Markdownæ ¼å¼ä»¥åŠå¤–æŒ‚æ ‡ç­¾åœ¨ç½‘é¡µç«¯çš„æ¸²æŸ“æ•ˆæœï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="æ¼”ç¤º" scheme="https://blog.kakar.top/categories/%E6%BC%94%E7%A4%BA/"/>
    
    <category term="å¤–æŒ‚æ ‡ç­¾" scheme="https://blog.kakar.top/categories/%E6%BC%94%E7%A4%BA/%E5%A4%96%E6%8C%82%E6%A0%87%E7%AD%BE/"/>
    
    
    <category term="Markdown" scheme="https://blog.kakar.top/tags/Markdown/"/>
    
  </entry>
  
</feed>
